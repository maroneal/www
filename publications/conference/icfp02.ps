%!PS-Adobe-2.0
%%Creator: dvips(k) 5.86 Copyright 1999 Radical Eye Software
%%Title: paper.dvi
%%Pages: 12
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%DocumentFonts: Helvetica-Bold Helvetica Times-Roman Times-Bold
%%+ Times-Italic Symbol Courier Courier-Bold
%%EndComments
%DVIPSWebPage: (www.radicaleye.com)
%DVIPSCommandLine: /usr/site/teTeX-1.0.7/bin.real/dvips -f paper.dvi
%DVIPSParameters: dpi=600, compressed
%DVIPSSource:  TeX output 2002.10.25:2341
%%BeginProcSet: texc.pro
%!
/TeXDict 300 dict def TeXDict begin/N{def}def/B{bind def}N/S{exch}N/X{S
N}B/A{dup}B/TR{translate}N/isls false N/vsize 11 72 mul N/hsize 8.5 72
mul N/landplus90{false}def/@rigin{isls{[0 landplus90{1 -1}{-1 1}ifelse 0
0 0]concat}if 72 Resolution div 72 VResolution div neg scale isls{
landplus90{VResolution 72 div vsize mul 0 exch}{Resolution -72 div hsize
mul 0}ifelse TR}if Resolution VResolution vsize -72 div 1 add mul TR[
matrix currentmatrix{A A round sub abs 0.00001 lt{round}if}forall round
exch round exch]setmatrix}N/@landscape{/isls true N}B/@manualfeed{
statusdict/manualfeed true put}B/@copies{/#copies X}B/FMat[1 0 0 -1 0 0]
N/FBB[0 0 0 0]N/nn 0 N/IEn 0 N/ctr 0 N/df-tail{/nn 8 dict N nn begin
/FontType 3 N/FontMatrix fntrx N/FontBBox FBB N string/base X array
/BitMaps X/BuildChar{CharBuilder}N/Encoding IEn N end A{/foo setfont}2
array copy cvx N load 0 nn put/ctr 0 N[}B/sf 0 N/df{/sf 1 N/fntrx FMat N
df-tail}B/dfs{div/sf X/fntrx[sf 0 0 sf neg 0 0]N df-tail}B/E{pop nn A
definefont setfont}B/Cw{Cd A length 5 sub get}B/Ch{Cd A length 4 sub get
}B/Cx{128 Cd A length 3 sub get sub}B/Cy{Cd A length 2 sub get 127 sub}
B/Cdx{Cd A length 1 sub get}B/Ci{Cd A type/stringtype ne{ctr get/ctr ctr
1 add N}if}B/id 0 N/rw 0 N/rc 0 N/gp 0 N/cp 0 N/G 0 N/CharBuilder{save 3
1 roll S A/base get 2 index get S/BitMaps get S get/Cd X pop/ctr 0 N Cdx
0 Cx Cy Ch sub Cx Cw add Cy setcachedevice Cw Ch true[1 0 0 -1 -.1 Cx
sub Cy .1 sub]/id Ci N/rw Cw 7 add 8 idiv string N/rc 0 N/gp 0 N/cp 0 N{
rc 0 ne{rc 1 sub/rc X rw}{G}ifelse}imagemask restore}B/G{{id gp get/gp
gp 1 add N A 18 mod S 18 idiv pl S get exec}loop}B/adv{cp add/cp X}B
/chg{rw cp id gp 4 index getinterval putinterval A gp add/gp X adv}B/nd{
/cp 0 N rw exit}B/lsh{rw cp 2 copy get A 0 eq{pop 1}{A 255 eq{pop 254}{
A A add 255 and S 1 and or}ifelse}ifelse put 1 adv}B/rsh{rw cp 2 copy
get A 0 eq{pop 128}{A 255 eq{pop 127}{A 2 idiv S 128 and or}ifelse}
ifelse put 1 adv}B/clr{rw cp 2 index string putinterval adv}B/set{rw cp
fillstr 0 4 index getinterval putinterval adv}B/fillstr 18 string 0 1 17
{2 copy 255 put pop}for N/pl[{adv 1 chg}{adv 1 chg nd}{1 add chg}{1 add
chg nd}{adv lsh}{adv lsh nd}{adv rsh}{adv rsh nd}{1 add adv}{/rc X nd}{
1 add set}{1 add clr}{adv 2 chg}{adv 2 chg nd}{pop nd}]A{bind pop}
forall N/D{/cc X A type/stringtype ne{]}if nn/base get cc ctr put nn
/BitMaps get S ctr S sf 1 ne{A A length 1 sub A 2 index S get sf div put
}if put/ctr ctr 1 add N}B/I{cc 1 add D}B/bop{userdict/bop-hook known{
bop-hook}if/SI save N @rigin 0 0 moveto/V matrix currentmatrix A 1 get A
mul exch 0 get A mul add .99 lt{/QV}{/RV}ifelse load def pop pop}N/eop{
SI restore userdict/eop-hook known{eop-hook}if showpage}N/@start{
userdict/start-hook known{start-hook}if pop/VResolution X/Resolution X
1000 div/DVImag X/IEn 256 array N 2 string 0 1 255{IEn S A 360 add 36 4
index cvrs cvn put}for pop 65781.76 div/vsize X 65781.76 div/hsize X}N
/p{show}N/RMat[1 0 0 -1 0 0]N/BDot 260 string N/Rx 0 N/Ry 0 N/V{}B/RV/v{
/Ry X/Rx X V}B statusdict begin/product where{pop false[(Display)(NeXT)
(LaserWriter 16/600)]{A length product length le{A length product exch 0
exch getinterval eq{pop true exit}if}{pop}ifelse}forall}{false}ifelse
end{{gsave TR -.1 .1 TR 1 1 scale Rx Ry false RMat{BDot}imagemask
grestore}}{{gsave TR -.1 .1 TR Rx Ry scale 1 1 false RMat{BDot}
imagemask grestore}}ifelse B/QV{gsave newpath transform round exch round
exch itransform moveto Rx 0 rlineto 0 Ry neg rlineto Rx neg 0 rlineto
fill grestore}B/a{moveto}B/delta 0 N/tail{A/delta X 0 rmoveto}B/M{S p
delta add tail}B/b{S p tail}B/c{-4 M}B/d{-3 M}B/e{-2 M}B/f{-1 M}B/g{0 M}
B/h{1 M}B/i{2 M}B/j{3 M}B/k{4 M}B/w{0 rmoveto}B/l{p -4 w}B/m{p -3 w}B/n{
p -2 w}B/o{p -1 w}B/q{p 1 w}B/r{p 2 w}B/s{p 3 w}B/t{p 4 w}B/x{0 S
rmoveto}B/y{3 2 roll p a}B/bos{/SS save N}B/eos{SS restore}B end

%%EndProcSet
%%BeginProcSet: 8r.enc
% @@psencodingfile@{
%   author = "S. Rahtz, P. MacKay, Alan Jeffrey, B. Horn, K. Berry",
%   version = "0.6",
%   date = "1 July 1998",
%   filename = "8r.enc",
%   email = "tex-fonts@@tug.org",
%   docstring = "Encoding for TrueType or Type 1 fonts
%                to be used with TeX."
% @}
% 
% Idea is to have all the characters normally included in Type 1 fonts
% available for typesetting. This is effectively the characters in Adobe
% Standard Encoding + ISO Latin 1 + extra characters from Lucida.
% 
% Character code assignments were made as follows:
% 
% (1) the Windows ANSI characters are almost all in their Windows ANSI
% positions, because some Windows users cannot easily reencode the
% fonts, and it makes no difference on other systems. The only Windows
% ANSI characters not available are those that make no sense for
% typesetting -- rubout (127 decimal), nobreakspace (160), softhyphen
% (173). quotesingle and grave are moved just because it's such an
% irritation not having them in TeX positions.
% 
% (2) Remaining characters are assigned arbitrarily to the lower part
% of the range, avoiding 0, 10 and 13 in case we meet dumb software.
% 
% (3) Y&Y Lucida Bright includes some extra text characters; in the
% hopes that other PostScript fonts, perhaps created for public
% consumption, will include them, they are included starting at 0x12.
% 
% (4) Remaining positions left undefined are for use in (hopefully)
% upward-compatible revisions, if someday more characters are generally
% available.
% 
% (5) hyphen appears twice for compatibility with both 
% ASCII and Windows.
% 
/TeXBase1Encoding [
% 0x00 (encoded characters from Adobe Standard not in Windows 3.1)
  /.notdef /dotaccent /fi /fl
  /fraction /hungarumlaut /Lslash /lslash
  /ogonek /ring /.notdef
  /breve /minus /.notdef 
% These are the only two remaining unencoded characters, so may as
% well include them.
  /Zcaron /zcaron 
% 0x10
 /caron /dotlessi 
% (unusual TeX characters available in, e.g., Lucida Bright)
 /dotlessj /ff /ffi /ffl 
 /.notdef /.notdef /.notdef /.notdef
 /.notdef /.notdef /.notdef /.notdef
 % very contentious; it's so painful not having quoteleft and quoteright
 % at 96 and 145 that we move the things normally found there to here.
 /grave /quotesingle 
% 0x20 (ASCII begins)
 /space /exclam /quotedbl /numbersign
 /dollar /percent /ampersand /quoteright
 /parenleft /parenright /asterisk /plus /comma /hyphen /period /slash
% 0x30
 /zero /one /two /three /four /five /six /seven
 /eight /nine /colon /semicolon /less /equal /greater /question
% 0x40
 /at /A /B /C /D /E /F /G /H /I /J /K /L /M /N /O
% 0x50
 /P /Q /R /S /T /U /V /W
 /X /Y /Z /bracketleft /backslash /bracketright /asciicircum /underscore
% 0x60
 /quoteleft /a /b /c /d /e /f /g /h /i /j /k /l /m /n /o
% 0x70
 /p /q /r /s /t /u /v /w
 /x /y /z /braceleft /bar /braceright /asciitilde
 /.notdef % rubout; ASCII ends
% 0x80
 /.notdef /.notdef /quotesinglbase /florin
 /quotedblbase /ellipsis /dagger /daggerdbl
 /circumflex /perthousand /Scaron /guilsinglleft
 /OE /.notdef /.notdef /.notdef
% 0x90
 /.notdef /.notdef /.notdef /quotedblleft
 /quotedblright /bullet /endash /emdash
 /tilde /trademark /scaron /guilsinglright
 /oe /.notdef /.notdef /Ydieresis
% 0xA0
 /.notdef % nobreakspace
 /exclamdown /cent /sterling
 /currency /yen /brokenbar /section
 /dieresis /copyright /ordfeminine /guillemotleft
 /logicalnot
 /hyphen % Y&Y (also at 45); Windows' softhyphen
 /registered
 /macron
% 0xD0
 /degree /plusminus /twosuperior /threesuperior
 /acute /mu /paragraph /periodcentered
 /cedilla /onesuperior /ordmasculine /guillemotright
 /onequarter /onehalf /threequarters /questiondown
% 0xC0
 /Agrave /Aacute /Acircumflex /Atilde /Adieresis /Aring /AE /Ccedilla
 /Egrave /Eacute /Ecircumflex /Edieresis
 /Igrave /Iacute /Icircumflex /Idieresis
% 0xD0
 /Eth /Ntilde /Ograve /Oacute
 /Ocircumflex /Otilde /Odieresis /multiply
 /Oslash /Ugrave /Uacute /Ucircumflex
 /Udieresis /Yacute /Thorn /germandbls
% 0xE0
 /agrave /aacute /acircumflex /atilde
 /adieresis /aring /ae /ccedilla
 /egrave /eacute /ecircumflex /edieresis
 /igrave /iacute /icircumflex /idieresis
% 0xF0
 /eth /ntilde /ograve /oacute
 /ocircumflex /otilde /odieresis /divide
 /oslash /ugrave /uacute /ucircumflex
 /udieresis /yacute /thorn /ydieresis
] def

%%EndProcSet
%%BeginProcSet: texps.pro
%!
TeXDict begin/rf{findfont dup length 1 add dict begin{1 index/FID ne 2
index/UniqueID ne and{def}{pop pop}ifelse}forall[1 index 0 6 -1 roll
exec 0 exch 5 -1 roll VResolution Resolution div mul neg 0 0]/Metrics
exch def dict begin Encoding{exch dup type/integertype ne{pop pop 1 sub
dup 0 le{pop}{[}ifelse}{FontMatrix 0 get div Metrics 0 get div def}
ifelse}forall Metrics/Metrics currentdict end def[2 index currentdict
end definefont 3 -1 roll makefont/setfont cvx]cvx def}def/ObliqueSlant{
dup sin S cos div neg}B/SlantFont{4 index mul add}def/ExtendFont{3 -1
roll mul exch}def/ReEncodeFont{CharStrings rcheck{/Encoding false def
dup[exch{dup CharStrings exch known not{pop/.notdef/Encoding true def}
if}forall Encoding{]exch pop}{cleartomark}ifelse}if/Encoding exch def}
def end

%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin/SDict 200 dict N SDict begin/@SpecialDefaults{/hs 612 N
/vs 792 N/ho 0 N/vo 0 N/hsc 1 N/vsc 1 N/ang 0 N/CLIP 0 N/rwiSeen false N
/rhiSeen false N/letter{}N/note{}N/a4{}N/legal{}N}B/@scaleunit 100 N
/@hscale{@scaleunit div/hsc X}B/@vscale{@scaleunit div/vsc X}B/@hsize{
/hs X/CLIP 1 N}B/@vsize{/vs X/CLIP 1 N}B/@clip{/CLIP 2 N}B/@hoffset{/ho
X}B/@voffset{/vo X}B/@angle{/ang X}B/@rwi{10 div/rwi X/rwiSeen true N}B
/@rhi{10 div/rhi X/rhiSeen true N}B/@llx{/llx X}B/@lly{/lly X}B/@urx{
/urx X}B/@ury{/ury X}B/magscale true def end/@MacSetUp{userdict/md known
{userdict/md get type/dicttype eq{userdict begin md length 10 add md
maxlength ge{/md md dup length 20 add dict copy def}if end md begin
/letter{}N/note{}N/legal{}N/od{txpose 1 0 mtx defaultmatrix dtransform S
atan/pa X newpath clippath mark{transform{itransform moveto}}{transform{
itransform lineto}}{6 -2 roll transform 6 -2 roll transform 6 -2 roll
transform{itransform 6 2 roll itransform 6 2 roll itransform 6 2 roll
curveto}}{{closepath}}pathforall newpath counttomark array astore/gc xdf
pop ct 39 0 put 10 fz 0 fs 2 F/|______Courier fnt invertflag{PaintBlack}
if}N/txpose{pxs pys scale ppr aload pop por{noflips{pop S neg S TR pop 1
-1 scale}if xflip yflip and{pop S neg S TR 180 rotate 1 -1 scale ppr 3
get ppr 1 get neg sub neg ppr 2 get ppr 0 get neg sub neg TR}if xflip
yflip not and{pop S neg S TR pop 180 rotate ppr 3 get ppr 1 get neg sub
neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get neg TR}if}{
noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop pop
90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr
1 get neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr
2 get ppr 0 get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4
-1 roll add 2 div 3 1 roll add 2 div 2 copy TR .96 dup scale neg S neg S
TR}if}N/cp{pop pop showpage pm restore}N end}if}if}N/normalscale{
Resolution 72 div VResolution 72 div neg scale magscale{DVImag dup scale
}if 0 setgray}N/psfts{S 65781.76 div N}N/startTexFig{/psf$SavedState
save N userdict maxlength dict begin/magscale true def normalscale
currentpoint TR/psf$ury psfts/psf$urx psfts/psf$lly psfts/psf$llx psfts
/psf$y psfts/psf$x psfts currentpoint/psf$cy X/psf$cx X/psf$sx psf$x
psf$urx psf$llx sub div N/psf$sy psf$y psf$ury psf$lly sub div N psf$sx
psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy psf$sy div psf$ury sub
TR/showpage{}N/erasepage{}N/copypage{}N/p 3 def @MacSetUp}N/doclip{
psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll newpath 4 copy 4 2
roll moveto 6 -1 roll S lineto S lineto S lineto closepath clip newpath
moveto}N/endTexFig{end psf$SavedState restore}N/@beginspecial{SDict
begin/SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count/ocount X/dcount countdictstack N}N/@setspecial{
CLIP 1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto
closepath clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx
sub div rhiSeen{rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR
}{rhiSeen{rhi ury lly sub div dup scale llx neg lly neg TR}if}ifelse
CLIP 2 eq{newpath llx lly moveto urx lly lineto urx ury lineto llx ury
lineto closepath clip}if/showpage{}N/erasepage{}N/copypage{}N newpath}N
/@endspecial{count ocount sub{pop}repeat countdictstack dcount sub{end}
repeat grestore SpecialSave restore end}N/@defspecial{SDict begin}N
/@fedspecial{end}B/li{lineto}B/rl{rlineto}B/rc{rcurveto}B/np{/SaveX
currentpoint/SaveY X N 1 setlinecap newpath}N/st{stroke SaveX SaveY
moveto}N/fil{fill SaveX SaveY moveto}N/ellipse{/endangle X/startangle X
/yrad X/xrad X/savematrix matrix currentmatrix N TR xrad yrad scale 0 0
1 startangle endangle arc savematrix setmatrix}N end

%%EndProcSet
TeXDict begin 40258431 52099146 1000 600 600 (paper.dvi)
@start /Fa 166[43 3[43 37 33 40 1[33 43 43 53 2[23 20
43 43 33 37 43 40 40 43 65[{TeXBase1Encoding ReEncodeFont}19
59.7758 /Times-Roman rf
%DVIPSBitmapFont: Fb cmex10 9 1
/Fb 1 41 df<161E163E16FEED03FCED07F0ED0FE0ED1FC0ED7F005D5D4A5A4A5A4A5A14
0F5D141F5D143FA24A5AA44AC7FCB3B3B3AB5C1301A35C13035C13075C130F5C495AA249
5A49C8FC13FE5B485AEA07F0EA0FC0485A007EC9FC5A12F012FC127EEA1F806C7EEA07F0
EA01F86C7E7F137F6D7E6D7EA26D7E80130780130380130180A3130080B3B3B3AB6E7EA4
6E7EA2141F81140F8114076E7E6E7E6E7E8181ED1FC0ED0FE0ED07F0ED03FCED00FE163E
161E27DF76823C>40 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fc cmss9 9 1
/Fc 1 127 df<3907C00F80EA1FF0EA3FF89038FE1F0048B5FC387C3FFEEAF80F6D5AEB
01F019097AB226>126 D E
%EndDVIPSBitmapFont
/Fd 134[41 3[46 25 36 36 1[46 46 46 66 5[46 25 41 46
2[46 12[51 9[41 30 22[46 46 2[23 46[{TeXBase1Encoding ReEncodeFont}20
91.3242 /Times-Italic rf /Fe 134[45 4[45 3[45 4[45 2[45
2[45 1[45 24[45 6[45 67[{TeXBase1Encoding ReEncodeFont}9
74.7198 /Courier-Bold rf /Ff 134[37 37 54 1[42 25 29
33 1[42 37 42 62 21 1[25 21 42 37 25 33 42 33 1[37 12[50
42 5[71 50 5[46 1[54 11[37 37 37 37 37 37 37 37 2[19
4[25 25 37[42 2[{TeXBase1Encoding ReEncodeFont}39 74.7198
/Times-Bold rf
%DVIPSBitmapFont: Fg cmtt9 9 1
/Fg 1 50 df<130E131FA25B5BA25B5A5A127FB5FCA213BFEA7E3F1200B3AA003FB51280
5A15C01580A21A2F79AE27>49 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fh msbm9 9 1
/Fh 1 79 df<267FFFC0903807FFF0B56C5B6C6D7F260F00709038007E0026078078143C
6C6C6C141C6C6C7E6D7E8001F87F6D6C7E9038DE01E09038CF00F001C71370EC80789038
C3C03C9038C1E01E9038C0F00FEC78070238138091383C03C091381E01E091380F00F091
3807807002031378EDC03C913801E01E913800F00FED78070338139C92383C03DC92381E
01FCED0F00ED07800303137CEEC03C923801E01CED00F01678163C161C161E160FEE079C
EE03DC1601486C15FC486C1400267FFF80147CB5153C6C161CCA120C34347FB22F>78
D E
%EndDVIPSBitmapFont
/Fi 206[21 49[{TeXBase1Encoding ReEncodeFont}1 41.511
/Times-Roman rf /Fk 139[16 23 4[29 42 1[26 1[16 21[29
7[39 2[42 72[{TeXBase1Encoding ReEncodeFont}9 58.1154
/Times-Italic rf
%DVIPSBitmapFont: Fl cmr10 9 6
/Fl 6 94 df<EB0180EB030013065B5B13385B5BA2485AA2485A120790C7FCA25A120E12
1EA2121C123CA312381278A512F8A25AAD7EA21278A51238123CA3121C121EA2120E120F
7EA27F12036C7EA26C7EA213707F13187F7F7FEB0180114B79B71D>40
D<12C012607E7E7E120E7E6C7EA26C7EA26C7E7F1370A213781338133CA2131C131EA313
0E130FA51480A21307AD130FA21400A5130E131EA3131C133CA2133813781370A213F05B
485AA2485AA248C7FC120E120C5A5A5A5A114B7CB71D>I<EC01C0B3A6B91280A3C7D801
C0C8FCB3A631337CAB3A>43 D<B91280A3CCFCADB91280A331137C9B3A>61
D<EAFFE0A3EAE000B3B3B3AFEAFFE0A30B4B78B715>91 D<EAFFE0A31200B3B3B3AF12FF
A30B4B7FB715>93 D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fm cmr10 7 3
/Fm 3 94 df<1438B2B712FCA3C70038C7FCB226277DA12D>43 D<EAFF80A3EAE000B3B3
B1EAFF80A3093B7BAB10>91 D<EAFF80A31203B3B3B112FFA3093B7FAB10>93
D E
%EndDVIPSBitmapFont
/Fn 103[38 27[38 1[38 38 38 38 38 38 38 38 38 1[38 38
38 38 38 38 38 38 38 38 38 38 38 38 38 38 1[38 1[38 1[38
38 2[38 38 1[38 38 38 3[38 1[38 38 38 38 2[38 38 38 38
38 38 2[38 38 38 38 38 6[38 38 38 38 38 38 38 38 1[38
38 38 38 3[38 38 38 33[{.85 ExtendFont TeXBase1Encoding ReEncodeFont}67
74.7198 /Courier rf /Fo 175[32 6[19 2[32 2[39 16[29 1[29
3[15 4[19 39[{.167 SlantFont TeXBase1Encoding ReEncodeFont}8
58.1154 /Times-Roman rf /Fp 120[29 29 12[29 1[42 29 29
16 23 19 29 29 29 29 45 16 29 1[16 29 29 19 26 29 26
29 26 11[42 36 32 2[32 42 1[52 9[39 1[42 8[29 29 29 29
29 29 29 29 29 16 15 19 15 7[29 33[32 2[{TeXBase1Encoding ReEncodeFont}
48 58.1154 /Times-Roman rf
%DVIPSBitmapFont: Fr cmsy10 7 4
/Fr 4 49 df<B712C0A322037B8F2D>0 D<136013701360A400E0137000F013F0387C63
E0381E678038076E00EA01F8EA0060EA01F8EA076E381E6780387C63E038F060F000E013
7000001300A41370136014197C9A1D>3 D<EC0FFE91387FFFC049B512F0903907F803FC
90391FC0007F49C7EA1F80017CEC07C001F0EC01E048486E7E4848157848488190C9121C
48161E001E82001C82003C178000381603007817C000701601A300F017E0481600A96C16
01007017C0A30078160300381780003C1607001C1700001E5E6C161E6C161C6D153C6C6C
5D6C6C5D6C6C4A5A017CEC07C0013FEC1F80D91FC0017FC7FC903907F803FC0101B512F0
6D6C13C0DA0FFEC8FC33357DA83A>13 D<EA03E013F01207A313E0120FA213C0A3EA1F80
A31300A2123EA3123CA2127C1278A3127012F05AA20C1D7E9F10>48
D E
%EndDVIPSBitmapFont
%DVIPSBitmapFont: Fs cmmi10 9 3
/Fs 3 61 df<123C127E12FFA4127E123C08087A8715>58 D<123C127EB4FCA21380A212
7F123D1201A412031300A25A1206120E120C5A12385A122009177A8715>I<173817F816
03EE0FE0EE3F80EEFE00ED03F8ED0FE0ED3F8003FEC7FCEC03F8EC0FE0EC3F8002FEC8FC
EB03F8EB0FE0EB3F8001FEC9FCEA03F8EA0FE0EA3F8000FECAFC12F812FEEA3F80EA0FE0
EA03F8EA00FEEB3F80EB0FE0EB03F8EB00FEEC3F80EC0FE0EC03F8EC00FEED3F80ED0FE0
ED03F8ED00FEEE3F80EE0FE0EE03F8160017382D2D7AA83A>I E
%EndDVIPSBitmapFont
/Ft 105[37 28[33 33 50 33 37 21 29 29 37 37 37 37 54
21 33 21 21 37 37 21 33 37 33 37 37 3[29 1[29 2[46 62
46 54 42 37 46 1[46 54 50 62 42 50 33 25 54 54 46 46
54 50 46 46 6[25 37 37 37 37 37 37 37 37 37 37 1[19 25
19 2[25 25 25 35[37 37 2[{TeXBase1Encoding ReEncodeFont}70
74.7198 /Times-Italic rf /Fu 133[44 50 50 72 50 55 33
39 44 1[55 50 55 83 28 55 33 28 55 50 33 44 55 44 55
50 9[100 1[72 66 55 72 1[61 78 1[94 66 78 50 39 78 78
61 1[72 72 1[72 6[33 2[50 50 50 50 50 50 50 2[25 33 41[55
3[{TeXBase1Encoding ReEncodeFont}54 99.6264 /Times-Bold
rf /Fv 134[34 34 49 34 37 19 34 22 1[37 37 37 56 15 2[15
37 37 19 37 37 34 37 37 11[49 41 45 49 2[52 1[56 37 2[19
49 52 1[45 49 49 1[45 68 5[19 10[19 19 22 6[45 35[34
2[{TeXBase1Encoding ReEncodeFont}43 67.2474 /Helvetica
rf /Fw 75[25 11[25 17[37 1[33 33 10[25 37 37 11[33 37
37 54 37 37 21 29 25 37 37 37 37 58 21 37 21 21 37 37
25 33 37 33 37 33 3[25 1[25 46 54 54 71 54 54 46 42 50
54 42 54 54 66 46 54 29 25 54 54 42 46 54 50 50 54 1[33
3[21 21 37 37 37 37 37 37 37 37 37 37 21 19 25 19 2[25
25 25 3[37 17[21 25 12[42 42 2[{TeXBase1Encoding ReEncodeFont}87
74.7198 /Times-Roman rf /Fx 139[33 1[41 1[41 3[41 20[57
6[57 3[51 4[45 2[46 68[{}9 74.7198 /Symbol rf
%DVIPSBitmapFont: Fy cmsy10 9 20
/Fy 20 107 df<B812F8A32D037A933A>0 D<123C127E12FFA4127E123C08087A9615>I<
0060156000E015E06C14010078EC03C06CEC07806CEC0F006C141E6C6C5B6C6C5B6C6C5B
6C6C485A90387803C06D485A6D48C7FCEB0F1EEB07BCEB03F86D5A6D5A497E497EEB07BC
EB0F1EEB1E0F496C7E496C7E496C7E48486C7E4848137848487F48C77E001E8048EC0780
48EC03C048EC01E048140000601560232575A43A>I<130C131EA600E0EB01C000F01303
38FC0C0F00FE131F003FEB3F00380FCCFC3803EDF03800FFC0013FC7FCA2EBFFC03803ED
F0380FCCFC383F0C3F00FEEB1FC000FC130F38F01E0300E01301000090C7FCA6130C1A20
7BA225>I<EC0FF891B57E903903F0C7E090390F00C078011C141C0178140F01E0EC0380
48486E7E48486E7E48C7147000061630000E163848820018160C0038160E003016060070
1607006082A300E01780481601A3B9FCA200C0C738C00001A46C160300601700A300705E
003016060038160E0018160C001C161C6C5E00061630000716706C6C5D6C6C4A5A6C6C4A
5A0178020FC7FC011C141C010F1478903903F0C7E00100B51280DA0FF8C8FC31337CAB3A
>8 D<ED1FFE92B512C0020714F891391FF003FE913A7F80007F8002FCC7EA0FC0D903F0
EC03F0D907C0EC00F84948157C011EC9121E498249707E49707E4848707E491600000384
4848177890CB123848183C000E181C001E181E001C180E003C180F003884A20078198000
701803A300F019C0481801AB6C180300701980A30078180700381900A2003C60001C180E
001E181E000E181C000F183C6C18386D17786C6C5F0001606D16016C6C4C5A01784C5A6D
4CC7FC6D161E6D6C157C6D6C5DD903F0EC03F0D900FCEC0FC0DA7F80EB7F8091271FF003
FEC8FC0207B512F8020014C0DB1FFEC9FC42477CB54B>13 D<EB3FC0EBFFF0000313FC48
7F487F4814804814C0A24814E0A2B612F0A86C14E0A26C14C0A26C14806C14006C5B6C5B
C613F0EB3FC01C1C7CA025>15 D<B91280A27ECCFCADB91280A3CCFCAD007FB81280B9FC
A231237CA33A>17 D<173817F81603EE0FE0EE3F80EEFE00ED03F8ED0FE0ED3F8003FEC7
FCEC03F8EC0FE0EC3F8002FEC8FCEB03F8EB0FE0EB3F8001FEC9FCEA03F8EA0FE0EA3F80
00FECAFC12F812FEEA3F80EA0FE0EA03F8EA00FEEB3F80EB0FE0EB03F8EB00FEEC3F80EC
0FE0EC03F8EC00FEED3F80ED0FE0ED03F8ED00FEEE3F80EE0FE0EE03F8160017381700AD
007FB712F0B812F8A22D3D7AAF3A>20 D<EF01C0A2841700A28418701878A284181C181E
84727E727E727EF000F8197EBB12801AC01A80CCEA7E0019F8F001E04E5A4E5A4EC7FC18
1E181C183C60A2187018F060A2170160A242277CA54B>33 D<140CA2141EA3143FA24A7E
1473ECF3C014E101017F903803C0F0EC80700107137849487E011E7F497F017C8001FC80
000181D803DCEB0EF0D80F9C147CD81F1C80007CED0F8000F8ED07C000E01501000092C7
FCB3B3A3010C130C2A437EB32E>42 D<91383FFFF80103B5FC130FD91FE0C7FC017EC8FC
13F8485AEA03C0485A48C9FC120E121E5A123812781270A312F05AA2B712F8A300E0C9FC
A27E1270A312781238123C7E120E120F6C7E6C7EEA01F06C7E137EEB1FE06DB512F81303
EB003F252D7AA832>50 D<1638A21678167016F016E0150116C015031680150716005D15
0E151E151C153C15381578157015F05D14015D14035D140792C7FC5C140E141E141C143C
14381478147014F05C13015C13035C130791C8FC5B130E131E131C133C13381378137013
F05B12015B12035B120790C9FC5A120E121E121C123C12381278127012F05A1260254776
B500>54 D<12E0AC12F8A312E0AC051B7C9F00>I<0060ED018000E015036C1507007016
00A200785D0038150EA2003C151E001C151C001E153C000E1538A2000F15786C1570A26D
14F000035D90B6FC6C5DA29038E0000300005DA26D1307017091C7FCA201785B0138130E
013C131E011C131CA2011E133C010E1338A2010F13786D1370EC80F001035BA214C10101
5BA214E301005B14F70277C8FCA2147F143EA3141CA2293680B32A>I<B71280A3C81203
B3A3003FB6FC5AA2C81203B3A4B7FCA321347CB32A>I<126012E0B3A5B712F016F8A200
E0C9FCB3A6126025347CB32E>96 D<EB0180130313071400A25B130E131E131CA2133C13
38A21378137013F05BA212015B12035BA2120790C7FC5A120EA2121E121CA2123C123812
781270A212F05A7E1270A212781238123C121CA2121E120EA2120F7E7F1203A27F12017F
1200A27F137013781338A2133C131CA2131E130E130F7FA2148013031301114B79B71D>
104 D<12E0A27E1270A212781238123C121CA2121E120EA2120F7E7F1203A27F12017F12
00A27F137013781338A2133C131CA2131E130E130F7FA21480130313071400A25B130E13
1E131CA2133C1338A21378137013F05BA212015B12035BA2120790C7FC5A120EA2121E12
1CA2123C123812781270A212F05AA2114B7CB71D>I<12E0B3B3B3B3A3034B77B715>I
E
%EndDVIPSBitmapFont
/Fz 75[30 64[45 30 4[75 20 2[20 50 2[50 50 45 1[50 9[85
2[55 60 2[60 10[60 52[30 16[{TeXBase1Encoding ReEncodeFont}17
89.6632 /Helvetica rf /FA 134[75 3[82 45 75 52 1[82 82
82 1[37 4[82 45 75 82 2[75 12[82 90 6[82 2[37 73[{
TeXBase1Encoding ReEncodeFont}18 134.495 /Helvetica-Bold
rf end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 600dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 378 247 a FA(T)-11 b(a)o(gless)37 b(Sta)o(g)q(ed)g(Interpreter)
n(s)h(f)m(or)g(T)-8 b(yped)37 b(Langua)o(g)q(es)469 614
y Fz(Emir)24 b(P)l(a)791 612 y(\020)784 614 y(sali)926
612 y(\264)919 614 y(c)964 578 y Fy(\003)155 697 y Fv(OGI)19
b(School)g(of)g(Science)g(&)f(Engineer)q(ing)181 780
y(Oregon)j(Health)e(&)f(Science)h(Univ)n(ersity)406 863
y(pasalic@cse)o(.ogi.edu)1730 614 y Fz(W)l(alid)25 b(T)-11
b(aha)2170 578 y Fw(\206)1487 697 y Fv(Computer)20 b(Science)f(Depar)s
(tment)1727 780 y(Rice)f(Univ)n(ersity)1688 896 y(taha@cs)o(.r)q(ice)o
(.edu)2952 614 y Fz(Tim)25 b(Sheard)3417 578 y Fw(\207)2623
697 y Fv(OGI)19 b(School)g(of)g(Science)g(&)f(Engineer)q(ing)2649
780 y(Oregon)i(Health)g(&)e(Science)h(Univ)n(ersity)2876
863 y(sheard@cse)o(.ogi.edu)-150 1353 y Fu(Abstract)-67
1454 y Fw(Multi-stage)j(programming)i(languages)f(pro)o(vide)g(a)f(con)
m(v)o(enient)h(nota-)-150 1537 y(tion)k(for)g(e)o(xplicitly)h(staging)g
(programs.)49 b(Staging)27 b(a)g(de\002nitional)h(inter)o(-)-150
1620 y(preter)i(for)f(a)h(domain)g(speci\002c)g(language)h(is)e(one)h
(w)o(ay)g(of)g(deri)n(ving)g(an)-150 1703 y(implementation)c(that)f(is)
g(both)g(readable)h(and)g(ef)n(\002cient.)42 b(In)25
b(an)g(untyped)-150 1786 y(setting,)h(staging)f(an)g(interpreter)g
(\223remo)o(v)o(es)h(a)f(complete)g(layer)g(of)g(inter)o(-)-150
1869 y(preti)n(v)o(e)j(o)o(v)o(erhead\224,)k(just)c(lik)o(e)g(partial)g
(e)n(v)n(aluation.)52 b(In)28 b(a)g(typed)h(setting)-150
1952 y(ho)n(we)n(v)o(er)m(,)g(Hindle)o(y-Milner)d(type)h(systems)f(do)h
(not)f(allo)n(w)g(us)h(to)f(e)o(xploit)-150 2035 y(typing)e
(information)g(in)g Ft(the)f(langua)o(g)o(e)j(being)e(interpr)m(eted)p
Fw(.)38 b(In)24 b(practice,)-150 2118 y(this)19 b(can)g(mean)h(a)e(slo)
n(wdo)n(wn)j(cost)e(by)g(a)g(f)o(actor)g(of)g(three)g(or)g(more.)-67
2218 y(Pre)n(viously)-5 b(,)18 b(both)f(type)h(specialization)f(and)h
(tag)f(elimination)g(were)g(ap-)-150 2301 y(plied)24
b(to)h(this)f(problem.)40 b(In)24 b(this)g(paper)h(we)f(propose)i(an)e
(alternati)n(v)o(e)h(ap-)-150 2384 y(proach,)h(namely)-5
b(,)25 b(e)o(xpressing)g(the)e(de\002nitional)h(interpreter)g(in)f(a)h
(depen-)-150 2467 y(dently)e(typed)g(programming)h(language.)33
b(W)-6 b(e)21 b(report)h(on)g(our)g(e)o(xperience)-150
2550 y(with)i(the)h(issues)f(that)h(arise)f(in)g(writing)h(such)g(an)g
(interpreter)f(and)h(in)g(de-)-150 2633 y(signing)20
b(such)f(a)g(language.)-67 2732 y(T)-6 b(o)21 b(demonstrate)h(the)g
(soundness)h(of)e(combining)i(staging)f(and)g(depen-)-150
2815 y(dent)28 b(types)g(in)g(a)g(general)g(sense,)i(we)e(formalize)f
(our)h(language)i(\(called)-150 2898 y(Meta-D\))17 b(and)h(pro)o(v)o(e)
g(its)f(type)h(safety)-5 b(.)23 b(T)-6 b(o)17 b(formalize)g(Meta-D,)h
(we)f(e)o(xtend)-150 2981 y(Shao,)31 b(Saha,)h(T)m(rifono)o(v)d(and)h
(P)o(apasp)o(yrou')l(s)g Fx(l)p Fw(H)f(language)h(to)f(a)g(multi-)-150
3064 y(le)n(v)o(el)21 b(setting.)30 b(Building)22 b(on)g
Fx(l)p Fw(H)f(allo)n(ws)g(us)g(to)h(demonstrate)g(type)g(safety)-150
3147 y(in)e(a)f(setting)h(where)g(the)g(type)g(language)h(contains)f
(all)f(the)h(calculus)g(of)g(in-)-150 3230 y(ducti)n(v)o(e)d
(constructions,)h(b)o(ut)e(without)h(ha)o(ving)g(to)f(repeat)h(the)f(w)
o(ork)h(needed)-150 3313 y(for)i(establishing)g(the)g(soundness)i(of)e
(that)g(system.)-150 3498 y Fu(General)25 b(T)-9 b(erms)-67
3599 y Fw(Languages,)20 b(Performance)-150 3783 y Fu(K)n(eyw)o(ords)-67
3884 y Fw(Multi-stage)28 b(programming,)j(de\002nitional)d
(interpreters,)h(calculus)g(of)-150 3967 y(constructions,)20
b(domain-speci\002c)g(languages.)p -150 4089 801 4 v
-16 4137 a Fr(\003)20 4164 y Fw(Supported)g(by)f(NSF)f(CCR-0098126.)-16
4229 y Fp(\206)22 4256 y Fw(Supported)j(by)h(NSF)d(ITR-0113569.)30
b(This)21 b(w)o(ork)g(w)o(as)g(done)h(while)-150 4339
y(the)d(author)h(w)o(as)f(at)f(Y)-7 b(ale)19 b(Uni)n(v)o(ersity)-5
b(.)-16 4404 y Fp(\207)20 4431 y Fw(Supported)20 b(by)f(NSF)f
(CCR-0098126.)-149 5004 y Fp(Permission)i(to)f(mak)o(e)h(digital)f(or)h
(hard)f(copies)g(of)g(all)g(or)h(part)f(of)h(this)f(w)o(ork)h(for)g
(personal)f(or)-149 5070 y(classroom)d(use)g(is)g(granted)g(without)h
(fee)f(pro)o(vided)h(that)f(copies)g(are)g(not)g(made)g(or)h(distrib)o
(uted)-149 5136 y(for)e(pro\002t)f(or)g(commercial)f(adv)o(antage)g
(and)g(that)g(copies)g(bear)g(this)h(notice)f(and)g(the)h(full)g
(citation)-149 5203 y(on)i(the)g(\002rst)g(page.)k(T)-5
b(o)15 b(cop)o(y)h(otherwise,)f(to)h(republish,)g(to)g(post)f(on)h
(serv)o(ers)f(or)h(to)f(redistrib)o(ute)-149 5269 y(to)g(lists,)f
(requires)h(prior)g(speci\002c)f(permission)h(and/or)g(a)f(fee.)-149
5336 y Fo(ICFP'02,)j Fp(October)d(4-6,)h(2002,)f(Pittsb)o(ur)o(gh,)h
(Pennsylv)o(ania,)f(USA.)-149 5402 y(Cop)o(yright)i(2002)f(A)n(CM)f
(1-58113-487-8/02/0010)i(...$5.00)2049 1353 y Fu(1)99
b(Intr)n(oduction)2132 1454 y Fw(In)20 b(recent)g(years,)g(substantial)
g(ef)n(fort)f(has)h(been)h(in)m(v)o(ested)f(in)g(the)f(de)n(v)o(el-)
2049 1537 y(opment)26 b(of)e(both)i(the)f(theory)g(and)h(tools)e(for)h
(the)g(rapid)g(implementation)2049 1620 y(of)20 b(domain)h(speci\002c)f
(languages)i(\(DSLs\))c([4)q(,)h(22)q(,)g(40)q(,)h(47,)g(45,)g(23)q(].)
26 b(DSLs)2049 1703 y(are)j(formalisms)f(that)g(pro)o(vide)i(their)e
(users)h(with)f(a)h(notation)g(appropri-)2049 1786 y(ate)22
b(for)h(a)f(speci\002c)h(f)o(amily)f(of)h(tasks.)34 b(A)22
b(promising)h(approach)i(to)d(imple-)2049 1869 y(menting)i(domain)h
(speci\002c)e(languages)i(is)e(to)h(write)f(a)g(de\002nitional)h(inter)
o(-)2049 1952 y(preter)g([42])g(for)f(the)h(DSL)f(in)h(some)g
(meta-language,)i(and)f(then)f(to)f(stage)2049 2035 y(this)f
(interpreter)h(either)f(manually)-5 b(,)24 b(by)f(adding)h(e)o(xplicit)
e(staging)h(annota-)2049 2118 y(tions)17 b(\(multi-stage)g(programming)
i([55)q(,)e(30,)g(45)q(,)f(50)q(]\),)h(or)g(by)h(applying)g(an)2049
2201 y(automatic)28 b(binding-time)h(analysis)f(\(of)n(f-line)g
(partial)g(e)n(v)n(aluation)h([25)q(]\).)2049 2284 y(The)21
b(result)g(of)g(either)g(of)g(these)h(steps)f(is)g(a)g
Ft(sta)o(g)o(ed)i(interpr)m(eter)p Fw(.)30 b(A)21 b(staged)2049
2367 y(interpreter)g(is)f(essentially)h(a)f Ft(tr)o(anslation)i
Fw(from)e(a)h(subject-language)i(\(the)2049 2450 y(DSL\))g(to)i(a)f
(tar)o(get-language)2841 2423 y Fp(1)2876 2450 y Fw(.)39
b(If)24 b(there)h(is)f(already)h(a)f(compiler)h(for)g(the)2049
2533 y(tar)o(get-language,)17 b(the)f(approach)h(yields)f(a)f(simple)h
(compiler)g(for)g(the)f(DSL.)2049 2616 y(In)22 b(addition)h(to)f(the)g
(performance)i(bene\002t)e(of)g(a)g(compiler)h(o)o(v)o(er)f(an)h(inter)
o(-)2049 2699 y(preter)m(,)j(the)g(compiler)f(obtained)h(by)g(this)f
(process)h(often)f(retains)g(a)g(close)2049 2782 y(syntactic)d
(connection)h(with)f(the)f(original)h(interpreter)m(,)g(inspiring)h
(greater)2049 2865 y(con\002dence)d(in)f(its)f(correctness.)2132
2965 y(This)j(paper)i(is)e(concerned)i(with)e(a)h(subtle)g(b)o(ut)f
(costly)h(problem)g(which)2049 3048 y(can)k(arise)g(when)g
Ft(both)g Fw(the)g(subject-)g(and)g(the)g(meta-language)h(are)f(stati-)
2049 3131 y(cally)e(typed.)39 b(In)24 b(particular)m(,)h(when)f(the)g
(meta-language)i(is)d(typed,)j(there)2049 3214 y(is)20
b(generally)h(a)g(need)g(to)g(introduce)g(a)g(\223uni)n(v)o(ersal)g
(datatype\224)h(to)e(represent)2049 3297 y(v)n(alues)i(uniformly)g
(\(see)g([48)q(])f(for)g(a)h(detailed)f(discussion\).)32
b(Ha)o(ving)22 b(such)2049 3380 y(a)29 b(uni)n(v)o(ersal)g(datatype)h
(means)f(that)f(we)h(ha)o(v)o(e)g(to)f(perform)i(tagging)f(and)2049
3463 y(untagging)19 b(operations)g(at)e(run)h(time.)k(When)17
b(the)h(subject-language)h(is)e(un-)2049 3546 y(typed,)23
b(as)g(it)e(w)o(ould)i(be)g(when)f(writing)g(an)h(ML)f(interpreter)g
(for)g(Scheme,)2049 3629 y(the)g(checks)h(are)e(really)h(necessary)-5
b(.)33 b(But,)22 b(when)g(the)g(subject-language)i(is)2049
3712 y(also)18 b(statically)f(typed,)i(as)f(it)f(w)o(ould)i(be)f(when)g
(writing)g(an)g(ML)g(interpreter)2049 3795 y(for)k(ML,)f(the)h(e)o
(xtra)g(tags)g(are)f(not)h(really)g(needed.)33 b(The)o(y)22
b(are)g(only)g(neces-)2049 3878 y(sary)17 b(to)g Ft(statically)g(type)g
(c)o(hec)o(k)g(the)g(interpr)m(eter)r Fw(.)23 b(When)17
b(this)f(interpreter)h(is)2049 3961 y(staged,)24 b(it)e(inherits)h
([29])g(this)f(weakness,)i(and)g(generates)f(programs)h(that)2049
4044 y(contain)f Ft(super\003uous)i(ta)o(g)o(ging)f(and)g(unta)o(g)o
(ging)h(oper)o(ations)p Fw(.)35 b(Early)22 b(esti-)2049
4127 y(mates)17 b(of)g(the)f(cost)h(of)g(tags)g(suggested)h(that)e(it)h
(produces)h(up)f(to)g(a)f(2.6)h(times)2049 4210 y(slo)n(wdo)n(wn)26
b(in)e(the)h(SML/NJ)e(system)i([54)q(].)39 b(More)26
b(e)o(xtensi)n(v)o(e)f(studies)g(in)2049 4293 y(the)d(MetaOCaml)g
(system)g(sho)n(w)h(that)f(slo)n(wdo)n(wn)h(due)f(to)g(tags)g(can)h(be)
f(as)2049 4376 y(high)e(as)e(10)i(times)e([21)q(].)2132
4476 y(Ho)n(w)i(can)h(we)f(remo)o(v)o(e)h(the)f(tagging)h(o)o(v)o
(erhead)g(inherent)g(in)f(the)g(use)h(of)2049 4559 y(uni)n(v)o(ersal)f
(types?)2132 4658 y(One)e(recently)g(proposed)h(possibility)f(is)f(tag)
h(elimination)f([54)q(,)g(53)q(,)g(26],)2049 4741 y(a)22
b(transformation)h(that)f(w)o(as)h(designed)h(to)e(remo)o(v)o(e)h(the)f
(super\003uous)i(tags)2049 4824 y(in)k(a)g(post-processing)i(phase.)52
b(Under)29 b(this)f(scheme,)j(DSL)c(implemen-)2049 4907
y(tation)k(is)g(di)n(vided)h(into)f Ft(thr)m(ee)g Fw(distinct)g(stages)
h(\(rather)f(than)g(the)g(tradi-)2049 4990 y(tional)21
b(tw)o(o\).)31 b(The)22 b(e)o(xtra)f(stage,)h Ft(ta)o(g)g(elimination)p
Fw(,)g(is)f(distinctly)h(dif)n(ferent)2049 5073 y(from)i(the)f
(traditional)h(partial)f(e)n(v)n(aluation)i(\(or)f(specialization\))g
(stage.)38 b(In)2049 5156 y(essence,)30 b(tag)e(elimination)f(allo)n
(ws)h(us)f(to)h(type)g(check)g(the)g(subject)g(pro-)p
2049 5229 V 2150 5290 a Fp(1)2183 5317 y Fw(Explicit)21
b(staging)h(in)f(a)h(multi-stage)f(language)i(usually)f(implies)f(that)
2049 5400 y(the)e(meta-language)i(and)e(the)g(tar)o(get-language)h(are)
f(the)g(same)g(language.)p eop
%%Page: 2 2
2 1 bop -150 83 a Fw(gram)26 b(after)f(it)f(has)i(been)g(transformed.)
44 b(If)25 b(it)f(checks,)k(super\003uous)f(tags)-150
166 y(are)f(simply)g(erased)g(from)g(the)g(interpretation.)44
b(If)25 b(not,)i(a)f(\223semantically)-150 249 y(equi)n(v)n(alent\224)d
(interf)o(ace)g(is)e(added)i(around)g(the)f(interpretation.)32
b(T)-6 b(ag)22 b(elim-)-150 332 y(ination,)g(ho)n(we)n(v)o(er)m(,)i
(does)e(not)g Ft(statically)f Fw(guarantee)i(that)f(all)f(tags)h(will)e
(be)-150 415 y(erased.)j(W)-6 b(e)16 b(must)h(run)g(the)g(tag)f
(elimination)h(at)g(runtime)g(\(in)f(a)h(multi-stage)-150
498 y(language\).)-67 598 y(In)i(this)f(paper)m(,)h(we)g(study)g(an)g
(alternati)n(v)o(e)g(approach)h(that)e(does)i(pro)o(vide)-150
681 y(such)f(a)e(guarantee.)24 b(In)18 b(f)o(act,)g(the)g(user)g(ne)n
(v)o(er)g(introduces)h(these)f(tags)g(in)g(the)-150 764
y(\002rst)j(place,)h(because)h(the)f(type)g(system)f(of)h(the)g
(meta-language)h(is)e(strong)-150 847 y(enough)g(to)d(a)o(v)o(oid)h(an)
o(y)h(need)f(for)g(them.)-67 946 y(In)f(what)g(follo)n(ws)g(we)g
(describe)g(the)g(details)g(of)g(super\003uous)h(tags)f(prob-)-150
1029 y(lem.)-150 1180 y Fu(1.1)99 b(Untyped)26 b(Inter)o(pr)n(eters)-67
1280 y Fw(W)-6 b(e)18 b(be)o(gin)g(by)h(re)n(vie)n(wing)g(ho)n(w)f(one)
h(writes)e(a)h(simple)h(interpreter)f(in)f(an)-150 1363
y(untyped)j(language.)396 1336 y Fp(2)453 1363 y Fw(F)o(or)d
(notational)i(parsimon)o(y)-5 b(,)19 b(we)f(will)f(use)h(ML)g(syn-)-150
1446 y(tax)h(b)o(ut)f(disre)o(gard)h(types.)k(An)c(interpreter)g(for)f
(a)h(small)f(lambda)h(language)-150 1529 y(can)g(be)h(de\002ned)f(as)g
(follo)n(ws:)-150 1627 y Fn(datatype)39 b(exp)f(=)h(B)f(of)g(int)h(|)f
(V)g(of)g(string)345 1710 y(|)h(L)f(of)g(string)h(*)f(exp)h(|)f(A)g(of)
g(exp)h(*)f(exp)-150 1876 y(fun)g(eval)h(e)f(env)h(=)-112
1959 y(case)g(e)f(of)-36 2042 y(B)h(i)190 b(=>)38 b(i)-112
2125 y(|)g(V)h(s)190 b(=>)38 b(env)h(s)-112 2208 y(|)f(L)h(\(s,e\))f
(=>)g(fn)h(v)f(=>)g(eval)h(e)f(\(ext)h(env)f(s)g(v\))-112
2291 y(|)g(A)h(\(f,e\))f(=>)g(\(eval)h(f)f(env\))h(\(eval)g(e)f(env\))
-67 2455 y Fw(This)19 b(pro)o(vides)h(a)f(simple)g(implementation)h(of)
f(subject)h(programs)g(rep-)-150 2538 y(resented)30 b(in)e(the)h
(datatype)h Fn(exp)p Fw(.)52 b(The)29 b(function)h Fn(eval)f
Fw(e)n(v)n(aluates)h Fn(exp)p Fw(s)-150 2621 y(in)24
b(an)h(en)m(vironment)h Fn(env)e Fw(that)g(binds)h(the)g(free)f(v)n
(ariables)h(in)f(the)h(term)f(to)-150 2704 y(v)n(alues.)-67
2804 y(This)g(implementation)i(suf)n(fers)f(from)g(a)f(se)n(v)o(ere)i
(performance)g(limita-)-150 2887 y(tion.)54 b(In)30 b(particular)m(,)h
(if)e(we)g(were)h(able)f(to)h(inspect)f(the)h(result)f(of)g(a)g(an)-150
2970 y(interpretation,)20 b(such)g(as)g Fn(\(eval)39
b(\(L\("x",V)g("x"\)\))f(env0\))p Fw(,)20 b(we)g(w)o(ould)-150
3053 y(\002nd)f(that)g(it)f(is)g(equi)n(v)n(alent)j(to)-150
3150 y Fn(\(fn)38 b(v)h(=>)f(eval)g(\(V)h("x"\))f(\(ext)h(env0)f("x")h
(v\)\).)-150 3231 y Fw(This)22 b(term)h(will)f(compute)i(the)f(correct)
g(result,)g(b)o(ut)g(it)f(contains)i(an)f(une)o(x-)-150
3314 y(panded)e(recursi)n(v)o(e)g(call)e(to)h Fn(eval)p
Fw(.)26 b(This)19 b(problem)i(arises)f(in)f(both)i(call-by-)-150
3397 y(v)n(alue)j(and)f(call-by-name)h(languages,)i(and)d(is)g(one)h
(of)f(the)g(main)g(reasons)-150 3480 y(for)18 b(what)h(is)f(called)g
(the)h(\223layer)f(of)h(interpreti)n(v)o(e)f(o)o(v)o(erhead\224)i(that)
f(de)o(grades)-150 3563 y(performance.)35 b(F)o(ortunately)-5
b(,)24 b(this)e(problem)h(can)g(be)g(eliminated)g(through)-150
3646 y(the)c(use)g(of)g(staging)h(annotations)g([48)q(].)-150
3797 y Fu(1.2)99 b(Untyped)26 b(Staged)g(Inter)o(pr)n(eters)-67
3897 y Fw(Staging)d(annotations)h(partition)e(the)h(program)h(into)f
(stages.)34 b(Brack)o(ets)-150 3980 y Fn(.<_>.)23 b Fw(surrounding)i
(an)f(e)o(xpression)g(lift)e(it)h(to)g(the)g(ne)o(xt)g(stage)g(\(b)o
(uilding)-150 4063 y(code\).)46 b(Escape)26 b Fn(.\230_)g
Fw(drops)h(its)f(surrounded)i(e)o(xpression)f(to)f(a)h(pre)n(vious)-150
4146 y(stage)i(\(splicing)f(in)g(already)h(constructed)h(code)f(to)f(b)
o(uild)g(lar)o(ger)g(pieces)-150 4229 y(of)f(code\),)h(and)g(should)f
(only)g(appear)h(within)e(brack)o(ets.)47 b(Staging)27
b(anno-)-150 4312 y(tations)h(change)i(the)e(e)n(v)n(aluation)h(order)f
(of)h(programs,)i(e)n(v)o(en)d(e)n(v)n(aluating)-150
4395 y(under)17 b(lambda)f(abstraction,)h(and)g(force)f(the)g
(unfolding)h(of)f(the)g Fn(eval)g Fw(func-)-150 4478
y(tion)22 b(at)f(code-generation)j(time.)31 b(Thus,)22
b(by)g(just)g(adding)h(staging)f(annota-)-150 4561 y(tions)j(to)f(the)h
Fn(eval)g Fw(function,)h(we)f(can)g(change)h(its)e(beha)o(vior)h(to)g
(achie)n(v)o(e)-150 4644 y(the)19 b(desired)g(operational)h(semantics:)
-150 4742 y Fn(fun)38 b(eval')h(e)f(env)h(=)-112 4825
y(\(case)g(e)f(of)-36 4908 y(B)h(i)190 b(=>)38 b(.<i>.)-112
4991 y(|)g(V)h(s)190 b(=>)38 b(env)h(s)p -150 5063 801
4 v -49 5124 a Fp(2)-16 5151 y Fw(Discussing)18 b(the)g(issue)f(of)h
(ho)n(w)f(to)g(pro)o(v)o(e)h(the)g(adequac)o(y)h(of)e(represen-)-150
5234 y(tations)22 b(or)f(correctness)i(of)f(implementations)g(of)g
(interpreters)g(is)f(be)o(yond)-150 5317 y(the)15 b(scope)h(of)f(this)g
(paper)l(.)22 b(Examples)16 b(of)f(ho)n(w)g(this)g(can)h(done)g(can)f
(be)h(found)-150 5400 y(else)n(where)k([54].)2087 83
y Fn(|)38 b(L)h(\(s,e\))f(=>)g(.<fn)h(v)f(=>)h(.\230\(eval')g(e)f
(\(ext)g(env)h(s)f(.<v>.\)\)>.)2087 166 y(|)g(A)h(\(f,e\))f(=>)g
(.<.\230\(eval')i(f)e(env\))g(.\230\(eval')h(e)g(env\)\)>.)2049
247 y Fw(Computing)16 b(the)g(application)g Fn(eval')39
b(\(L\("x",V)g("x"\)\))f(env0)16 b Fw(directly)2049 330
y(yields)j(a)g(term)g Fn(.<fn)38 b(v)g(=>)h(v>.)2132
430 y Fw(No)n(w)26 b(there)g(are)f(no)i(lefto)o(v)o(er)e(recursi)n(v)o
(e)i(calls)e(to)h Fn(eval)p Fw(.)43 b(Multi-stage)2049
513 y(languages)19 b(come)f(with)f(a)g(run)h(annotation)h
Fn(.!_)e Fw(that)h(allo)n(ws)f(us)h(to)f(e)o(x)o(ecute)2049
596 y(such)i(a)g(code)g(fragment.)k(A)c(staged)g(interpreter)f(can)h
(therefore)g(be)g(vie)n(wed)2049 679 y(as)27 b(user)o(-directed)g(w)o
(ay)g(of)g(re\003ecting)f(a)h(subject)g(program)h(into)e(a)h(meta-)2049
762 y(program,)c(which)g(then)f(can)h(be)f(handed)i(o)o(v)o(er)e(in)g
(a)g(type)g(safe)g(w)o(ay)h(to)f(the)2049 845 y(compiler)d(of)g(the)g
(meta-language.)2049 971 y Fu(1.3)99 b(Hindley-Milner)25
b(Staged)h(Inter)o(pr)n(eters)2132 1071 y Fw(In)g(programming)h
(languages,)h(such)e(as)g(Hask)o(ell)g(or)f(ML,)g(which)h(use)2049
1155 y(a)c(Hindle)o(y-Milner)h(type)f(system,)h(the)g(abo)o(v)o(e)g
Fn(eval)f Fw(function)h(\(staged)g(or)2049 1238 y(unstaged\))c(is)f
(not)g(well-typed)g([48].)23 b(Each)18 b(branch)h(of)f(the)f(case)i
(statement)2049 1321 y(has)g(a)g(dif)n(ferent)g(type,)g(and)h(these)f
(types)g(cannot)h(be)g(reconciled.)2132 1420 y(W)m(ithin)j(a)h(Hindle)o
(y-Milner)h(system,)g(we)f(can)g(circumv)o(ent)h(this)e(prob-)2049
1503 y(lem)18 b(by)h(using)g(a)f(uni)n(v)o(ersal)h(type.)k(A)18
b(uni)n(v)o(ersal)h(type)g(is)f(a)g(type)h(that)f(is)g(rich)2049
1586 y(enough)j(to)e(encode)i(v)n(alues)f(of)f(all)g(the)g(types)h
(that)f(appear)h(in)f(the)h(result)f(of)2049 1669 y(a)25
b(function)h(lik)o(e)f Fn(eval)p Fw(.)42 b(In)25 b(the)g(case)g(abo)o
(v)o(e,)i(this)e(includes)h(function)g(as)2049 1752 y(well)d(as)h(inte)
o(ger)f(v)n(alues.)38 b(A)23 b(typical)h(de\002nition)g(of)f(a)h(uni)n
(v)o(ersal)g(type)g(for)2049 1835 y(this)19 b(e)o(xample)g(might)g(be:)
2049 1918 y Fn(datatype)39 b(V)f(=)g(I)h(of)f(int)g(|)h(F)f(of)g(V)g
(->)h(V)2132 2018 y Fw(The)19 b(interpreter)g(can)g(then)h(be)f(re)n
(written)f(as)h(a)g(well-typed)g(program:)2049 2099 y
Fn(fun)38 b(unF)h(\(F)f(v\))g(=)h(v)2049 2265 y(fun)f(eval)h(e)f(env)h
(=)2087 2348 y(\(case)g(e)f(of)2163 2431 y(B)h(i)190
b(=>)38 b(I)h(i)2087 2514 y(|)f(V)h(s)190 b(=>)38 b(env)h(s)2087
2597 y(|)f(L)h(\(s,e\))f(=>)g(F)h(\(fn)f(v)g(=>)h(eval)f(e)g(\(ext)h
(env)f(s)h(v\)\))2087 2680 y(|)f(A)h(\(f,e\))f(=>)g(\(unF)h(\(eval)g(f)
f(env\)\))h(\(eval)f(e)g(env\)\);)2049 2761 y Fw(No)n(w)-5
b(,)30 b(when)f(we)e(compute)i Fn(\(eval)39 b(\(L\("x",V)g("x"\)\))g
(env0\))28 b Fw(we)g(get)2049 2844 y(back)20 b(a)f(v)n(alue)2049
2925 y Fn(\(F)38 b(\(fn)h(v)f(=>)g(eval)h(\(V)f("x"\))h(\(ext)f(env0)h
("x")f(v\)\)\).)2049 3006 y Fw(Just)24 b(as)h(we)f(did)h(for)f(the)h
(untyped)h Fn(eval)p Fw(,)f(we)g(can)g(stage)g(this)f(v)o(ersion)h(of)
2049 3089 y Fn(eval)p Fw(.)2132 3189 y(No)n(w)19 b(computing)h
Fn(\(eval)39 b(\(L\("x",V)g("x"\)\))g(env0\))19 b Fw(yields:)2049
3269 y Fn(.<\(F)39 b(\(fn)f(v)g(=>)g(v\)\)>.)2049 3396
y Fu(1.4)99 b(Pr)n(oblem:)32 b(Super\003uous)27 b(T)-9
b(ags)2132 3496 y Fw(Unfortunately)k(,)18 b(the)e(result)g(abo)o(v)o(e)
h(still)e(contains)i(the)f(tag)h Fn(F)p Fw(.)e(While)h(this)2049
3579 y(may)k(seem)g(lik)o(e)g(minor)g(issue)g(in)f(a)h(small)f(program)
i(lik)o(e)f(this)f(one,)h(the)g(ef-)2049 3662 y(fect)14
b(in)h(a)f(lar)o(ger)h(program)g(will)f(be)h(a)f(profusion)i(of)e
(tagging)i(and)f(untagging)2049 3745 y(operations.)54
b(Such)29 b(tags)g(w)o(ould)g(indeed)h(be)f(necessary)h(if)f(the)f
(subject-)2049 3828 y(language)f(w)o(as)e(untyped.)44
b(But)25 b(if)f(we)h(kno)n(w)h(that)f(the)h(subject-language)2049
3911 y(is)g(statically)h(typed)g(\(for)g(e)o(xample,)i(as)d(a)h
(simply-typed)h(lambda)f(calcu-)2049 3994 y(lus\))j(the)g(tagging)h
(and)g(untagging)g(operations)g(are)f(really)g(not)h(needed.)2049
4077 y(Benchmarks)23 b(indicate)f(that)g(these)g(tags)g(add)h(a)f(2-3)g
(time)g(o)o(v)o(erhead)h([54],)2049 4160 y(sometimes)c(as)g(lar)o(ge)g
(as)g(3-10)h(times)e([21)q(].)2132 4260 y(There)29 b(are)f(a)h(number)g
(of)g(approaches)h(for)e(dealing)i(with)e(this)g(prob-)2049
4343 y(lem.)g(None)22 b(of)e(these)i(approaches,)g(ho)n(we)n(v)o(er)m
(,)g(guarantee)g(\(at)f(the)f(time)h(of)2049 4426 y(writing)j(the)h
(staged)h(interpreter\))e(that)h(the)g(tags)g(will)f(be)h(eliminated)g
(be-)2049 4509 y(fore)d(runtime.)32 b(Ev)o(en)22 b(tag)g(elimination,)h
(which)f(guarantees)h(the)f(elimina-)2049 4592 y(tion)d(of)g(tags)g
(for)g(these)g(particular)g(e)o(xamples,)g(requires)h(a)e(separate)i
(meta-)2049 4675 y(theoretic)c(proof)h Ft(for)f(eac)o(h)g(subject)g
(langua)o(g)o(e)j Fw(to)d(obtain)g(such)h(a)f(guarantee)2049
4758 y([54)q(].)2049 4884 y Fu(1.5)99 b(Contrib)n(utions)2132
4985 y Fw(In)22 b(this)g(paper)h(we)f(propose)i(an)e(alternati)n(v)o(e)
g(solution)h(to)f(the)g(super\003u-)2049 5068 y(ous)17
b(tags)g(problem.)24 b(Our)17 b(solution)g(is)g(based)g(on)h(the)f(use)
g(of)g(a)g(dependently)2049 5151 y(typed)28 b(multi-stage)g(language.)
50 b(This)27 b(w)o(ork)h(w)o(as)f(inspired)h(by)g(w)o(ork)g(on)2049
5234 y(writing)18 b(dependently)i(typed)f(interpreters)g(in)f(Cayenne)i
([2].)i(T)-6 b(o)18 b(illustrate)2049 5317 y(viability)24
b(of)g(combining)i(dependent)g(types)f(with)e(staging,)j(we)e(ha)o(v)o
(e)h(de-)2049 5400 y(signed)c(and)f(implemented)g(a)g(prototype)h
(language)g(we)e(call)h(Meta-D.)f(W)-6 b(e)p eop
%%Page: 3 3
3 2 bop -150 83 a Fw(use)29 b(this)g(language)h(as)e(a)h(v)o(ehicle)g
(to)g(in)m(v)o(estigate)g(the)f(issues)h(that)g(arise)-150
166 y(when)18 b(taking)g(this)f(approach.)24 b(W)-6 b(e)17
b(b)o(uilt)g(a)g(compiler)h(from)f(an)h(interpreter)m(,)-150
249 y(from)h(be)o(ginning)i(to)f(end)g(in)f(Meta-D.)g(W)-6
b(e)19 b(also)g(report)h(on)g(the)f(issues)h(that)-150
332 y(arise)27 b(in)g(trying)h(to)f(de)n(v)o(elop)i(a)e(dependently)j
(typed)e(programming)h(lan-)-150 415 y(guage)20 b(\(as)f(opposed)i(to)d
(a)h(type)h(theory\).)-67 515 y(Meta-D)f(features)-63
633 y Fy(\017)42 b Fw(Basic)19 b(staging)g(operators)-63
753 y Fy(\017)42 b Fw(Dependent)19 b(types)f(\(with)e(help)i(for)f(a)o
(v)o(oiding)h(redundant)h(typing)f(an-)16 836 y(notations\))-63
957 y Fy(\017)42 b Fw(Dependently)21 b(typed)e(inducti)n(v)o(e)h(f)o
(amilies)f(\(dependent)h(datatypes\))-63 1077 y Fy(\017)42
b Fw(Separation)17 b(between)g(v)n(alues)h(and)f(types)g(\(ensuring)h
(decidable)f(type)16 1160 y(checking\))-63 1281 y Fy(\017)42
b Fw(A)34 b(treatment)h(of)f(equality)h(and)h(representation)f(types)g
(using)g(an)16 1364 y(equality-type-lik)o(e)20 b(mechanism)-150
1445 y(The)k(technical)h(contrib)o(ution)h(of)e(this)g(paper)h(is)g(in)
f(formalizing)h(a)f(multi-)-150 1528 y(stage)c(language,)h(and)f(pro)o
(ving)h(its)e(safety)g(under)i(a)e(sophisticated)i(depen-)-150
1611 y(dent)27 b(type)g(system.)47 b(W)-6 b(e)27 b(do)g(this)g(by)g
(capitalizing)g(on)g(the)g(recent)g(w)o(ork)-150 1694
y(by)c(Shao,)f(Saha,)h(T)m(rifono)o(v)g(and)f(P)o(apasp)o(yrou')l(s)i
(on)e(the)g(TL)f(system)i([44],)-150 1777 y(which)17
b(in)g(turn)h(b)o(uilds)f(on)g(a)g(number)h(of)f(recent)h(w)o(orks)f
(on)h(typed)g(interme-)-150 1860 y(diate)h(languages)h([20)q(,)e(7)q(,)
g(59)q(,)g(43)q(,)g(9)q(,)g(57)q(,)g(44)q(].)-150 2085
y Fu(1.6)99 b(Or)o(ganization)25 b(of)g(this)f(P)o(aper)-67
2185 y Fw(Section)c(2)h(sho)n(ws)g(ho)n(w)g(to)f(tak)o(e)h(our)g(moti)n
(v)n(ating)g(e)o(xample)g(and)g(turn)f(it)-150 2268 y(into)15
b(a)f(tagless)h(staged)g(interpreter)f(in)h(a)f(dependently)i(typed)g
(setting.)21 b(First,)-150 2351 y(we)16 b(present)g(the)g(syntax)g(and)
h(semantics)f(of)g(a)f(simple)h(typed)h(language)g(and)-150
2434 y(sho)n(w)j(ho)n(w)g(these)g(can)f(be)h(implemented)g(in)g(a)f
(direct)g(f)o(ashion)i(in)e(Meta-D.)-150 2517 y(The)i(\002rst)g(part)g
(of)h(this)f(\(writing)g(the)g(unstaged)i(interpreter\))e(is)g(similar)
g(to)-150 2600 y(what)15 b(has)g(been)g(done)h(in)f(Cayenne)g([2)q(],)g
(b)o(ut)f(is)g(simpli\002ed)h(by)g(the)g(presence)-150
2683 y(of)j(dependent)h(datatypes)g(in)f(Meta-D)g(\(see)g(Related)g(W)
-6 b(ork\).)22 b(The)c(k)o(e)o(y)g(ob-)-150 2766 y(serv)n(ation)h(here)
f(is)g(that)g(the)g(interpreter)g(needs)h(to)f(be)g(de\002ned)h(o)o(v)o
(er)f(typing)-150 2849 y(deri)n(v)n(ations)27 b(rather)f(than)h(e)o
(xpressions.)45 b(Dependently)28 b(typed)f(datatypes)-150
2932 y(are)f(needed)i(to)e(represent)g(such)h(typing)g(deri)n(v)n
(ations)g(accurately)-5 b(.)46 b(Ne)o(xt,)-150 3015 y(we)21
b(sho)n(w)g(ho)n(w)h(this)e(interpreter)h(can)h(be)f(easily)g(staged.)
30 b(This)20 b(step)h(is)g(e)o(x-)-150 3099 y(actly)e(the)g(same)g(as)g
(in)g(the)g(untyped)h(and)g(in)f(the)g(Hindle)o(y-Milner)g(setting.)-67
3198 y(In)f(Section)g(3)g(we)g(point)g(out)h(and)f(address)h(some)g
(basic)f(practical)g(prob-)-150 3281 y(lems)29 b(that)g(arise)h(in)f
(the)g(implementation)h(of)g(interpreters)f(in)g(a)h(depen-)-150
3364 y(dently)25 b(typed)h(programming)g(language.)41
b(First,)25 b(we)f(sho)n(w)i(ho)n(w)f(to)f(con-)-150
3447 y(struct)d(the)f(typing)i(judgments)g(that)e(are)h(consumed)i(by)e
(the)g(tagless)g(inter)o(-)-150 3530 y(preter)l(.)40
b(Then,)26 b(we)f(re)n(vie)n(w)g(why)g(it)e(is)i(important)g(to)f(ha)o
(v)o(e)h(a)g(clear)f(sepa-)-150 3613 y(ration)e(between)g(the)g
(computational)i(language)f(and)f(the)g(type)h(language.)-150
3696 y(This)e(moti)n(v)n(ates)i(the)f(need)g(for)g(representation)h
(types,)f(and)h(has)f(an)g(ef)n(fect)-150 3779 y(on)d(the)g(code)h(for)
f(the)g(tagless)g(staged)h(interpreter)l(.)-67 3879 y(Section)25
b(4)h(presents)g(a)f(formalization)h(of)f(a)h(core)g(subset)g(of)f
(Meta-D,)-150 3962 y(and)19 b(a)f(formal)h(proof)g(of)f(its)g(type)h
(safety)-5 b(.)23 b(The)18 b(original)h(w)o(ork)g(on)g(TL)e(used)-150
4045 y(this)28 b(system)h(to)f(type)h(a)f(computational)i(language)g
(that)e(includes)h(basic)-150 4128 y(ef)n(fects,)i(such)f(as)f
(non-termination)h([44)q(].)53 b(In)29 b(this)g(paper)m(,)j(we)c(de)n
(v)o(elop)-150 4211 y(a)i(multi-stage)g(computational)h(language,)i
(and)e(sho)n(w)f(ho)n(w)h(essentially)-150 4294 y(the)24
b(same)g(techniques)h(can)f(be)g(used)g(to)g(v)o(erify)f(its)g
(soundness.)39 b(The)24 b(k)o(e)o(y)-150 4377 y(technical)f
(modi\002cations)h(needed)g(are)e(the)h(addition)h(of)f(le)n(v)o(els)f
(to)h(typing)-150 4460 y(judgments,)d(and)f(addressing)i(e)n(v)n
(aluation)f(under)g(type)f(binders.)-67 4560 y(Section)25
b(5)g(discusses)h(related)f(w)o(ork,)h(and)g(Section)e(6)h(outlines)h
(direc-)-150 4643 y(tions)19 b(for)g(future)g(w)o(ork)g(and)h
(concludes.)-67 4742 y(An)e(e)o(xtended)g(v)o(ersion)g(of)g(the)f
(paper)h(is)f(a)o(v)n(ailable)h(on-line)g(as)f(a)h(techni-)-150
4825 y(cal)h(report)g([36)q(].)-150 5050 y Fu(2)99 b(A)25
b(T)-9 b(agless)25 b(Staged)g(Inter)o(pr)n(eter)-67 5151
y Fw(In)j(this)g(section)g(we)g(sho)n(w)g(ho)n(w)h(the)f(e)o(xample)g
(discussed)h(in)f(the)g(in-)-150 5234 y(troduction)c(can)g(be)f(rede)n
(v)o(eloped)i(in)e(a)g(dependently)j(typed)d(setting.)36
b(W)-6 b(e)-150 5317 y(be)o(gin)21 b(by)g(considering)h(a)e
(de\002nition)h(of)f(the)g(syntax)i(and)f(semantics)g(\(of)f(a)-150
5400 y(simply)f(typed)h(v)o(ersion\))f(of)g(the)g(subject)h(language.)
2049 83 y Fu(2.1)99 b(Subject-Language)28 b(Syntax)d(and)h(Semantics)
2132 183 y Fw(Figure)i(1)f(de\002nes)h(the)g(syntax,)i(type)f(system,)g
(and)g(semantics)f(of)f(an)2049 267 y(e)o(xample)h(subject)g(language)h
(we)e(shall)g(call)g(SL.)f(F)o(or)g(simplicity)h(of)h(the)2049
350 y(de)n(v)o(elopment,)i(we)c(use)h(de)g(Bruijn)f(indices)h(for)f(v)n
(ariables)h(and)g(binders.)2049 433 y(The)21 b(semantics)g(de\002nes)g
(ho)n(w)h(the)f(types)g(of)g(SL)f(are)h(mapped)h(to)e(their)h(in-)2049
516 y(tended)g(meaning.)27 b(F)o(or)19 b(e)o(xample,)i(the)f(meaning)h
(of)f(the)g(type)g Ft(N)k Fw(is)c(the)g(set)2049 599
y(of)g(natural)h(numbers,)h(while)e(the)g(meaning)i(of)e(the)h(arro)n
(w)f(type)f Ft(t)3785 612 y Fp(1)3836 599 y Fy(!)c Ft(t)3947
612 y Fp(2)4000 599 y Fw(is)2049 694 y(the)25 b(function)h(space)g
Fl([)-8 b([)n Ft(t)2683 707 y Fp(2)2715 694 y Fl(])g(])2749
667 y Fm([)i([)o Fk(t)2790 676 y Fi(1)2814 667 y Fm(])g(])2844
694 y Fw(.)42 b(Furthermore,)26 b(we)f(map)h(the)f(meaning)i(of)2049
777 y(type)g(assignments)h Fx(G)p Fw(,)g(into)f(a)g(product)g(of)g(the)
g(sets)g(denoting)h(the)e(\002nite)2049 860 y(number)21
b(of)e(types)h(in)g(the)f(assignment.)26 b(Note)20 b(that)f(the)h
(semantics)g(of)g(pro-)2049 943 y(grams)g(is)g(de\002ned)h(on)f
Ft(typing)h(judgments)p Fw(,)g(and)g(maps)f(to)g(elements)h(of)f(the)
2049 1026 y(meanings)26 b(of)f(their)g(types.)42 b(This)25
b(is)f(the)h(standard)h(w)o(ay)g(of)f(de\002ning)h(the)2049
1109 y(semantics)21 b(of)f(typed)h(languages)h([56)q(,)d(18)q(,)h(39)q
(],)g(and)h(the)f(implementation)2049 1192 y(in)f(the)g(ne)o(xt)g
(section)g(will)f(be)i(a)e(direct)h(codi\002cation)h(of)f(this)f
(de\002nition.)2049 1348 y Fu(2.2)99 b(Inter)o(pr)n(eters)27
b(in)e(Meta-D)2132 1449 y Fw(An)i(interpreter)h(for)f(SL)f(can)i(be)f
(simply)h(an)f(implementation)h(of)g(the)2049 1532 y(de\002nition)20
b(in)g(Figure)f(1.)26 b(W)-6 b(e)19 b(be)o(gin)i(by)f(de\002ning)h(the)
e(datatypes)i(that)f(will)2049 1615 y(be)27 b(used)g(to)g(interpret)g
(the)g(basic)g(types)g(\(and)g(typing)h(en)m(vironments\))g(of)2049
1698 y(SL.)14 b(T)-6 b(o)15 b(de\002ne)h(datatypes)h(Meta-D)e(uses)h
(an)g(alternati)n(v)o(e)g(notation)g(to)f(SML)2049 1781
y(or)26 b(Hask)o(ell)f(datatype)i(de\002nitions.)43 b(F)o(or)25
b(e)o(xample,)j(to)e(de\002ne)g(the)f(set)h(of)2049 1864
y(natural)19 b(numbers,)h(instead)f(of)g(writing)2049
1961 y Fn(datatype)39 b(Nat)f(=)h(Z)f(|)g(S)g(of)h(Nat)2049
2042 y Fw(we)19 b(write)2049 2140 y Fn(inductive)39 b(Nat)f(:)h(*1)76
b(=)38 b(Z)77 b(:)38 b(Nat)g(|)h(S)f(:)g(Nat)g(->)h(Nat)2049
2221 y Fw(The)28 b(inducti)n(v)o(e)h(notation)g(is)f(more)h(con)m(v)o
(enient)h(when)f(we)f(are)g(de\002ning)2049 2304 y(dependent)17
b(datatypes)f(and)g(when)g(we)f(wish)g(to)g(de\002ne)h(not)f(only)h(ne)
n(w)f(types)2049 2387 y(b)o(ut)g(ne)n(w)g(kinds)h(\(meaning)g
(\223types)f(of)g(types\224\).)22 b(No)n(w)16 b(type)f(e)o(xpression)h
(and)2049 2470 y(type)j(assignments)h(are)f(represented)h(as)f(follo)n
(ws:)2049 2567 y Fn(inductive)39 b(Typ)f(:)h(*1)76 b(=)38
b(NatT)115 b(:)38 b(Typ)2811 2650 y(|)g(ArrowT)h(:)f(Typ)h(->)f(Typ)g
(->)h(Typ)2049 2733 y(inductive)g(Exp)f(:)h(*1)76 b(=)38
b(EI)h(:)f(Nat)g(->)h(Exp)2811 2816 y(|)f(EV)h(:)f(Nat)g(->)h(Exp)2811
2899 y(|)f(EL)h(:)f(Typ)g(->)h(Exp)f(->)g(Exp)2811 2982
y(|)g(EA)h(:)f(Exp)g(->)h(Exp)f(->)g(Exp)2049 3065 y(inductive)h(Env)f
(:)h(*1)76 b(=)38 b(EmptyE)77 b(:)38 b(Env)2811 3148
y(|)g(ExtE)h(:)f(Env)h(->)f(Typ)76 b(->)39 b(Env)2049
3229 y Fw(The)21 b Fn(*1)g Fw(in)h(these)f(de\002nitions)h(means)g
(that)f(we)g(are)g(de\002ning)h(a)f(ne)n(w)h(type.)2049
3312 y(T)-6 b(o)15 b(implement)g(the)g(type)g(judgment)h(of)e(SL)g(we)h
(need)g(a)g(dependently)i(typed)2049 3395 y(datatype)27
b Ft(inde)o(xed)f Fw(by)g(three)g(parameters:)38 b(a)25
b(type)h(assignment)h Fn(Env)p Fw(,)g(an)2049 3478 y(e)o(xpression)d
Fn(Exp)p Fw(,)e(and)h(a)g(type)f Fn(Typ)p Fw(.)34 b(W)-6
b(e)22 b(can)h(de\002ne)f(such)h(a)g(datatype)g(as)2049
3561 y(sho)n(wn)f(in)g(Figure)f(2.)2615 3534 y Fp(3)2679
3561 y Fw(Each)g(constructor)h(in)g(this)f(datatype)h(corresponds)2049
3644 y(to)g(one)g(of)g(the)g(rules)f(in)h(the)g(type)g(system)g(for)g
(our)g(object)g(language.)33 b(F)o(or)2049 3727 y(e)o(xample,)21
b(consider)g(the)f(rule)g(for)g(lambda)g(abstraction)h(\(Lam\))e(from)h
(Fig-)2049 3811 y(ure)k(1.)37 b(The)23 b(basic)h(idea)g(is)f(to)g(use)h
(the)g(\223judgments)h(as)e(types)h(principle\224)2049
3894 y([19)q(],)19 b(and)h(so)g(we)g(can)g(vie)n(w)g(the)g(type)g(rule)
g(as)f(a)h(constant)g(combinator)h(on)2049 3977 y(judgments.)27
b(This)20 b(combinator)h(tak)o(es)f(hypothesis)h(judgments)h(\(and)e
(their)2049 4060 y(free)d(v)n(ariables\))g(and)g(returns)g(the)g
(conclusion)h(judgment.)23 b(In)17 b(this)g(case)g(the)2049
4143 y(rule)22 b(requires)g(an)g(en)m(vironment)h Fx(G)p
Fw(,)f(tw)o(o)g(types)e Ft(t)26 b Fw(and)21 b Ft(t)3534
4115 y Fr(0)3554 4143 y Fw(,)h(a)f(body)i Ft(e)f Fw(of)g(the)2049
4226 y(lambda)e(abstraction,)g(a)f(judgment)i(that)e
Fx(G)p Fs(;)6 b Ft(t)22 b Fy(`)16 b Ft(e)h Fw(:)e Ft(t)3428
4199 y Fr(0)3448 4226 y Fw(,)k(and)h(returns)g(a)f(judg-)2049
4309 y(ment)e Fx(G)d Fy(`)g Fx(l)n Ft(t)5 b Fs(:)p Ft(e)14
b Fw(:)e Ft(t)19 b Fy(!)12 b Ft(t)2653 4282 y Fr(0)2673
4309 y Fw(.)22 b(This)16 b(rule)h(is)f(codi\002ed)h(directly)f(by)h
(the)f(follo)n(wing)2049 4392 y(constructor)2049 4489
y Fn(JL)38 b(:)h(\(e1)f(:)g(Env\))h(->)f(\(t1)g(:)h(Typ\))f(->)h(\(t2)f
(:)g(Typ\))h(->)2240 4572 y(\(s2)f(:)g(Exp\))h(->)f(J\(ExtE)h(e1)f(t1,)
h(s2,)f(t2\))g(->)2240 4655 y(J\(e1,)g(EL)g(t1)h(s2,)f(ArrowT)h(t1)f
(t2\).)2049 4736 y Fw(In)30 b(the)h(de\002nition)f(of)h
Fn(J)f Fw(we)g(see)g(dif)n(ferences)h(between)g(the)g(traditional)2049
4819 y(datatype)22 b(de\002nitions)g(and)h(inducti)n(v)o(e)f
(datatypes:)30 b(each)22 b(of)f(the)h(construc-)2049
4902 y(tors)h(can)g(ha)o(v)o(e)g(dependently)i(typed)f(ar)o(guments)f
(and)h(a)e(range)i(type)f Fn(J)g Fw(in-)2049 4985 y(de)o(x)o(ed)18
b(by)g(dif)n(ferent)g(indices.)23 b(It)17 b(is)g(through)i(this)e(v)n
(ariability)h(in)f(the)h(return)p 2049 5063 801 4 v 2150
5124 a Fp(3)2183 5151 y Fw(F)o(or)25 b(practical)f(reasons)i(that)e(we)
h(will)e(discuss)j(in)e(the)h(ne)o(xt)g(section,)2049
5234 y(this)f(datatype)h(is)e(not)h(le)o(gal)g(in)g(Meta-D.)g(W)-6
b(e)23 b(will)g(use)h(it)g(in)g(this)f(section)2049 5317
y(to)f(e)o(xplain)h(the)f(basic)h(ideas)g(before)g(we)f(discuss)h(the)f
(need)h(for)f(so-called)2049 5400 y(representation)e(types.)p
eop
%%Page: 4 4
4 3 bop 489 116 a Ft(t)109 b Fy(2)17 b Ft(T)722 129 y
Fp(1)772 116 y Fl(=)101 b Ft(N)21 b Fy(j)14 b Ft(t)21
b Fy(!)15 b Ft(t)491 199 y Fx(G)83 b Fy(2)17 b Ft(G)740
212 y Fp(1)790 199 y Fl(=)83 b Fy(hi)16 b(j)h Fx(G)p
Fs(;)6 b Ft(t)491 282 y(e)95 b Fy(2)17 b Ft(E)732 295
y Fp(1)781 282 y Fl(=)92 b Ft(n)17 b Fy(j)f Fx(l)n Ft(t)5
b Fs(:)p Ft(e)16 b Fy(j)h Ft(e)f(e)h Fy(j)g Fw(#)p Ft(n)p
198 402 270 3 v 198 471 a Fx(G)g Fy(`)f Ft(n)h Fw(:)g
Ft(N)485 419 y Fw(\(Nat\))p 719 402 330 3 v 719 471 a
Fx(G)p Fs(;)6 b Ft(t)21 b Fy(`)16 b Fw(#0)i(:)c Ft(t)1065
419 y Fw(\(V)-8 b(ar\))322 586 y Fx(G)17 b Fy(`)f Fw(#)p
Ft(n)h Fw(:)e Ft(t)p 198 623 524 3 v 198 691 a Fx(G)p
Fs(;)6 b Ft(t)296 670 y Fr(0)333 691 y Fy(`)16 b Fw(#)p
Fl(\()p Ft(n)10 b Fl(+)g Fw(1)p Fl(\))19 b Fw(:)14 b
Ft(t)739 640 y Fw(\(W)-6 b(eak\))1116 586 y Fx(G)p Fs(;)6
b Ft(t)21 b Fy(`)16 b Ft(e)h Fw(:)e Ft(t)1404 559 y Fr(0)p
1033 623 473 3 v 1033 691 a Fx(G)i Fy(`)f Fx(l)n Ft(t)5
b Fs(:)p Ft(e)17 b Fw(:)d Ft(t)22 b Fy(!)14 b Ft(t)1486
670 y Fr(0)1523 640 y Fw(\(Lam\))198 807 y Fx(G)j Fy(`)f
Ft(e)355 820 y Fp(1)405 807 y Fw(:)f Ft(t)21 b Fy(!)15
b Ft(t)599 780 y Fr(0)693 807 y Fx(G)i Fy(`)f Ft(e)850
820 y Fp(2)900 807 y Fw(:)f Ft(t)p 198 844 764 3 v 394
912 a Fx(G)i Fy(`)f Ft(e)551 925 y Fp(1)601 912 y Ft(e)634
925 y Fp(2)684 912 y Fw(:)f Ft(t)746 891 y Fr(0)978 861
y Fw(\(App\))2435 127 y Fl([)-8 b([)p Ft(N)t Fl(])g(])240
b(=)83 b Fh(N)2435 223 y Fl([)-8 b([)n Ft(t)2488 236
y Fp(1)2537 223 y Fy(!)15 b Ft(t)2648 236 y Fp(2)2681
223 y Fl(])-8 b(])82 b(=)h([)-8 b([)n Ft(t)2991 236 y
Fp(2)3023 223 y Fl(])g(])3057 196 y Fm([)i([)o Fk(t)3098
205 y Fi(1)3121 196 y Fm(])g(])2435 306 y Fl([)e([)p
Fy(hi)p Fl(])g(])236 b(=)83 b Fg(1)2435 389 y Fl([)-8
b([)p Fx(G)p Fs(;)6 b Ft(t)f Fl(])-8 b(])196 b(=)83 b([)-8
b([)p Fx(G)p Fl(])g(])10 b Fy(\002)g Fl([)-8 b([)n Ft(t)5
b Fl(])-8 b(])1909 472 y([)g([)p Fx(G)15 b Fy(`)i Ft(e)f
Fw(:)f Ft(t)5 b Fl(])-8 b(])412 b Fw(:)120 b Fl([)-8
b([)p Fx(G)p Fl(])g(])15 b Fy(!)h Fl([)-8 b([)n Ft(t)5
b Fl(])-8 b(])1909 555 y([)g([)p Fx(G)15 b Fy(`)i Ft(n)g
Fw(:)f Ft(N)t Fl(])-8 b(])p Fx(r)337 b Fl(=)83 b Ft(n)17
b Fy(2)f Fh(N)1909 638 y Fl([)-8 b([)p Fx(G)p Fs(;)6
b Ft(t)20 b Fy(`)d Fw(#0)g(:)d Ft(t)5 b Fl(])-8 b(])p
Fx(r)277 b Fl(=)83 b Fx(p)2805 651 y Fp(2)2838 638 y
Fl(\()p Fx(r)p Fl(\))1909 722 y([)-8 b([)p Fx(G)p Fs(;)6
b Ft(t)2041 695 y Fr(0)2076 722 y Fy(`)17 b Fw(#)p Fl(\()p
Ft(n)10 b Fl(+)g Fw(1)p Fl(\))18 b Fw(:)d Ft(t)5 b Fl(])-8
b(])p Fx(r)82 b Fl(=)h([)-8 b([)p Fx(G)16 b Fy(`)g Fw(#)p
Ft(n)h Fw(:)d Ft(t)5 b Fl(])-8 b(]\()p Fx(p)3177 735
y Fp(1)3210 722 y Fx(r)p Fl(\))1909 805 y([)g([)p Fx(G)15
b Fy(`)i Fx(l)n Ft(t)5 b Fs(:)p Ft(e)16 b Fw(:)e Ft(t)22
b Fy(!)14 b Ft(t)2394 778 y Fr(0)2414 805 y Fl(])-8 b(])p
Fx(r)134 b Fl(=)83 b Ft(x)17 b Fy(7!)f Fl(\([)-8 b([)p
Fx(G)p Fs(;)6 b Ft(t)21 b Fy(`)16 b Ft(e)h Fw(:)f Fx(t)3264
778 y Fr(0)3284 805 y Fl(])-8 b(])16 b(\()p Fx(r)p Fs(;)8
b Ft(x)p Fl(\)\))1909 889 y([)-8 b([)p Fx(G)15 b Fy(`)i
Ft(e)2099 902 y Fp(1)2149 889 y Ft(e)2182 902 y Fp(2)2232
889 y Fw(:)d Ft(t)5 b Fl(])-8 b(])p Fx(r)255 b Fl(=)83
b([)-8 b([)p Fx(G)16 b Fy(`)g Ft(e)2954 902 y Fp(1)3004
889 y Fw(:)e Ft(t)3065 862 y Fr(0)3102 889 y Fy(!)g Ft(t)5
b Fl(])-8 b(])p Fx(r)p Fl(\([)g([)p Fx(G)15 b Fy(`)h
Ft(e)3510 902 y Fp(2)3560 889 y Fw(:)f Ft(t)3622 862
y Fr(0)3642 889 y Fl(])-8 b(])p Fx(r)p Fl(\))1539 1035
y Ff(Figur)o(e)18 b(1.)23 b(Semantics)18 b(of)h(SL)-150
1198 y Fn(inductive)39 b(J)f(:)g(\(Env,)h(Exp,)g(Typ\))f(->)h(*1)76
b(=)155 1281 y(JN)38 b(:)g(\(e1:Env\))h(->)g(\(n)f(:Nat\))h(->)76
b(J\(e1,EI)39 b(n,NatT\))79 1364 y(|)f(JV)g(:)g(\(e1:Env\))h(->)g
(\(t1:Typ\))g(->)f(J\(ExtE)h(e1)f(t1,EV)h(Z,t1\))79 1447
y(|)f(JW)g(:)g(\(e1:Env\))h(->)g(\(t1:Typ\))g(->)f(\(t2:Typ\))h(->)f
(\(i:Nat\))h(->)f(J\(e1,EV)h(i,t1\))g(->)f(J\(ExtE)h(e1)f(t2,EV)h(\(S)f
(i\),)h(t1\))79 1530 y(|)f(JL)g(:)g(\(e1:Env\))h(->)g(\(t1:Typ\))g(->)f
(\(t2:Typ\))h(->)f(\(s2:Exp\))h(->)g(J\(ExtE)f(e1)h(t1,s2,t2\))g(->)f
(J\(e1,EL)h(t1)f(s2,)h(ArrowT)f(t1)h(t2\))79 1613 y(|)f(JA)g(:)g
(\(e:Env\))h(->)g(\(s1:Exp\))g(->)f(\(s2:Exp\))h(->)f(\(t1:Typ\))h(->)f
(\(t2)h(:)f(Typ\))h(->)f(\(J\(e,s1,ArrowT)i(t1)e(t2\)\))76
b(->)345 1696 y(\(J\(e,s2,t1\)\))40 b(->)e(J\(e,)h(EA)f(s1)g(s2,)h
(t2\))938 1777 y Ff(Figur)o(e)18 b(2.)24 b(The)18 b(typing)g(judgment)g
Fe(J)g Ff(\(without)g(r)o(epr)o(esentation)g(types\))-150
2041 y Fw(type)h(of)g(the)g(constructors)h(that)f(dependent)h
(datatypes)g(can)g(pro)o(vide)f(more)-150 2124 y(information)h(about)f
(their)g(v)n(alues.)-150 2263 y Fd(2.2.1)90 b(Interpr)m(eter)o(s)20
b(of)j(T)-7 b(ypes)21 b(and)h(J)m(udgments)-67 2363 y
Fw(After)31 b(de\002ning)i(judgments,)j(we)c(are)g(ready)h(to)f
(implement)g(the)g(in-)-150 2446 y(terpretations.)67
b(Note,)36 b(ho)n(we)n(v)o(er)m(,)i(that)33 b(the)h(type)f(of)h(the)f
(result)g(of)h(the)-150 2529 y(interpretation)d(of)f(judgments,)k
(depends)e(on)f(the)f(interpretation)h(of)f(SL)-150 2612
y(types.)46 b(This)26 b(dependenc)o(y)i(is)e(captured)i(in)e(the)g
(interpretation)h(function)-150 2695 y Fn(typEval)p Fw(.)41
b(Figure)25 b(3)g(presents)g(the)g(implementation)h(of)f(the)g
(interpreta-)-150 2778 y(tion)18 b(of)f(types)h Fn(typEval)p
Fw(;)g(the)g(mapping)h(of)e(type)h(assignments)h(into)f(Meta-)-150
2861 y(D)h(types)g Fn(envEval)p Fw(;)g(and)h(the)f(interpretation)g(of)
g(judgments)h Fn(eval)p Fw(.)-67 2961 y(The)k(function)h
Fn(eval)f Fw(is)g(de\002ned)h(by)g Fn(case)f Fw(analysis)h(on)f(typing)
h(judg-)-150 3044 y(ments.)32 b(Computationally)-5 b(,)23
b(this)e(function)i(is)e(not)h(signi\002cantly)g(dif)n(ferent)-150
3127 y(from)k(the)h(one)g(presented)h(in)e(Section)g(1.2.)46
b(Dif)n(ferences)27 b(include)g(addi-)-150 3210 y(tional)e(typing)i
(annotations,)h(and)e(the)f(case)h(analysis)g(o)o(v)o(er)g(typing)g
(judg-)-150 3293 y(ments.)47 b(Most)27 b(importantly)-5
b(,)29 b(writing)d(it)h(does)g(not)g(require)g(that)g(we)f(use)-150
3376 y(tags)17 b(on)h(the)f(result)f(v)n(alues,)i(because)h(the)e(type)
g(system)g(allo)n(ws)g(us)g(to)g(spec-)-150 3459 y(ify)22
b(that)g(the)g(return)g(type)g(of)g(this)g(function)h(is)e
Fn(typEval)39 b(t)p Fw(.)32 b(T)-6 b(ags)22 b(are)g(no)-150
3542 y(longer)28 b(needed)h(to)f(help)g(us)g(discriminate)g(what)f
(type)h(of)g(v)n(alue)g(we)g(are)-150 3625 y(getting)19
b(back)h(at)f(runtime:)k(the)c(type)g(system)h(no)n(w)f(tells)f(us,)h
Ft(statically)p Fw(.)-150 3772 y Fu(2.3)99 b(Staged)26
b(Inter)o(pr)n(eters)h(in)e(Meta-D)-67 3872 y Fw(Figure)32
b(4)f(sho)n(ws)i(a)e(staged)h(v)o(ersion)h(of)e Fn(eval)p
Fw(.)62 b(As)31 b(with)g(Hindle)o(y-)-150 3955 y(Milner)23
b(types,)i(staging)e(is)g(not)h(complicated)g(by)f(dependent)i(types.)
37 b(The)-150 4038 y(staged)21 b(interpreter)g Fn(evalS)p
Fw(,)g(returns)g(a)g(v)n(alue)g(of)g(type)h Fn(\(code)38
b(\(typEval)-150 4121 y(t\)\))p Fw(.)e(Note)23 b(that)g(the)g(type)g
(of)g(v)n(alue)h(assignments)g(is)f(also)g(changed)i(\(see)-150
4204 y Fn(envEvalS)30 b Fw(in)f(Figure)g(4\):)43 b(Rather)29
b(than)h(carrying)g(runtime)f(v)n(alues)h(for)-150 4288
y(SL,)19 b(it)i(carries)f(pieces)i(of)e(code)i(representing)g(the)f(v)n
(alues)h(in)e(the)h(v)n(ariable)-150 4371 y(assignment.)i(Ex)o(ecuting)
17 b(this)e(program)i(produces)h(the)e(tagless)g(code)h(frag-)-150
4454 y(ments)i(that)g(we)g(are)g(interested)g(in.)-67
4553 y(Ev)o(en)26 b(though)i(the)e(e)n(v)n(al)g(function)h(ne)n(v)o(er)
g(performs)g(tagging)g(and)f(un-)-150 4636 y(tagging,)20
b(the)f(interpretati)n(v)o(e)h(o)o(v)o(erhead)h(from)e(tra)o(v)o
(ersing)g(its)g(input)h(is)f(still)-150 4719 y(considerable.)52
b(Judgements)30 b(must)f(be)f(deconstructed)i(by)f(e)n(v)n(al)g(at)f
(run-)-150 4802 y(time.)22 b(This)c(may)g(require)g(e)n(v)o(en)h(more)f
(w)o(ork)h(than)f(deconstructing)i(tagged)-150 4885 y(v)n(alues.)30
b(W)m(ith)20 b(staging,)h(all)g(these)g(o)o(v)o(erheads)h(are)f
(performed)h(in)f(the)g(\002rst)-150 4968 y(stage,)16
b(and)f(an)g(o)o(v)o(erhead-free)h(term)f(is)f(generated)i(for)f(e)o(x)
o(ecution)h(in)e(a)h(later)-150 5051 y(stage.)-67 5151
y(Staging)21 b(violations)h(are)f(pre)n(v)o(ented)h(in)f(a)g(standard)h
(w)o(ay)f(by)h(Meta-D')l(s)-150 5234 y(type)f(system)g(\(See)f
(technical)h(report)f([36)q(]\).)27 b(The)20 b(staging)i(constructs)f
(are)-150 5317 y(those)29 b(of)g(Da)o(vies)f([10)q(])g(with)g(the)h
(addition)g(of)g(cross-stage)g(persistence)-150 5400
y([55)q(].)34 b(W)-6 b(e)23 b(refer)g(the)g(reader)g(to)g(these)g
(references)h(for)e(further)h(details)g(on)2049 2041
y(the)g(nature)h(of)f(staging)h(violations.)37 b(Adding)24
b(a)f(run)h(construct)g(along)g(the)2049 2124 y(lines)19
b(of)g(pre)n(vious)h(w)o(orks)f([51)q(,)f(30)q(])h(w)o(as)g(not)g
(considered)h(here.)2132 2224 y(No)n(w)32 b(we)h(turn)f(to)g
(addressing)i(some)f(practical)f(questions)i(that)e(are)2049
2307 y(unique)27 b(to)e(the)h(dependent)i(typing)e(setting,)h
(including)g(ho)n(w)f(the)g(abo)o(v)o(e-)2049 2390 y(mentioned)20
b(judgements)g(are)f(constructed.)2049 2524 y Fu(3)99
b(Practical)25 b(Concer)o(ns)2132 2625 y Fw(Building)f(type)h
(judgments)g(amounts)g(to)f(implementing)h(either)e(type-)2049
2708 y(checking)32 b(or)e(type)g(inference)h(for)f(the)g(language)i(we)
e(are)g(interpreting.)2049 2791 y(Another)c(practical)f(concern)h(is)e
(that)h(types)h(that)f(depend)h(on)g(v)n(alues)f(can)2049
2874 y(lead)20 b(to)f(either)g(undecidable)i(or)e(unsound)j(type)d
(checking.)26 b(This)19 b(happens)2049 2957 y(when)26
b(v)n(alues)g(contain)g(di)n(v)o(er)o(ging)g(or)g(side-ef)n(fecting)g
(computations.)44 b(In)2049 3040 y(this)18 b(section)g(we)g(discuss)g
(ho)n(w)g(both)h(of)f(these)g(concerns)h(are)f(addressed)h(in)2049
3123 y(the)g(conte)o(xt)h(of)e(Meta-D.)2049 3257 y Fu(3.1)99
b(Constructing)26 b(T)-7 b(yping)25 b(J)o(udgments)2132
3357 y Fw(Requiring)16 b(the)f(user)g(of)h(a)f(DSL)f(to)h(supply)h(a)f
(typing)h(judgment)g(for)f(each)2049 3440 y(program)20
b(to)f(be)h(interpreted)f(is)g(not)h(lik)o(ely)f(to)g(be)h(acceptable)g
(\(although)g(it)2049 3523 y(can)27 b(depend)g(on)g(the)f(situation\).)
45 b(The)26 b(user)h(should)g(be)g(able)f(to)g(use)h(the)2049
3606 y(implementation)20 b(by)f(supplying)i(only)f(the)f(plain)g(te)o
(xt)g(of)g(the)g(subject)h(pro-)2049 3689 y(gram.)i(Therefore,)16
b(the)f(implementation)g(needs)h(to)f(include)g(at)g(least)g(a)f(type)
2049 3772 y(checking)25 b(function.)38 b(This)23 b(function)h(tak)o(es)
g(a)g(representation)g(of)g(a)f(type-)2049 3855 y(annotated)h(program)f
(and)g(produces)i(the)d(appropriate)i(typing)f(judgment,)2049
3938 y(if)16 b(it)g(e)o(xists.)22 b(W)-6 b(e)16 b(might)h(e)n(v)o(en)g
(w)o(ant)g(to)f(implement)h(type)g(inference,)g(which)2049
4022 y(does)22 b(not)f(require)g(type)g(annotations)h(on)g(the)e
(input.)30 b(Figure)20 b(4)h(presents)h(a)2049 4105 y(function)e
Fn(typeCheck)p Fw(.)k(This)19 b(function)h(is)e(useful)i(for)f
(illustrating)f(a)h(num-)2049 4188 y(ber)g(of)g(features)g(of)g
(Meta-D:)2136 4306 y Fy(\017)42 b Fw(The)30 b(type)h(of)f(the)g(result)
2899 4279 y Fp(4)2962 4306 y Fw(of)g Fn(typeCheck)h Fw(is)f(a)g
(dependent)i(sum,)2215 4389 y(written)27 b Fn([t)39 b(:)76
b(Typ])38 b(J\(e,s,t\))p Fw(.)51 b(This)27 b(means)i(that)e(the)h
(result)2215 4472 y(of)21 b Fn(typeCheck)h Fw(consists)g(of)f(an)h(SL)e
(type,)i(and)g(a)g(typing)g(judgment)2215 4555 y(that)28
b(pro)o(v)o(es)h(that)g(the)f(ar)o(gument)h(e)o(xpression)h(has)e(that)
h(particular)2215 4638 y(type)19 b(under)h(a)f(gi)n(v)o(en)h(type)f
(assignment.)2136 4758 y Fy(\017)42 b Fw(Since)16 b(judgments)i(are)e
(b)o(uilt)g(from)g(sub-judgments,)i(a)f Fn(case)f Fw(\(strong)2215
4841 y(dependent)27 b(sum)d(elimination\))h(construct)g(is)g(need)g(to)
g(deconstruct)p 2049 4897 801 4 v 2150 4958 a Fp(4)2209
4985 y Fw(In)h(a)g(pure)g(\(that)g(is)g(with)f(no)i(computational)g(ef)
n(fects)f(whatsoe)n(v)o(er\))2049 5068 y(setting)g(the)h(result)f(of)h
Fn(typeCheck)g Fw(should)g(be)g Fn(option)39 b(\([t)f(:)77
b(Typ])2049 5151 y(\(J)38 b(\(e,s,t\)\)\))p Fw(,)31 b(since)d(a)f
(particular)h(term)g(gi)n(v)o(en)g(to)g Fn(typeCheck)g
Fw(may)2049 5234 y(not)22 b(be)g(well-typed.)32 b(In)21
b(the)h(function)g(gi)n(v)o(en)h(in)f(this)f(paper)m(,)i(we)e(omit)h
(the)2049 5317 y Fn(option)p Fw(,)e(to)f(sa)o(v)o(e)h(on)g(space)g
(\(and)g(rely)f(on)h(incomplete)h(case)e(e)o(xpressions)2049
5400 y(instead\).)p eop
%%Page: 5 5
5 4 bop -150 379 a Fn(fun)38 b(typEval)h(\(t)g(:)f(Typ\))g(:)h(*1)f(=)g
(case)h(t)f(of)g(NatT)h(=>)f(Nat)g(|)h(ArrowT)f(t1)h(t1)f(=>)g
(\(typEval)h(t1\))g(->)f(\(typEval)h(t2\))-150 545 y(fun)f(envEval)h
(\(e)g(:)f(Env\))g(:)h(*1)f(=)g(case)h(e)f(of)g(EmptyE)77
b(=>)38 b(unit)h(|)76 b(ExtE)39 b(e2)f(t)g(=>)h(\(envEval)g(e2,)f
(typEval)h(t\))-150 711 y(fun)f(eval)h(\(e)f(:)g(Env\))h(\(rho:)g
(envEval\(e\)\))g(\(s)f(:)g(Exp\))h(\(t)f(:)h(Typ\))f(\(j)g(:)h
(J\(e,s,t\)\))g(:)f(\(typEval)h(t\)=)-74 794 y(case)g(j)f(of)2
877 y(JN)77 b(e1)38 b(n1)77 b(=>)38 b(n1)-74 960 y(|)g(JV)77
b(e1)38 b(t1)77 b(=>)38 b(#2\(rho\))-74 1044 y(|)g(JW)77
b(e1)38 b(t1)g(t2)h(i)f(j1)g(=>)h(eval)f(e1)h(\(#1\(rho\)\))g(\(EV)f
(i\))g(t1)h(j1)-74 1127 y(|)f(JL)h(ee1)f(et1)h(et2)f(es2)g(ej1)h(=>)f
(fn)h(v)f(:)g(\(typEval)h(et1\))f(=>)h(\(eval)f(\(ExtE)h(ee1)f(et1\))h
(\(rho,v\))g(es2)f(et2)h(ej1)f(\))-74 1210 y(|)g(JA)h(e)f(s1)g(s2)h(t1)
f(t2)g(j1)h(j2)f(=>)g(\(eval)h(e)f(rho)g(s1)h(\(ArrowT)g(t1)f(t2\))g
(j1\))h(\(eval)f(e)h(rho)f(s2)g(t1)h(j2\))707 1291 y
Ff(Figur)o(e)18 b(3.)23 b(Dependently)17 b(typed)h(tagless)i(inter)o
(pr)o(eter)e(\(without)g(r)o(epr)o(esentation)f(types\))-150
2075 y Fn(fun)38 b(envEvalS)h(\(e)g(:)f(Env\))g(:)h(*1)f(=)g(case)h(e)f
(of)g(EmptyE)h(=>)f(unit)h(|)f(ExtE)h(e2)f(t)g(=>)-36
2158 y(\(envEvalS)h(e2,)g(code)f(\(typEval)h(t\)\))-150
2324 y(fun)f(evalS)h(\(e)f(:)h(Env\))f(\(rho:)h(envEvalS)g(e\))f(\(s)g
(:)h(Exp\))f(\(t)g(:)h(Typ\))f(\(j)h(:)f(J\(e,s,t\)\))h(:)f(\(code)h
(\(typEval)g(t\)\))f(=)-74 2407 y(case)h(j)f(of)2 2490
y(JN)77 b(e1)38 b(n1)77 b(=>)38 b(.<n1>.)-74 2573 y(|)g(JV)77
b(e1)38 b(t1)77 b(=>)38 b(#2\(rho\))-74 2656 y(|)g(JW)77
b(e1)38 b(t1)g(t2)h(i)f(j1)g(=>)h(evalS)f(e1)h(\(#1\(rho\)\))g(\(EV)f
(i\))g(t1)h(j1)-74 2739 y(|)f(JL)h(ee1)f(et1)h(et2)f(es2)g(ej1)h(=>)f
(.<fn)h(v:\(typEval)g(et1\))f(=>)h(\(.\230\(evalS)g(\(ExtE)f(ee1)h
(et1\))f(\(rho,.<v>.\))i(es2)e(et2)h(ej1\)\)>.)-74 2822
y(|)f(JA)h(e)f(s1)g(s2)h(t1)f(t2)g(j1)h(j2)f(=>)g(.<\(.\230\(evalS)h(e)
g(rho)f(s1)g(\(ArrowT)h(t1)g(t2\))f(j1\)\))h(\(.\230\(evalS)g(e)f(rho)g
(s2)h(t1)f(j2\)\)>.)-150 2988 y(fun)g(typeCheck)h(\(e)g(:)f(Env\))h
(\(s)f(:)g(Exp\))77 b(:)38 b(\([t)g(:)h(Typ])f(J\(e,s,t\)\))h(=)-112
3071 y(case)g(s)f(of)-36 3154 y(EI)h(n)f(=>)g([t)g(=)h(NatT])f(\(JN)h
(e)f(n\))-112 3237 y(|)g(EV)h(nn)f(=>)g(\(case)h(nn)f(of)77
b(Z)38 b(=>)g(\(case)h(e)f(of)g(ExtE)h(ee)f(t2)h(=>)f([t)g(=)g(t2]\(JV)
h(ee)f(t2\)\))726 3320 y(|)h(S)f(n)g(=>)g(\(case)h(e)f(of)h(ExtE)f(e2)g
(t2)h(=>)1108 3403 y(\(\(fn)f(x)g(:)g(\([rt:Typ]J\(e2,EV)i(n,rt\)\))f
(=>)1336 3486 y(case)77 b(x)38 b(of)g([rx)h(:)f(Typ]j2)h(=>)f(\([t)g(=)
h(rx]\(JW)f(e2)77 b(rx)38 b(t2)h(n)f(j2\)\))76 b(\))1108
3569 y(\(typeCheck)39 b(e2)f(\(EV)g(n\)\)\)\)\))-112
3652 y(|)g(EL)h(targ)f(s2)g(=>)-74 3735 y(\(\(fn)h(x)f(:)g(\([rt)h(:)f
(Typ]\(J\(ExtE)h(e)f(targ,s2,rt\)\)\))i(=>)41 3818 y(case)e(x)g(of)h
([rt)f(:)g(Typ])h(j2)f(=>)g([t)h(=)f(ArrowT)h(targ)f(rt])h(\(JL)f(e)g
(targ)h(rt)f(s2)g(j2\)\))-74 3901 y(\(typeCheck)h(\(ExtE)g(e)f(targ\))h
(s2\)\))-112 3984 y(|)f(EA)h(s1)f(s2)g(=>)-74 4067 y(\(\(fn)h(x1)f(:)g
([rt1)h(:)f(Typ]\(J\(e,s1,rt1\)\))i(=>)e(\(fn)h(x2)f(:)g([rt2)h(:)f
(Typ]\(J\(e,s2,rt2\)\))i(=>)-36 4150 y(case)f(x1)f(of)g([rt1)h(:)f
(Typ]j1)h(=>)f(case)h(x2)f(of)g([rt2)h(:)f(Typ]j2)h(=>)41
4233 y(\(case)f(rt1)h(of)f(ArrowT)h(tdom)f(tcod)h(=>)155
4316 y([t)f(=)g(tcod])h(\(JA)f(e)h(s1)f(s2)g(tdom)h(tcod)f(j1)726
4399 y(\(cast)h([assert)g(rt2=tdom,J\(e,s,tdom\),)h(j2]\)\))f
(end\)\)\))-74 4482 y(\(typeCheck)g(e)g(s1\))f(\(typeCheck)h(e)f
(s2\)\))-150 4648 y(fun)g(typeAndRunNat)i(\(s)e(:)g(Exp\))h(:)f(Nat)h
(=)-150 4731 y(\(\(fn)g(x)f(:)g(\([t1)g(:)h(Typ])f(J\(EmptyE,s,t1\)\))i
(=>)e(case)h(x)f(of)g([t1)h(:)f(Typ])h(j)f(=>)269 4815
y(\(case)h(t1)f(of)g(NatT)h(=>)f(eval)h(EmptyE)g(\(\))f(s)g(NatT)h(j)
650 4898 y(|)f(ArrowT)h(t2)g(t3)f(=>)g(Z)g(\)\))-150
4981 y(\(typeCheck)h(EmptyE)g(s\)\))417 5061 y Ff(Figur)o(e)18
b(4.)23 b(Staged)18 b(tagless)i(inter)o(pr)o(eter)e(and)g(the)h
(function)e Fe(typeCheck)g Ff(\(without)h(r)o(epr)o(esentation)f
(types\))p eop
%%Page: 6 6
6 5 bop 16 83 a Fw(the)19 b(results)g(of)g(recursi)n(v)o(e)g(calls)g
(to)g Fn(typeCheck)p Fw(.)-63 203 y Fy(\017)42 b Fw(The)34
b(case)f(for)h(constructing)g(application)h(judgments)f(illustrates)16
286 y(an)g(interesting)g(point.)68 b(Building)34 b(a)g(judgment)h(for)e
(the)h(e)o(xpres-)16 369 y(sion)23 b Fn(\(EA)38 b(s1)h(s2\))22
b Fw(in)m(v)o(olv)o(es)h(\002rst)f(computing)i(the)e(judgments)i(for)16
452 y(the)37 b(sub-terms)h Fn(s1)f Fw(and)h Fn(s2)p Fw(.)77
b(These)37 b(judgments)i(assign)e(types)16 535 y Fn(\(ArrowT)i(tdom)f
(tcod\))e Fw(and)h Fn(rt2)f Fw(to)f(their)h(respecti)n(v)o(e)g(e)o
(xpres-)16 619 y(sions.)52 b(Ho)n(we)n(v)o(er)m(,)31
b(by)e(de\002nition)f(of)h(the)f(inducti)n(v)o(e)h(f)o(amily)g
Fn(J)p Fw(,)f(in)16 702 y(order)22 b(to)g(b)o(uild)g(the)g(lar)o(ger)f
(application)i(judgment,)g Fn(tdom)f Fw(and)h Fn(rt2)16
785 y Fw(must)33 b(be)h(the)f(same)h(SL)e(type)i(\(i.e.,)i(their)d
Fn(Typ)g Fw(v)n(alues)h(must)f(be)16 868 y(equal\).)16
988 y(W)-6 b(e)25 b(introduce)h(tw)o(o)f(language)i(constructs)f(to)f
(Meta-D)g(to)g(e)o(xpress)16 1071 y(this)15 b(sort)h(of)f(constraints)h
(between)g(v)n(alues.)23 b(First,)15 b(the)g(e)o(xpression)i(of)16
1154 y(the)25 b(form)f Fn(assert)39 b(e1)f(=)g(e2)25
b Fw(introduces)g(an)g Ft(equality)g(judgment)p Fw(,)16
1237 y Fn(ID)38 b(e1)h(e2)19 b Fw(between)g(v)n(alues)h(of)f(equality)g
(types.)1331 1210 y Fp(5)16 1357 y Fw(An)g(elimination)g(construct)16
1459 y Fn(cast[e1,T,e2])16 1561 y Fw(is)36 b(used)i(to)f(cast)f(the)h
(e)o(xpression)h Fn(e2)f Fw(from)g(some)g(type)g Fn(T[v1])16
1644 y Fw(to)h Fn(T[v2])p Fw(,)43 b(where)38 b Fn(e1)g
Fw(is)g(an)g(equality)h(judgment)g(of)f(the)g(type)16
1727 y Fn(ID)g(v1)h(v2)p Fw(.)k(The)26 b(type)g(check)o(er)h(is)f(allo)
n(wed)g(to)g(use)g(the)g(Leibniz-)16 1810 y(style)19
b(equality)g(to)f(pro)o(v)o(e)i(the)e(cast)h(correct,)f(since)h
Fn(e1)g Fw(is)f(an)h(equality)16 1893 y(judgment)h(stating)f(that)g
Fn(v1)g Fw(and)g Fn(v2)g Fw(are)g(equal.)16 2013 y(Operationally)-5
b(,)16 b(the)f(e)o(xpression)g Fn(assert)39 b(e1=e2)15
b Fw(e)n(v)n(aluates)h(its)e(tw)o(o)16 2096 y(sube)o(xpressions)k(and)e
(compares)h(them)f(for)g(equality)-5 b(.)23 b(If)15 b(the)o(y)h(are)g
(in-)16 2179 y(deed)j(equal,)g(computation)h(proceeds)g(If,)d(ho)n(we)n
(v)o(er)m(,)j(the)e(tw)o(o)h(v)n(alues)16 2262 y(are)f(not)f(equal,)h
(the)g(program)g(raises)g(an)f(e)o(xception)i(and)f(terminates.)16
2345 y(The)j Fn(cast)h Fw(construct)g(mak)o(es)g(sure)f(that)g(its)g
(equality)h(judgment)g(in-)16 2428 y(troduced)g(by)f(assert)g(is)f(e)n
(v)n(aluated)i(at)f(runtime,)g(and)g(if)f(the)h(equality)16
2511 y(check)g(succeeds,)g(simply)g(proceeds)g(to)f(e)n(v)n(aluate)h
(its)e(ar)o(gument)i(e)o(x-)16 2594 y(pression.)16 2715
y(An)28 b(alternati)n(v)o(e)h(to)f(using)g Fn(assert/cast)i
Fw(is)d(to)h(include)h(equality)16 2798 y(judgments)j(between)f(types)h
(as)f(part)f(of)h(typing)h(judgments,)i(and)16 2881 y(b)o(uild)27
b(equality)h(proofs)g(as)f(a)g(part)g(of)g(the)g Fn(typeCheck)h
Fw(function.)1817 2854 y Fp(6)16 2964 y Fw(This)20 b(approach,)i(while)
e(possible,)g(pro)o(v)o(es)h(to)f(be)h(v)o(erbose,)g(and)g(will)16
3047 y(be)30 b(omitted)f(in)g(this)h(paper)l(.)55 b(The)29
b Fn(assert/cast)p Fw(,)j(ho)n(we)n(v)o(er)m(,)h(can)16
3130 y(serv)o(e)23 b(as)h(a)f(con)m(v)o(enient)h(programming)h
(shortcut)f(and)f(relie)n(v)o(es)h(the)16 3213 y(user)c(from)g(the)g
(ef)n(fort)g(formalizing)g(equality)g(at)g(the)g(type)g(le)n(v)o(el)g
(and)16 3296 y(manipulating)g(equality)g(types.)-150
3450 y Fu(3.2)99 b(Repr)n(esentation)27 b(T)-7 b(ypes)-67
3551 y Fw(Combining)25 b(ef)n(fects)f(with)g(dependent)i(types)f
(requires)f(care.)39 b(F)o(or)24 b(e)o(x-)-150 3634 y(ample,)h(the)f
Fn(typeCheck)h Fw(function)f(is)g(partial,)g(because)h(there)f(are)g
(man)o(y)-150 3717 y(input)38 b(terms)g(which)g(are)g(just)f(not)h
(well)g(typed)g(in)g(SL.)e(Such)i(inputs)-150 3800 y(to)28
b Fn(typeCheck)g Fw(w)o(ould)h(cause)f(runtime)h(pattern)f(match)g(f)o
(ailures,)i(or)d(an)-150 3883 y(equality)h(assertion)h(e)o(xception.)51
b(W)-6 b(e)27 b(w)o(ould)i(lik)o(e)f(Meta-D)g(to)g(continue)-150
3966 y(to)i(ha)o(v)o(e)f(side-ef)n(fects)h(such)h(as)e(non-termination)
i(and)g(e)o(xceptions.)56 b(At)-150 4049 y(the)19 b(same)g(time,)g
(dependently)i(typed)e(languages)i(perform)e(computations)-150
4132 y(during)28 b(type)g(checking)h(\(to)e(determine)h(the)g(equality)
g(of)f(types\).)49 b(If)27 b(we)-150 4215 y(allo)n(w)21
b(ef)n(fectful)g(computations)h(to)f(leak)g(into)g(the)h(computations)g
(that)f(are)-150 4298 y(done)k(during)g(type)f(checking,)i(then)f(we)e
(risk)h(non-termination,)i(or)e(e)n(v)o(en)-150 4381
y(unsoundness,)c(at)d(type-checking)i(time.)j(This)17
b(goal)g(is)g(often)h(described)g(as)-150 4464 y(\223preserving)25
b(the)f(phase)g(distinction\224)g(between)h(compile)f(time)f(and)i
(run-)-150 4547 y(time)19 b([5].)-67 4647 y(The)d(basic)h(approach)h
(to)e(dealing)h(with)f(this)g(problem)h(is)f(to)g(allo)n(w)g(types)-150
4730 y(to)f(only)i(depend)g(on)f(other)f(types,)i(and)f(not)g(v)n
(alues.)22 b(Disallo)n(wing)16 b(an)o(y)g(kind)-150 4813
y(of)27 b(such)h(dependenc)o(y)-5 b(,)31 b(ho)n(we)n(v)o(er)m(,)f(w)o
(ould)e(not)f(allo)n(w)g(us)g(to)g(e)o(xpress)g(our)-150
4896 y(type)c(checking)i(function,)f(as)f(it)f(produces)i(a)f(term)f
(whose)i(type)f(depends)p -150 4971 801 4 v -49 5032
a Fp(5)-16 5059 y Fw(This)i(feature)g(is)f(restricted)h(to)g(ground)h
(types)f(whose)h(v)n(alue)f(can)g(be)-150 5142 y(sho)n(wn)20
b(equal)f(at)g(runtime.)-49 5207 y Fp(6)2 5234 y Fw(Due)g(to)f(space)h
(limitation)e(we)h(omit)g(this)g(approach)i(here,)e(b)o(ut)g(de\002ne)
-150 5317 y(an)23 b(alternati)n(v)o(e)f(type-checking)i(function)f(in)g
(the)f(accompan)o(ying)j(techni-)-150 5400 y(cal)19 b(report)g([36)q
(].)2049 83 y(on)e(the)f(v)n(alue)h(of)f(its)f(ar)o(gument.)23
b(A)16 b(standard)h(solution)g(to)f(is)g(to)g(introduce)h(a)2049
166 y(mechanism)k(that)f(allo)n(ws)g(only)h(a)e(limited)h(kind)h(of)f
(dependenc)o(y)i(between)2049 249 y(v)n(alues)e(and)f(types.)24
b(This)19 b(limited)g(dependenc)o(y)i(uses)e(so-called)h(singleton)2049
332 y(or)27 b(representation)h(types)g([60,)f(7,)g(9,)g(57].)48
b(The)27 b(basic)g(idea)g(is)g(to)g(allo)n(w)2049 415
y(bijections)19 b(on)h(ground)g(terms)f(between)g(the)g(v)n(alue)h(and)
g(type)f(w)o(orld.)2132 515 y(No)n(w)-5 b(,)21 b(we)f(can)h(re)n(write)
f(our)h(interpreter)g(so)f(that)h(its)f(type)h(does)g(not)g(de-)2049
598 y(pend)f(on)g(runtime)f(v)n(alues,)h(which)f(may)h(introduce)g(ef)n
(fects)f(into)g(the)g(type-)2049 681 y(checking)25 b(phase.)36
b(An)o(y)24 b(computation)h(in)e(the)g(type)h(checking)g(phase)g(can)
2049 764 y(no)n(w)e(be)g(guaranteed)g(to)g(be)f(completely)i(ef)n
(fect-free.)30 b(The)21 b(run-time)h(v)n(al-)2049 847
y(ues)h(are)g(no)n(w)g(forced)g(to)g(ha)o(v)o(e)g(representation)h
(types)f(that)f(re\003ect,)h(in)g(the)2049 930 y(w)o(orld)c(of)f(v)n
(alues,)h(the)g(v)n(alues)g(of)f(inducti)n(v)o(e)i(kinds.)j(In)c
(Meta-D,)f(a)h(special)2049 1013 y(type)k(constructor)g
Fn(R)f Fw(is)g(used)h(to)g(e)o(xpress)g(this)f(kind)h(of)f(dependenc)o
(y)-5 b(.)36 b(F)o(or)2049 1096 y(e)o(xample,)19 b(we)g(can)h(de\002ne)
f(an)g(inducti)n(v)o(e)h Ft(kind)f Fn(Nat)2049 1193 y(inductive)39
b(Nat)f(:)h(*2)76 b(=)38 b(Z)153 b(:)38 b(Nat)h(|)f(S)g(:)g(Nat)h(->)f
(Nat)2049 1274 y Fw(Note)23 b(that)g(this)g(de\002nition)g(is)g(e)o
(xactly)g(the)g(same)g(as)g(the)h(one)f(we)g(had)h(for)2049
1357 y(the)f(type)h Fn(Nat)p Fw(,)g(e)o(xcept)g(it)e(is)h(not)g
(classi\002ed)g(by)h Fn(*2)f Fw(instead)g(of)h Fn(*1)p
Fw(.)35 b(Once)2049 1440 y(this)17 b(de\002nition)h(is)g(encountered,)h
(we)f(ha)o(v)o(e)g(introduced)h(not)f(only)g(the)g(con-)2049
1523 y(structors)24 b(for)g(this)f(type,)j(b)o(ut)d(also)h(the)g
(possibility)g(of)g(using)h(the)f(special)2049 1606 y(type)c
(constructor)g Fn(R)p Fw(.)f(No)n(w)h(we)f(can)h(write)e
Fn(R\(S\(S)39 b(Z\)\))19 b Fw(to)h(refer)f(to)g(a)g(type)2049
1689 y(that)g(has)g(a)g(unique)h(inhabitant,)f(which)g(we)g(also)g
(call)g Fn(rep)38 b(\(S\(S)h(Z\)\))p Fw(.)2132 1789 y(Figure)21
b(5)h(presents)g(the)f(implementation)h(with)f(representation)i(types.)
2049 1872 y(Introducing)16 b(this)f(restriction)g(on)g(the)g(type)h
(system)f(requires)h(us)f(to)g(turn)g(the)2049 1955 y(de\002nition)20
b(of)g Fn(Exp)p Fw(,)f Fn(Env)p Fw(,)h(and)g Fn(Typ)g
Fw(into)f(de\002nitions)h(of)g(kinds)g(\(again)g(this)2049
2038 y(is)g(just)g(a)g(change)i(of)e(one)h(character)f(in)h(each)f
(de\002nition\).)28 b(Because)20 b(these)2049 2121 y(terms)25
b(are)g(no)n(w)g(kinds,)i(we)e(cannot)h(use)g(general)f(recursion)h(in)
f(de\002ning)2049 2204 y(their)f(interpretation.)40 b(Therefore,)26
b(we)e(use)h(special)g(primiti)n(v)o(e)f(recursion)2049
2287 y(constructs)19 b(pro)o(vided)h(by)f(the)f(type)h(language)h(to)e
(de\002ne)h(these)g(interpreta-)2049 2370 y(tions.)k(Judgments,)d(ho)n
(we)n(v)o(er)m(,)g(remain)f(a)g(type.)k(But)c(no)n(w)-5
b(,)19 b(the)o(y)g(are)g(a)f(type)2049 2453 y(inde)o(x)o(ed)i(by)f
(other)h(types,)f(not)g(by)g(v)n(alues.)2132 2553 y(F)o(or)f(the)g
(most)h(part,)f(the)h(de\002nition)f(of)h(judgments)g(and)g(the)g
(interpreta-)2049 2636 y(tion)k(function)h(do)g(not)f(change.)38
b(W)-6 b(e)22 b(need)j(to)e(change)h(judgments)h(in)e(the)2049
2719 y(case)d(of)h(natural)f(numbers)h(by)g(augmenting)h(them)e(with)g
(a)g(representation)2049 2802 y(for)f(the)g(v)n(alue)g(of)g(that)g
(number)l(.)24 b(The)19 b(constructor)h Fn(JN)f Fw(no)n(w)g(becomes)
2049 2900 y Fn(JN)38 b(:)h(\(e1)f(:)g(Env\))h(->)f(\(n)76
b(:)39 b(Nat\))f(->)2240 2983 y(\(rn)g(:)g(R)g(n\))h(->)76
b(J\(e1,EI)39 b(n,NatT\))2049 3064 y Fw(and)27 b(the)f(de\002nition)h
(of)f Fn(eval)g Fw(is)g(changed)i(accordingly)-5 b(.)47
b(The)26 b(modi\002ed)2049 3147 y Fn(eval)20 b Fw(uses)g(a)f(helper)i
(function)f(to)g(con)m(v)o(ert)g(a)g(representation)g(of)g(a)g(natural)
2049 3230 y(type)f(to)g(a)g(natural)g(number)l(.)2793
3202 y Fp(7)2132 3329 y Fw(The)d(de\002nition)g(of)g(the)g
Fn(typeCheck)h Fw(function)g(requires)g(more)f(substan-)2049
3412 y(tial)f(changes)i(\(Figure)e(5\).)22 b(In)16 b(particular)m(,)g
(this)f(function)h(no)n(w)g(requires)g(car)o(-)2049 3495
y(rying)k(out)g(case)g(analysis)g(on)g(types)g([20,)f(7)q(,)g(59)q(,)g
(43,)g(9)q(].)24 b(F)o(or)19 b(this)g(purpose)2049 3578
y(Meta-D)g(pro)o(vides)h(a)f(special)g(case)g(construct)2049
3676 y Fn(tycase)39 b(x)f(by)g(y)g(of)h(C_n)f(x_n)h(=>)f(e_n.)2132
3757 y Fw(A)18 b(pattern)g Fn(\(C_n)39 b(x_n\))18 b Fw(matches)h
(against)f(a)g(v)n(alue)g Fn(x)g Fw(of)g(type)h Fn(K)p
Fw(,)e(where)2049 3840 y Fn(K)i Fw(is)f(some)h(inducti)n(v)o(e)h(kind,)
f(only)g(if)f(we)h(ha)o(v)o(e)g(pro)o(vided)h(a)f(representation)2049
3923 y(v)n(alue)25 b Fn(y)f Fw(of)h(type)f Fn(R\(x\))p
Fw(.)40 b(P)o(attern)23 b(matching)j(o)o(v)o(er)e(inducti)n(v)o(e)h
(kinds)g(can-)2049 4006 y(not)c(be)h(performed)g(without)f(the)g
(presence)h(of)f(a)g(corresponding)j(runtime)2049 4089
y(v)n(alue)c(of)g(the)g(appropriate)g(representation)h(type.)26
b(Inside)20 b(the)f(body)i(of)f(the)2049 4172 y(case)e(\()p
Fn(e_n)p Fw(\),)g(the)f(e)o(xpression)i Fn(rep)39 b(x_n)18
b Fw(pro)o(vides)h(a)e(representation)i(v)n(alue)2049
4255 y(for)g(the)g(part)g(of)g(the)g(inducti)n(v)o(e)g(constructor)h
(that)f Fn(x_n)g Fw(is)f(bound)j(to.)2049 4399 y Fu(4)99
b(F)n(ormal)24 b(De)o(v)o(elopment)2132 4500 y Fw(In)19
b(this)g(section)g(we)g(report)g(our)g(main)h(technical)f(result,)f
(which)i(is)e(type)2049 4583 y(safety)27 b(for)g(a)g(formalized)g(core)
g(subset)g(of)g(Meta-D.)g(This)f(result)h(sho)n(ws)2049
4666 y(that)d(multi-stage)h(programming)h(constructs)g(can)f(be)g
(safely)f(used,)j(e)n(v)o(en)2049 4749 y(when)f(inte)o(grated)h(with)e
(a)h(sophisticated)h(dependent)h(type)e(system)g(such)2049
4832 y(as)e(that)g(of)g(TL)e([44)q(].)38 b(W)-6 b(e)23
b(follo)n(w)h(the)g(same)g(approach)i(used)e(by)h(the)f(de-)2049
4915 y(v)o(elopers)i(of)f(TL,)f(and)i(b)o(uild)f(a)h(computation)g
(language)h Fx(l)3651 4930 y Fk(H)5 b Fr(\015)3784 4915
y Fw(that)25 b(uses)2049 4998 y(TL)c(as)i(its)e(type)i(language.)35
b(Inte)o(grating)23 b(our)f(formalization)h(into)f(the)h(TL)p
2049 5063 V 2150 5124 a Fp(7)2183 5151 y Fw(In)28 b(practice,)h(we)e
(see)h(no)g(fundamental)g(reason)g(to)g(distinguish)g(the)2049
5234 y(tw)o(o.)d(Identifying)c(them,)f(ho)n(we)n(v)o(er)m(,)g(requires)
h(the)e(addition)i(of)e(some)i(spe-)2049 5317 y(cial)31
b(support)i(for)e(syntactic)h(sugar)g(for)f(this)g(particular)h
(representation)2049 5400 y(type.)p eop
%%Page: 7 7
7 6 bop -150 314 a Fn(inductive)39 b(nat)f(:)h(*1)76
b(=)38 b(zero)h(:)f(nat)h(|)f(succ)g(:)g(\(nat)h(->)f(nat\))-150
397 y(inductive)h(Nat)f(:)h(*2)76 b(=)38 b(Z)153 b(:)38
b(Nat)h(|)f(S)g(:)g(\(Nat)h(->)f(Nat\))-150 563 y(inductive)h(Typ)f(:)h
(*2)f(=)g(ArrowT)h(:)f(Typ)h(->)f(Typ)g(->)h(Typ)76 b(|)38
b(NatT)115 b(:)38 b(Typ)-150 729 y(inductive)h(Exp)f(:)h(*2)76
b(=)38 b(EI)h(:)f(Nat)g(->)h(Exp)f(|)g(EV)h(:)f(Nat)g(->)h(Exp)612
812 y(|)f(EL)h(:)f(Typ)g(->)h(Exp)f(->)g(Exp)77 b(|)38
b(EA)g(:)h(Exp)f(->)g(Exp)h(->)f(Exp)-150 978 y(inductive)h(Env)f(:)h
(*2)76 b(=)38 b(EmptyE)77 b(:)38 b(Env)77 b(|)38 b(ExtE)h(:)f(Env)g(->)
h(Typ)76 b(->)39 b(Env)-150 1144 y(inductive)g(J)f(:)g(\(Env,)h(Exp,)g
(Typ\))f(->)h(*1)76 b(=)-74 1227 y(JN)39 b(:\(e1)f(:)g(Env\))h(->)f
(\(n)77 b(:)38 b(Nat\))g(->)h(\(rn)f(:)g(R)g(n\))h(->)76
b(J\(e1,EI)39 b(n,NatT\))-150 1310 y(|)f(JV)h(:\(e1)f(:)g(Env\))h(->)f
(\(t1)77 b(:)38 b(Typ\))g(->)h(J\(ExtE)f(e1)h(t1,EV)f(Z,t1\))-150
1393 y(|)g(JW)h(:\(e1)f(:)g(Env\))h(->)f(\(t1)h(:)f(Typ\))g(->)h(\(t2)f
(:)g(Typ\))h(->)f(\(i)g(:)h(Nat\))f(->)h(J\(e1,EV)f(i,t1\))h(->)f
(J\(ExtE)h(e1)f(t2,EV)h(\(S)f(i\),)h(t1\))-150 1476 y(|)f(JL)h(:\(e1)f
(:)g(Env\))h(->)f(\(t1)h(:)f(Typ\))g(->)h(\(t2)f(:)g(Typ\))h(->)f(\(s2)
h(:)f(Exp\))g(->)h(J\(ExtE)f(e1)h(t1,s2,t2\))g(->)f(J\(e1,EL)h(t1)f
(s2,ArrowT)h(t1)g(t2\))-150 1559 y(|)f(JA)h(:\(e)f(:)g(Env\)->)h(\(s1)f
(:)h(Exp\)->)f(\(s2)h(:)f(Exp\)->)h(\(t1)f(:)g(Typ\)->)h(\(t2)g(:)f
(Typ\))g(->)79 1642 y(J\(e,s1,ArrowT)h(t1)f(t2\)->)h(J\(e,s2,t1\)->)g
(J\(e,EA)g(s1)g(s2,t2\))-150 1891 y(val)f(typEval)h(:)f(Typ)h(->)f(*1)h
(=)2 1974 y(primrec)g(Typ)g(nat)f(\(fn)h(c)f(:)g(*1)g(=>)h(fn)76
b(d)38 b(:)g(*1)h(=>)f(c)g(->)h(d\))-150 2140 y(val)f(envEval)h(:)f
(Env)h(->)f(*1)h(=)-36 2223 y(primrec)g(Env)g(unit)f(\(fn)h(r)f(:)g(*1)
g(=>)h(fn)f(t)g(:)g(Typ)h(=>)f(\(r,typEval)77 b(t\))-150
2389 y(fun)38 b(cast)h(\(n)f(:)g(Nat\))77 b(\(rn)39 b(:)f(R\(n\)\))77
b(:)38 b(nat)g(=)g(tycase)h(n)f(by)h(rn)f(of)g(Z)h(=>)f(zero)2022
2472 y(|)g(S)h(n2)76 b(=>)38 b(succ)h(\(cast)f(n2)h(\(rep)f(n2\)\))-150
2638 y(fun)g(eval)h(\(e)f(:)g(Env\))h(\(rho:)g(envEval)g(e\))f(\(s)g(:)
g(Exp\))h(\(t)f(:)g(Typ\))h(\(j)f(:)h(J\(e,s,t\)\))g(:)f(\(typEval)h
(t\))f(=)-112 2721 y(case)h(j)f(of)-74 2804 y(JN)77 b(e1)38
b(n1)g(rn1)h(=>)f(cast)h(n1)f(rn1)-150 2887 y(|)g(JV)77
b(e1)38 b(t1)76 b(=>)39 b(#2\(rho\))-150 2971 y(|)f(JW)77
b(e1)38 b(t1)g(t2)h(i)f(j1)g(=>)g(eval)h(e1)f(\(#1\(rho\)\))h(\(EV)g
(i\))f(t1)g(j1)-150 3054 y(|)g(JL)h(ee1)f(et1)g(et2)h(es2)f(ej1)h(=>fn)
f(v)g(:)h(\(typEval)g(et1\))f(=>)g(\(eval)h(\(ExtE)g(ee1)f(et1\))h
(\(rho,v\))g(es2)f(et2)g(ej1\))-150 3137 y(|)g(JA)h(e)f(s1)g(s2)g(t1)h
(t2)f(j1)g(j2)h(=>)f(\(eval)h(e)f(rho)g(s1)h(\(ArrowT)f(t1)h(t2\))f
(j1\))h(\(eval)f(e)g(rho)h(s2)f(t1)h(j2\))-150 3303 y(fun)f(typeCheck)h
(\(e)g(:)f(Env\))h(\(re:)f(R\(e\)\))h(\(s)f(:)g(Exp\))77
b(\(rs:)38 b(R\(s\)\))77 b(:)38 b(\([t)h(:)f(Typ])h
(\(R\(t\),J\(e,s,t\)\)\))g(=)-150 3386 y(tycase)g(s)f(by)g(rs)h(of)-74
3469 y(EI)g(n)f(=>)g([t)g(=)h(NatT])f(\(NatT',\(JN)h(e)g(n)f(\(rep)g
(n\)\)\))-150 3552 y(|)g(EV)h(n)f(=>)-112 3635 y(\(tycase)h(n)f(by)g
(\(rep)h(n\))f(of)h(Z)f(=>)g(\(tycase)h(e)f(by)h(re)f(of)g(ExtE)h(ee)76
b(t2)39 b(=>)f([t)g(=)g(t2]\(rep)h(t2,)g(JV)f(ee)g(t2\)\))688
3718 y(|)h(S)f(n)g(=>)g(\(tycase)h(e)f(by)h(re)f(of)g(ExtE)h(\(e2\))f
(\(t2\))h(=>)1222 3801 y(\(\(fn)f(x)h(:)f(\([t:Typ])h(\(R\(t\),)g
(J\(e2,EV)f(n,t\)\)\))h(=>)1336 3884 y(case)g(x)f(of)g([rx)h(:)f
(Typ]j2)h(=>)f(\([t)g(=)h(rx])2365 3967 y(\(#1)f(j2,)h(JW)f(e2)h(rx)f
(t2)g(n)g(\(#2)h(j2\)\)\))1222 4050 y(\(typeCheck)g(e2)f(\(rep)h(e2\))f
(\(EV)h(n\))f(\(rep)h(\(EV)f(n\)\)\)\)\)\)\))-150 4133
y(|)g(EL)h(targ)f(s2)g(=>)-112 4216 y(\(\(fn)h(x)f(:)g(\([t)g(:)h
(Typ]\(R\(t\),\(J\(ExtE)h(e)e(targ,s2,t\)\)\)\))h(=>)79
4299 y(case)f(x)g(of)h([t)f(:)g(Typ])h(j2)f(=>)g([t)h(=)f(ArrowT)h
(targ)f(t])h(\(rep)f(\(ArrowT)h(targ)f(\(#1)h(t\)\)\),)g(\(JL)f(e)g
(targ)h(t)f(s2)g(\(#2)h(j2\)\))f(\))-112 4382 y(\(typeCheck)h(\(ExtE)g
(e)f(targ\))h(\(rep)f(\(ExtE)h(e)f(targ\)\))h(s2)f(\(rep)h(s2\)\)\))
-150 4465 y(|)f(EA)h(s1)f(s2)g(=>)-112 4548 y(\(\(fn)h(x1)f(:)g([t1)h
(:)f(Typ]\(R\(t1\),\(J\(e,s1,t1\)\)\))i(=>)f(\(fn)f(x2)h(:)f([t2)g(:)g
(Typ]\(R\(t2\),\(J\(e,s2,t2\)\)\))j(=>)2 4631 y(case)e(x1)f(of)h([t1)f
(:)g(Typ]j1)h(=>)f(case)h(x2)f(of)g([t2)h(:)f(Typ]j2)h(=>)41
4714 y(\(tycase)f(t1)h(by)f(\(#1)g(\(j1\)\))h(of)117
4797 y(ArrowT)f(tdom)h(tcod)g(=>)155 4880 y([t)f(=)g(tcod])h(\(rep)g
(tcod,)f(\(JA)h(e)f(s1)g(s2)g(tdom)h(tcod)g(j1)1108 4963
y(\(cast)f([assert)h(t2=tdom,J\(e,s,tdom\),j2]\)\)\))i(end\)\)\))-112
5046 y(\(typeCheck)e(e)f(\(rep)h(e\))f(s1)h(\(rep)f(s1\)\))h
(\(typeCheck)g(e)f(\(rep)h(e\))f(s2)g(\(rep)h(s2\)\)\))924
5127 y Ff(Figur)o(e)18 b(5.)23 b(T)-7 b(agless)20 b(inter)o(pr)o(eter)e
(with)g(r)o(epr)o(esentation)f(types)i(in)f(MetaD)p eop
%%Page: 8 8
8 7 bop 939 144 a Fw(inducti)n(v)o(e)18 b Fx(W)1288 117
y Fr(\015)1367 144 y Fw(:)e(Kind)84 b(::)p Fl(=)182 b
Fw(snat)17 b(:)f(Nat)h Fy(!)f Fx(W)2366 117 y Fr(\015)1637
236 y Fy(j)g Fw(sbool)84 b(:)16 b(Bool)h Fy(!)g Fx(W)2267
209 y Fr(\015)1637 329 y Fy(j!)-58 b(!)169 b Fw(:)16
b Fx(W)2013 302 y Fr(\015)2093 329 y Fy(!)g Fx(W)2241
302 y Fr(\015)2320 329 y Fy(!)h Fx(W)2469 302 y Fr(\015)1637
422 y Fy(j)f Fw(tup)150 b(:)16 b(Nat)h Fy(!)f Fl(\()p
Fw(Nat)h Fy(!)f Fx(W)2474 395 y Fr(\015)2537 422 y Fl(\))g
Fy(!)h Fx(W)2731 395 y Fr(\015)1637 515 y Fy(j)f(8)1716
529 y Fk(k)1919 515 y Fw(:)g Fx(P)p Ft(k)j Fw(:)d(Kind)q
Fs(:)p Fl(\()p Ft(k)h Fy(!)g Fx(W)2501 488 y Fr(\015)2563
515 y Fl(\))g Fy(!)f Fx(W)2757 488 y Fr(\015)1637 608
y Fy(j)g(9)1716 622 y Fk(k)1919 608 y Fw(:)g Fx(P)p Ft(k)j
Fw(:)d(Kind)q Fs(:)p Fl(\()p Ft(k)h Fy(!)g Fx(W)2501
581 y Fr(\015)2563 608 y Fl(\))g Fy(!)f Fx(W)2757 581
y Fr(\015)1637 701 y Fy(j)g(8)1716 714 y Fk(K)t(S)1919
701 y Fw(:)g Fx(P)p Ft(k)j Fw(:)d(KScheme)q Fs(:)p Fl(\()p
Ft(k)h Fy(!)g Fx(W)2642 673 y Fr(\015)2704 701 y Fl(\))g
Fy(!)f Fx(W)2898 673 y Fr(\015)1637 793 y Fy(j)g(9)1716
806 y Fk(K)t(S)1919 793 y Fw(:)g Fx(P)p Ft(k)j Fw(:)d(KScheme)q
Fs(:)p Fl(\()p Ft(k)h Fy(!)g Fx(W)2642 766 y Fr(\015)2704
793 y Fl(\))g Fy(!)f Fx(W)2898 766 y Fr(\015)1637 886
y Fy(j)g(\015)170 b Fw(:)16 b Fx(W)2013 859 y Fr(\015)2093
886 y Fy(!)g Fx(W)2241 859 y Fr(\015)1637 979 y Fy(j)g
Fw(EQ)145 b(:)16 b(Nat)h Fy(!)f Fw(Nat)h Fy(!)f Fx(W)2445
952 y Fr(\015)1197 1118 y Ff(Figur)o(e)i(6.)23 b(The)c(TL)f
(de\002nition)f(of)i(the)f(types)h(of)g Fx(l)2595 1133
y Fk(H)5 b Fr(\015)519 1361 y Ft(X)98 b Fy(\021)83 b
Fw(type)20 b(v)n(ariables)f(of)g(TL)526 1444 y Ft(A)91
b Fy(\021)83 b Fw(type)20 b(e)o(xpressions)g(of)f(TL)297
1535 y Ft(e)o(x)6 b(p)405 1508 y Fp(0)454 1535 y Fy(2)17
b Ft(E)572 1508 y Fp(0)622 1535 y Fw(::)p Fl(=)82 b Ft(x)17
b Fy(j)g Ft(n)g Fy(j)f Fv(tt)27 b Fy(j)16 b Fv(ff)28
b Fy(j)f Ft(f)1231 1508 y Fp(0)1281 1535 y Fy(j)16 b
Fv(\002x)7 b Ft(x)18 b Fw(:)e Ft(A)p Fs(:)11 b Ft(f)1591
1508 y Fp(0)1640 1535 y Fy(j)16 b Ft(e)1710 1508 y Fp(0)1710
1560 y(1)1760 1535 y Ft(e)1793 1508 y Fp(0)1793 1560
y(1)1843 1535 y Fy(j)h Ft(e)1914 1508 y Fp(0)1947 1535
y Fl([)p Ft(A)p Fl(])f Fy(j)g Fl(\()-17 b([)p Ft(X)23
b Fl(=)17 b Ft(A)2311 1548 y Fp(1)2344 1535 y Fs(;)8
b Ft(e)2406 1508 y Fp(0)2456 1535 y Fw(:)16 b Ft(A)2539
1548 y Fp(2)2572 1535 y Fl(])-17 b(\))701 1626 y Fy(j)82
b Fw(open)22 b Ft(e)1003 1599 y Fp(0)1053 1626 y Fw(as)17
b Ft(X)7 b Fs(;)h Ft(x)17 b Fv(in)g Ft(e)1366 1599 y
Fp(0)1416 1626 y Fy(j)f Fl(\()p Ft(e)1515 1599 y Fp(0)1515
1651 y(0)1548 1626 y Fs(;)8 b(:)g(:)g(:)g Ft(e)1697 1599
y Fp(0)1697 1651 y Fk(n)p Fr(\000)p Fp(1)1805 1626 y
Fl(\))17 b Fy(j)f Fv(sel)21 b Fl([)p Ft(A)p Fl(]\()p
Ft(e)2145 1599 y Fp(0)2145 1651 y(1)2177 1626 y Fs(;)8
b Ft(e)2239 1599 y Fp(0)2239 1651 y(2)2272 1626 y Fl(\))17
b Fy(j)f Ft(e)2388 1599 y Fp(0)2388 1651 y(1)2432 1626
y Fy(\010)10 b Ft(e)2533 1599 y Fp(0)2533 1651 y(2)2584
1626 y Fy(j)16 b Fv(if)k Fl([)p Ft(A)2742 1639 y Fp(1)2775
1626 y Fs(;)8 b Ft(A)2850 1639 y Fp(2)2883 1626 y Fl(]\()p
Ft(e)2966 1599 y Fp(0)2999 1626 y Fs(;)g Ft(X)3072 1639
y Fp(1)3105 1626 y Fs(:)p Ft(e)3159 1599 y Fp(0)3159
1651 y(1)3192 1626 y Fs(;)g Ft(X)3265 1639 y Fp(2)3298
1626 y Fs(:)p Ft(e)3352 1599 y Fp(0)3352 1651 y(2)3385
1626 y Fl(\))16 b Fy(j)h(h)p Ft(e)3530 1599 y Fp(1)3563
1626 y Fy(i)701 1722 y(j)101 b Fw(assert)17 b Ft(e)1043
1695 y Fp(0)1043 1746 y(1)1093 1722 y Fw(:)f Ft(A)1176
1735 y Fp(1)1226 1722 y Fl(=)g Ft(e)1333 1695 y Fp(0)1333
1746 y(2)1383 1722 y Fw(:)h Ft(A)1467 1735 y Fp(2)1516
1722 y Fy(j)35 b Fw(cast)17 b Fl(\()p Ft(e)1767 1695
y Fp(0)1767 1746 y(1)1800 1722 y Fs(;)8 b Ft(A)p Fs(;)g
Ft(e)1937 1695 y Fp(0)1937 1746 y(2)1970 1722 y Fl(\))540
1805 y Ft(f)572 1778 y Fk(n)622 1805 y Fw(::)p Fl(=)82
b Fx(L)p Ft(X)24 b Fw(:)16 b Ft(A)p Fs(:)p Ft(e)1062
1778 y Fk(n)1112 1805 y Fy(j)g Fx(l)p Ft(x)h Fw(:)f Ft(A)p
Fs(:)p Ft(e)1377 1778 y Fk(n)419 1896 y Ft(e)o(x)6 b(p)527
1869 y Fk(n)p Fm(+)622 1896 y Fw(::)p Fl(=)82 b Ft(x)17
b Fy(j)g Ft(m)f Fy(j)h Fv(tt)27 b Fy(j)16 b Fv(ff)27
b Fy(j)h Ft(f)1248 1869 y Fk(n)p Fm(+)1342 1896 y Fy(j)17
b Fv(\002x)7 b Ft(x)17 b Fw(:)g Ft(A)p Fs(:)11 b Ft(f)1653
1869 y Fk(n)p Fm(+)p Fp(1)1776 1896 y Fy(j)16 b Ft(e)1846
1869 y Fk(n)p Fm(+)1941 1896 y Ft(e)1974 1869 y Fk(n)p
Fm(+)2069 1896 y Fy(j)h Ft(e)2140 1869 y Fk(n)p Fm(+)2235
1896 y Fl([)p Ft(A)p Fl(])f Fy(j)g Fl(\()-17 b([)p Ft(X)23
b Fl(=)17 b Ft(A)2599 1909 y Fp(1)2632 1896 y Fs(;)8
b Ft(e)2694 1869 y Fk(n)p Fm(+)2789 1896 y Fw(:)16 b
Ft(A)2872 1909 y Fp(2)2905 1896 y Fl(])-17 b(\))17 b
Fy(j)f Fw(open)22 b Ft(e)3191 1869 y Fk(n)p Fm(+)3286
1896 y Fw(as)17 b Ft(X)7 b Fs(;)h Ft(x)17 b Fv(in)g Ft(e)3599
1869 y Fk(n)p Fm(+)701 1991 y Fy(j)82 b Fl(\()p Ft(e)866
1960 y Fk(n)p Fm(+)866 2015 y Fp(0)945 1991 y Fs(;)8
b(:)g(:)g(:)g(;)g Ft(e)1123 1960 y Fk(n)p Fm(+)p Fp(1)1123
2015 y Fk(m)p Fr(\000)p Fp(1)1243 1991 y Fl(\))17 b Fy(j)f
Fv(sel)21 b Fl([)p Ft(A)p Fl(]\()p Ft(e)1583 1960 y Fk(n)p
Fm(+)1583 2015 y Fp(1)1661 1991 y Fs(;)8 b Ft(e)1723
1960 y Fk(n)p Fm(+)1723 2015 y Fp(2)1801 1991 y Fl(\))17
b Fy(j)f Ft(e)1917 1960 y Fk(n)p Fm(+)1917 2015 y Fp(1)2006
1991 y Fy(\010)10 b Ft(e)2107 1960 y Fk(n)p Fm(+)2107
2015 y Fp(2)2202 1991 y Fy(j)17 b(h)p Ft(e)2302 1963
y Fk(n)p Fm(++)2425 1991 y Fy(i)g(j)d Fc(~)n Ft(e)2575
1963 y Fk(n)2625 1991 y Fy(j)i Fv(if)k Fl([)p Ft(A)2783
2004 y Fp(1)2816 1991 y Fs(;)8 b Ft(A)2891 2004 y Fp(2)2924
1991 y Fl(]\()p Ft(e)3007 1963 y Fk(n)p Fm(+)3085 1991
y Fs(;)g Ft(X)3158 2004 y Fp(1)3191 1991 y Fs(:)p Ft(e)3245
1960 y Fk(n)p Fm(+)3245 2015 y Fp(1)3323 1991 y Fs(;)g
Ft(X)3396 2004 y Fp(2)3429 1991 y Fs(:)p Ft(e)3483 1960
y Fk(n)p Fm(+)3483 2015 y Fp(2)3561 1991 y Fl(\))701
2085 y Fy(j)101 b Fw(assert)17 b Ft(e)1043 2054 y Fm(+)1043
2110 y Fp(1)1109 2085 y Fw(:)f Ft(A)1192 2098 y Fp(1)1242
2085 y Fl(=)g Ft(e)1349 2054 y Fm(+)1349 2110 y Fp(2)1415
2085 y Fw(:)h Ft(A)1499 2098 y Fp(2)1548 2085 y Fy(j)35
b Fw(cast)17 b Fl(\()p Ft(e)1799 2054 y Fm(+)1799 2110
y Fp(1)1849 2085 y Fs(;)8 b Ft(A)p Fs(;)g Ft(e)1986 2054
y Fm(+)1986 2110 y Fp(2)2035 2085 y Fl(\))371 2176 y
Ft(v)404 2149 y Fp(0)454 2176 y Fy(2)13 b Ft(V)572 2149
y Fp(0)622 2176 y Fw(::)p Fl(=)82 b Ft(n)17 b Fy(j)g
Fv(tt)27 b Fy(j)16 b Fv(ff)27 b Fy(j)h Ft(f)1144 2149
y Fp(0)1193 2176 y Fy(j)17 b Fv(\002x)7 b Ft(x)17 b Fw(:)g
Ft(A)p Fs(:)11 b Ft(f)1504 2149 y Fp(0)1553 2176 y Fy(j)16
b Fl(\()-17 b([)p Ft(X)23 b Fl(=)17 b Ft(A)1813 2189
y Fp(1)1846 2176 y Fs(;)8 b Ft(v)1908 2149 y Fp(0)1958
2176 y Fw(:)16 b Ft(A)2041 2189 y Fp(2)2074 2176 y Fl(])-17
b(\))17 b Fy(j)f Fl(\()p Ft(v)2223 2149 y Fp(0)2223 2200
y(1)2256 2176 y Fs(;)8 b(:)g(:)g(:)g(;)g Ft(v)2434 2149
y Fp(0)2434 2200 y Fk(m)p Fr(\000)p Fp(1)2555 2176 y
Fl(\))16 b Fy(j)h(h)p Ft(v)2700 2149 y Fp(1)2733 2176
y Fy(i)701 2271 y(j)101 b Fw(assert)17 b Ft(v)1043 2244
y Fp(0)1093 2271 y Fw(:)f Ft(A)g Fl(=)h Ft(v)1300 2244
y Fp(0)1350 2271 y Fw(:)f Ft(B)223 2362 y(v)256 2335
y Fk(n)p Fm(+)p Fp(1)380 2362 y Fy(2)c Ft(V)498 2335
y Fk(n)p Fm(+)p Fp(1)622 2362 y Fw(::)p Fl(=)82 b Ft(E)855
2335 y Fk(n)1561 2501 y Ff(Figur)o(e)18 b(7.)24 b(Syntax)18
b(of)h Fx(l)2230 2516 y Fk(H)5 b Fr(\015)1349 2745 y
Fy(hij)1428 2756 y Fk(n)1760 2745 y Fl(=)16 b Fy(hi)1349
2900 y Fx(D)p Fs(;)8 b Ft(X)23 b Fw(:)17 b Ft(A)1577
2873 y Fk(m)1623 2900 y Fy(j)1644 2911 y Fk(n)1760 2900
y Fl(=)1834 2773 y Fb(\()1894 2852 y Fx(D)p Fy(j)1961
2863 y Fk(n)1994 2852 y Fs(;)8 b Ft(X)23 b Fw(:)17 b
Ft(A)74 b(m)17 b Fl(=)f Ft(n)1894 2951 y Fx(D)p Fy(j)1961
2962 y Fk(n)2250 2951 y Fw(otherwise)401 3160 y Fx(D)g
Fy(`)509 3133 y Fk(n)559 3160 y Fx(G)75 b Fl(\()p Ft(x)17
b Fw(:)f Ft(A)841 3133 y Fk(m)887 3160 y Fl(\))g Fy(2)h
Fx(G)75 b Ft(m)16 b Fy(\024)h Ft(n)p 401 3197 901 3 v
669 3265 a Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)851 3243 y
Fk(n)901 3265 y Ft(x)h Fw(:)f Ft(A)1504 3160 y Fx(D)h
Fy(`)1613 3133 y Fk(n)1662 3160 y Fx(G)g Fw(OK)p 1394
3197 557 3 v 1394 3265 a Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)1577
3243 y Fk(n)1626 3265 y Ft(m)g Fw(:)f Fv(snat)35 b Ft(m)2210
3160 y Fx(D)16 b Fy(`)2318 3133 y Fk(n)2368 3160 y Fx(G)g
Fw(OK)p 2043 3197 669 3 v 2043 3265 a Fx(D)p Fw(;)8 b
Fx(G)17 b Fy(`)2226 3243 y Fk(n)2275 3265 y Fv(tt)27
b Fw(:)17 b Fv(sbool)36 b Fw(T)m(rue)2981 3160 y Fx(D)16
b Fy(`)3089 3133 y Fk(n)3139 3160 y Fx(G)g Fw(OK)p 2805
3197 688 3 v 2805 3265 a Fx(D)p Fs(;)8 b Fx(G)17 b Fy(`)2988
3243 y Fk(n)3037 3265 y Fv(ff)27 b Fw(:)17 b Fv(sbool)36
b Fw(F)o(alse)632 3406 y Fx(D)p Fy(j)699 3417 y Fk(n)731
3406 y Fy(`)16 b Ft(A)h Fw(:)f Fx(W)950 3379 y Fr(\015)632
3489 y Fx(D)p Fw(;)8 b Fx(G)p Fs(;)g Ft(x)16 b Fw(:)h
Ft(A)914 3462 y Fk(n)963 3489 y Fy(`)1009 3462 y Fk(n)1070
3489 y Ft(f)27 b Fw(:)17 b Ft(A)p 567 3526 700 3 v 567
3595 a Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)749 3573 y Fk(n)799
3595 y Fl(\()p Fv(\002x)7 b Ft(x)17 b Fw(:)g Ft(A)p Fs(:)11
b Ft(f)g Fl(\))34 b Fw(:)h Ft(A)1359 3489 y Fx(D)p Fy(j)1426
3500 y Fk(n)1459 3489 y Fy(`)16 b Ft(A)1567 3502 y Fp(1)1616
3489 y Fw(:)h Fx(W)1711 3462 y Fr(\015)1848 3489 y Fx(D)p
Fw(;)8 b Fx(G)p Fs(;)g Ft(x)17 b Fw(:)f Ft(A)2130 3462
y Fk(n)2130 3514 y Fp(1)2180 3489 y Fy(`)2226 3462 y
Fk(n)2275 3489 y Ft(e)h Fw(:)f Ft(A)2408 3502 y Fp(2)p
1359 3526 1083 3 v 1456 3595 a Fx(D)p Fw(;)8 b Fx(G)17
b Fy(`)1639 3573 y Fk(n)1688 3595 y Fl(\()p Fx(l)p Ft(x)g
Fw(:)g Ft(A)1892 3608 y Fp(1)1925 3595 y Fs(:)p Ft(e)p
Fl(\))f Fw(:)g Ft(A)2107 3608 y Fp(1)2157 3595 y Fy(!)-58
b(!)16 b Ft(A)2311 3608 y Fp(2)2650 3406 y Fx(D)p Fw(;)8
b Fx(G)17 b Fy(`)2833 3379 y Fk(n)2882 3406 y Ft(e)2915
3419 y Fp(1)2965 3406 y Fw(:)g Ft(A)3049 3419 y Fp(1)3098
3406 y Fy(!)-58 b(!)16 b Ft(A)3252 3419 y Fp(2)2650 3489
y Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)2833 3462 y Fk(n)2882
3489 y Ft(e)2915 3502 y Fp(2)2965 3489 y Fw(:)g Ft(A)3049
3502 y Fp(1)p 2609 3526 718 3 v 2692 3595 a Fx(D)p Fw(;)8
b Fx(G)16 b Fy(`)2874 3573 y Fk(n)2924 3595 y Ft(e)2957
3608 y Fp(1)3007 3595 y Ft(e)3040 3608 y Fp(2)3109 3595
y Fw(:)35 b Ft(A)3211 3608 y Fp(2)604 3726 y Fx(D)p Fy(j)671
3737 y Fk(n)703 3726 y Fy(`)16 b Ft(B)h Fw(:)f Ft(s)604
3809 y Fx(D)p Fs(;)8 b Ft(X)23 b Fw(:)16 b Ft(B)831 3782
y Fk(n)864 3809 y Fw(;)8 b Fx(G)16 b Fy(`)1000 3782 y
Fk(n)1061 3809 y Ft(f)27 b Fw(:)17 b Ft(A)p 430 3846
936 3 v 430 3914 a Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)613
3893 y Fk(n)662 3914 y Fl(\()p Fx(L)p Ft(X)24 b Fw(:)16
b Ft(B)p Fs(:)11 b Ft(f)g Fl(\))35 b Fw(:)g Fy(8)1121
3925 y Fk(s)1147 3914 y Ft(X)23 b Fw(:)17 b Ft(B)p Fs(:)p
Ft(A)1526 3726 y Fx(D)p Fy(j)1593 3737 y Fk(n)1626 3726
y Fy(`)f Ft(A)g Fw(:)h Ft(B)1526 3809 y Fx(D)p Fs(;)8
b Fx(G)17 b Fy(`)1709 3782 y Fk(n)1758 3809 y Ft(e)g
Fw(:)f Fy(8)1887 3820 y Fk(s)1913 3809 y Ft(X)24 b Fw(:)16
b Ft(B)p Fs(:)p Ft(A)2133 3822 y Fp(2)p 1459 3846 775
3 v 1459 3914 a Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)1641 3893
y Fk(n)1691 3914 y Ft(e)p Fl([)p Ft(A)p Fl(])34 b Fw(:)h
Ft(A)1948 3927 y Fp(2)1981 3914 y Fl([)p Ft(X)23 b Fw(:)p
Fl(=)16 b Ft(A)p Fl(])2430 3809 y Fx(D)p Fw(;)8 b Fx(G)16
b Fy(`)2612 3782 y Fk(n)p Fm(+)p Fp(1)2736 3809 y Ft(e)h
Fw(:)f Ft(A)p 2400 3846 498 3 v 2400 3914 a Fx(D)p Fw(;)8
b Fx(G)17 b Fy(`)2583 3893 y Fk(n)2632 3914 y Fy(h)p
Ft(e)p Fy(i)g Fw(:)f Fy(\015)p Ft(A)3007 3809 y Fx(D)p
Fw(;)8 b Fx(G)17 b Fy(`)3190 3782 y Fk(n)3239 3809 y
Ft(e)g Fw(:)f Fy(\015)p Ft(A)p 2991 3846 473 3 v 2991
3915 a Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)3173 3894 y Fk(n)p
Fm(+)p Fp(1)3294 3915 y Fc(~)n Ft(e)h Fw(:)f Ft(A)295
4140 y Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)477 4113 y Fk(n)527
4140 y Ft(e)560 4153 y Fp(1)610 4140 y Fw(:)g Fv(snat)36
b Ft(A)856 4153 y Fp(1)295 4223 y Fx(D)p Fw(;)8 b Fx(G)16
b Fy(`)477 4196 y Fk(n)527 4223 y Ft(e)560 4236 y Fp(2)610
4223 y Fw(:)g Fv(snat)36 b Ft(A)856 4236 y Fp(2)p 125
4260 934 3 v 125 4329 a Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)307
4307 y Fk(n)357 4329 y Ft(e)390 4342 y Fp(1)434 4329
y Fy(\010)10 b Ft(e)535 4342 y Fp(2)585 4329 y Fw(:)16
b Fv(snat)36 b Fl(\()p Ft(A)860 4342 y Fp(1)909 4319
y Fw(\210)893 4329 y Fy(\010)p Ft(A)997 4342 y Fp(2)1030
4329 y Fl(\))1413 4057 y Fx(D)p Fy(j)1480 4068 y Fk(n)1513
4057 y Fy(`)16 b Ft(A)g Fw(:)h Ft(B)1413 4140 y Fx(D)p
Fy(j)1480 4151 y Fk(n)1513 4140 y Fy(`)f Ft(B)g Fw(:)h
Ft(s)1413 4223 y Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)1596
4196 y Fk(n)1645 4223 y Ft(e)g Fw(:)f Ft(A)p Fl([)p Ft(X)23
b Fw(:)p Fl(=)16 b Ft(A)2009 4236 y Fp(1)2042 4223 y
Fl(])p 1226 4260 1024 3 v 1226 4328 a Fx(D)p Fw(;)8 b
Fx(G)17 b Fy(`)1409 4307 y Fk(n)1458 4328 y Fl(\()-17
b([)p Ft(X)23 b Fl(=)17 b Ft(A)1681 4341 y Fp(1)1714
4328 y Fs(;)8 b Ft(e)17 b Fw(:)f Ft(A)p Fl(])-17 b(\))17
b Fw(:)f Fy(9)2005 4339 y Fk(s)2031 4328 y Ft(X)23 b
Fw(:)17 b Ft(B)p Fs(:)p Ft(A)2459 4046 y Fx(D)p Fs(;)8
b Fx(G)16 b Fy(`)2641 4019 y Fk(n)2691 4046 y Ft(e)h
Fw(:)f Fy(9)2820 4057 y Fk(s)2846 4046 y Ft(X)2899 4019
y Fr(0)2936 4046 y Fw(:)g Ft(B)p Fs(:)p Ft(A)3086 4059
y Fp(1)2459 4139 y Fx(D)p Fy(j)2526 4150 y Fk(n)2559
4139 y Fy(`)g Ft(A)2667 4152 y Fp(2)2716 4139 y Fw(:)h
Fx(W)2811 4112 y Fr(\015)2459 4223 y Fx(D)p Fs(;)8 b
Ft(X)23 b Fw(:)16 b Ft(B)p Fw(;)8 b Fx(G)p Fs(;)g Ft(x)17
b Fw(:)g Ft(A)2923 4236 y Fp(1)2955 4223 y Fl([)p Ft(X)3029
4196 y Fr(0)3066 4223 y Fw(:)p Fl(=)f Ft(X)7 b Fl(])16
b Fy(`)3297 4196 y Fk(n)3346 4223 y Ft(e)3379 4236 y
Fp(2)3429 4223 y Fw(:)h Ft(A)3513 4236 y Fp(2)p 2417
4260 1170 3 v 2522 4328 a Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)2705
4307 y Fk(n)2754 4328 y Fw(open)22 b Ft(e)2953 4341 y
Fp(1)3003 4328 y Fw(as)17 b Ft(X)7 b Fs(;)h Ft(x)17 b
Fv(in)g Ft(e)3316 4341 y Fp(2)3366 4328 y Fw(:)f Ft(A)3449
4341 y Fp(2)3604 4277 y Ft(X)23 b Fy(62)16 b Fx(D)764
4470 y(D)p Fw(;)8 b Fx(G)16 b Fy(`)946 4442 y Fk(n)996
4470 y Ft(e)1029 4483 y Fp(1)1079 4470 y Fw(:)g Fv(tup)h
Ft(A)1272 4483 y Fp(3)1322 4470 y Ft(B)764 4553 y Fx(D)p
Fw(;)8 b Fx(G)16 b Fy(`)946 4526 y Fk(n)996 4553 y Ft(e)1029
4566 y Fp(2)1079 4553 y Fw(:)g Fv(snat)36 b Ft(A)1325
4566 y Fp(2)764 4636 y Fx(D)p Fy(j)831 4647 y Fk(n)864
4636 y Fy(`)16 b Ft(A)g Fw(:)g Fv(L)-7 b(T)17 b Ft(A)1159
4649 y Fp(2)1209 4636 y Ft(A)1255 4649 y Fp(3)p 645 4673
841 3 v 645 4741 a Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)828
4719 y Fk(n)877 4741 y Fv(sel)k Fl([)p Ft(A)p Fl(]\()p
Ft(e)1134 4754 y Fp(1)1166 4741 y Fs(;)8 b Ft(e)1228
4754 y Fp(2)1262 4741 y Fl(\))16 b Fw(:)h Ft(B)f(A)1453
4754 y Fp(2)1695 4460 y Fx(D)p Fy(j)1762 4471 y Fk(n)1795
4460 y Fy(`)g Ft(B)g Fw(:)h(Bool)g Fy(!)f Ft(K)t(ind)254
b Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)2795 4433 y Fk(n)2844
4460 y Ft(e)h Fw(:)g Fv(sbool)36 b Ft(A)3174 4473 y Fp(3)1695
4543 y Fx(D)p Fy(j)1762 4554 y Fk(n)1795 4543 y Fy(`)16
b Ft(A)g Fw(:)h Ft(B)f(A)2065 4556 y Fp(3)2469 4543 y
Fx(D)p Fs(;)8 b Ft(X)2588 4556 y Fp(1)2638 4543 y Fw(:)16
b Ft(B)g Fv(tr)q(ue)q Fw(;)8 b Fx(G)17 b Fy(`)f Ft(e)3040
4556 y Fp(1)3090 4543 y Fw(:)h Ft(A)3174 4556 y Fp(2)1695
4636 y Fx(D)p Fy(j)1762 4647 y Fk(n)1795 4636 y Fy(`)f
Ft(A)1903 4649 y Fp(2)1952 4636 y Fw(:)h Fx(W)2047 4609
y Fr(\015)2446 4636 y Fx(D)p Fs(;)8 b Ft(X)2565 4649
y Fp(2)2615 4636 y Fw(:)16 b Ft(B)g Fv(f)n(alse)p Fw(;)8
b Fx(G)17 b Fy(`)f Ft(e)3040 4649 y Fp(2)3090 4636 y
Fw(:)h Ft(A)3174 4649 y Fp(2)p 1654 4673 1595 3 v 1922
4741 a Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)2105 4719 y Fk(n)2154
4741 y Fv(if)j Fl([)p Ft(B)p Fs(;)8 b Ft(A)p Fl(]\()p
Ft(e)o Fs(;)g Ft(X)2505 4754 y Fp(1)2538 4741 y Fs(:)p
Ft(e)2592 4754 y Fp(1)2625 4741 y Fs(;)g Ft(X)2698 4754
y Fp(2)2731 4741 y Fs(:)p Ft(e)2785 4754 y Fp(2)2818
4741 y Fl(\))16 b Fw(:)h Ft(A)2947 4754 y Fp(2)851 4882
y Fw(0)g Fy(\024)g Ft(i)f Fs(<)h Ft(m)p Fs(:)f Fx(D)p
Fs(;)8 b Fx(G)17 b Fy(`)1366 4855 y Fk(n)1415 4882 y
Ft(e)1448 4894 y Fk(i)1485 4882 y Fw(:)g Ft(A)1569 4894
y Fk(i)p 476 4919 1489 3 v 476 4987 a Fx(D)p Fw(;)8 b
Fx(G)16 b Fy(`)658 4966 y Fk(n)708 4987 y Fl(\()p Ft(e)770
5000 y Fp(0)803 4987 y Fs(;)8 b(:)g(:)g(:)g(;)g Ft(e)981
5000 y Fk(m)p Fr(\000)p Fp(1)1102 4987 y Fl(\))16 b Fw(:)h
Fv(tup)35 b Fw(\210)-43 b Ft(m)16 b Fl(\()p Fv(nth)h
Fl([)p Ft(A)1571 5000 y Fp(0)1604 4987 y Fs(;)8 b(:)g(:)g(:)g(;)g
Ft(A)1795 5000 y Fk(m)p Fr(\000)p Fp(1)1915 4987 y Fl(]\))2132
4882 y Fx(D)p Fw(;)g Fx(G)17 b Fy(`)2315 4855 y Fk(n)2364
4882 y Ft(e)g Fw(:)f Ft(A)2497 4895 y Fp(1)2605 4882
y Ft(A)2651 4895 y Fp(1)2700 4882 y Fl(=)h Ft(A)2821
4895 y Fp(2)2929 4882 y Fx(D)p Fy(j)2996 4893 y Fk(n)3028
4882 y Fy(`)f Ft(A)3136 4895 y Fp(2)3186 4882 y Fw(:)g
Fx(W)3280 4855 y Fr(\015)p 2132 4919 1211 3 v 2539 4987
a Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)2721 4966 y Fk(n)2770
4987 y Ft(e)h Fw(:)g Ft(A)2904 5000 y Fp(2)708 5119 y
Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)890 5092 y Fk(n)940 5119
y Ft(e)973 5132 y Fp(1)1023 5119 y Fw(:)g(snat)h Ft(A)75
b Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)1500 5092 y Fk(n)1549
5119 y Ft(e)1582 5132 y Fp(2)1632 5119 y Fw(:)h(snat)g
Ft(B)p 708 5156 1145 3 v 721 5224 a Fx(D)p Fw(;)8 b Fx(G)17
b Fy(`)904 5203 y Fk(n)972 5224 y Fw(assert)g Ft(e)1192
5237 y Fp(1)1242 5224 y Fw(:)f Ft(A)g Fl(=)h Ft(e)1449
5237 y Fp(2)1499 5224 y Fw(:)f Ft(B)g Fw(:)h(ID)f Ft(A)h(B)2020
5119 y Fx(D)p Fw(;)8 b Fx(G)17 b Fy(`)2203 5092 y Fk(n)2252
5119 y Ft(e)2285 5132 y Fp(1)2335 5119 y Fw(:)f(ID)h
Ft(A)f(B)75 b Fx(D)p Fw(;)8 b Fx(G)16 b Fy(`)2833 5092
y Fk(n)2882 5119 y Ft(e)2915 5132 y Fp(2)2965 5119 y
Fw(:)h(snat)g Ft(A)p 2020 5156 1166 3 v 2146 5224 a Fx(D)p
Fw(;)8 b Fx(G)16 b Fy(`)2328 5203 y Fk(n)2396 5224 y
Fw(cast)h Fl(\()p Ft(e)2591 5237 y Fp(1)2624 5224 y Fs(;)8
b Ft(B)p Fs(;)g Ft(e)2761 5237 y Fp(2)2794 5224 y Fl(\))17
b Fw(:)f(snat)h Ft(B)1476 5357 y Ff(Figur)o(e)h(8.)23
b(T)-6 b(ype)19 b(system)h(of)f Fx(l)2316 5372 y Fk(H)5
b Fr(\015)p eop
%%Page: 9 9
9 8 bop -150 83 a Fw(frame)n(w)o(ork)18 b(ga)o(v)o(e)e(us)h
(signi\002cant)g(practical)g(adv)n(antages)h(in)f(formal)f(de)n(v)o
(el-)-150 166 y(opment)k(of)f Fx(l)215 181 y Fk(H)5 b
Fr(\015)323 166 y Fw(:)-63 284 y Fy(\017)42 b Fw(Important)25
b(meta-theoretic)g(properties)g(of)g(the)g(type)g(language)h(we)16
367 y(use,)34 b(TL,)29 b(ha)o(v)o(e)i(already)g(been)h(pro)o(v)o(en)g
([44].)58 b(Since)31 b(we)f(do)i(not)16 450 y(change)27
b(an)o(ything)f(about)h(the)e(type)h(language)h(itself,)f(all)e(these)i
(re-)16 533 y(sults)d(\(e.g.,)g(the)g(Church-Rosser)h(property)g(of)f
(the)g(type)h(language,)16 616 y(decidable)34 b(equality)g(on)f(type)h
(terms\))e(are)h(easily)h(reused)f(in)g(our)16 699 y(proofs.)-63
820 y Fy(\017)42 b Fx(l)57 835 y Fk(H)5 b Fr(\015)193
820 y Fw(is)27 b(based)i(on)f(the)g(computational)h(language)h
Fx(l)1483 832 y Fk(H)1560 820 y Fw([44)q(].)49 b(W)-6
b(e)16 903 y(ha)o(v)o(e)16 b(tried)f(to)g(mak)o(e)h(the)f(dif)n
(ference)h(between)g(these)g(tw)o(o)f(languages)16 986
y(as)24 b(small)f(as)h(possible.)39 b(As)24 b(a)f(result,)i(the)f
(proof)g(of)g(type)h(safety)f(of)16 1069 y Fx(l)57 1084
y Fk(H)5 b Fr(\015)181 1069 y Fw(is)15 b(v)o(ery)h(similar)f(to)h(the)g
(type)g(safety)g(proof)g(for)g Fx(l)1456 1081 y Fk(H)1506
1069 y Fw(.)22 b(Again,)16 b(we)16 1152 y(were)k(able)g(to)g(reuse)g
(certain)g(lemmata)g(and)h(techniques)g(de)n(v)o(eloped)16
1235 y(for)e Fx(l)163 1247 y Fk(H)232 1235 y Fw(to)g(our)g(o)n(wn)g
(proof.)-150 1316 y(A)24 b(detailed)h(proof)h(of)e(the)h(type)g(safety)
g(of)g Fx(l)1062 1331 y Fk(H)5 b Fr(\015)1194 1316 y
Fw(is)24 b(presented)i(in)f(an)g(e)o(x-)-150 1399 y(tended)20
b(technical)f(report)g([36)q(].)-67 1499 y(Figure)k(6)h(de\002nes)g
Fx(l)488 1514 y Fk(H)5 b Fr(\015)620 1499 y Fw(computational)25
b(types,)g(and)f(is)f(the)h(\002rst)f(step)-150 1582
y(needed)30 b(to)e(inte)o(grate)h Fx(l)506 1597 y Fk(H)5
b Fr(\015)642 1582 y Fw(into)29 b(the)f(TL)g(frame)n(w)o(ork.)52
b(The)28 b(syntax)i(of)-150 1665 y(the)f(computational)h(language)g
Fx(l)765 1680 y Fk(H)5 b Fr(\015)902 1665 y Fw(is)28
b(gi)n(v)o(en)i(in)e(Figure)h(7.)52 b(The)29 b(lan-)-150
1748 y(guage)c Fx(l)93 1763 y Fk(H)5 b Fr(\015)226 1748
y Fw(contains)24 b(recursion)h(and)g(staging)g(constructs.)39
b(It)24 b(contains)-150 1831 y(tw)o(o)k(prede\002ned)h(representation)f
(types:)42 b(naturals)28 b(and)g(booleans.)51 b(The)-150
1914 y Fn(if)21 b Fw(construct,)h(as)f(in)g Fx(l)464
1926 y Fk(H)514 1914 y Fw(,)g(pro)o(vides)h(for)e(propagating)j(proof)e
(information)-150 1997 y(into)k(branches)h(\(analogous)g(to)f(the)f
Fn(tycase)i Fw(construct)f(of)g(MetaD\);)f(full)-150
2080 y(implementation)d(of)g(inducti)n(v)o(e)g(datatypes)h(in)e(the)h
(style)f(of)h(MetaD)f(is)g(left)-150 2163 y(for)j(future)g(w)o(ork.)37
b(Since)23 b(arbitrary)g(dependent)i(types)f(are)f(prohibited)h(in)-150
2246 y Fx(l)-109 2261 y Fk(H)5 b Fr(\015)-1 2246 y Fw(,)19
b(we)h(use)g(uni)n(v)o(ersal)g(and)g(e)o(xistential)g(quanti\002cation)
g(to)f(e)o(xpress)i(de-)-150 2329 y(pendencies)h(of)e(v)n(alues)g(on)h
(types)f(and)h(kinds.)27 b(F)o(or)19 b(e)o(xample,)i(the)f(identity)
-150 2412 y(function)g(on)f(naturals)g(is)g(e)o(xpressed)h(in)f
Fx(l)965 2427 y Fk(H)5 b Fr(\015)1092 2412 y Fw(as)19
b(follo)n(ws:)105 2554 y Fl(\()p Fx(L)p Ft(n)f Fw(:)e
Ft(N)t(a)n(t)5 b Fs(:)j Fx(l)p Ft(x)18 b Fw(:)e(snat)h
Ft(n)p Fs(:)p Ft(x)p Fl(\))g Fw(:)f Fy(8)p Ft(n)h Fw(:)f
Ft(N)t(a)n(t)5 b Fs(:)j Fw(snat)18 b Ft(n)f Fy(!)f Fw(snat)h
Ft(n)-67 2713 y Fw(In)26 b Fx(l)62 2728 y Fk(H)5 b Fr(\015)170
2713 y Fw(,)27 b(we)f(also)g(formalize)g(the)g Fn(assert/cast)g
Fw(construct,)i(which)-150 2796 y(requires)18 b(e)o(xtending)h(the)f
(language)h(of)e(computational)i(types)f(with)f(equal-)-150
2879 y(ity)j(judgment)h(types.)26 b(Similarly)-5 b(,)19
b(we)h(add)g(the)g(appropriate)h(constructs)g(to)-150
2962 y(the)e(syntax)h(of)f Fx(l)296 2977 y Fk(H)5 b Fr(\015)404
2962 y Fw(.)-67 3062 y(T)-6 b(o)26 b(be)g(able)h(to)f(de\002ne)g(the)g
(small-step)g(semantics)h(for)f(a)g(staged)h(lan-)-150
3145 y(guage,)17 b(we)e(had)h(to)g(de\002ne)f(the)h(syntax)g(of)f
Fx(l)994 3160 y Fk(H)5 b Fr(\015)1118 3145 y Fw(in)15
b(terms)g(of)h(le)n(v)o(el-inde)o(x)o(ed)-150 3228 y(f)o(amilies)j(of)g
(e)o(xpressions)h(and)f(v)n(alues)h([48].)j(The)c(typing)h(judgment)g
(\(Fig-)-150 3311 y(ure)c(8\),)g(as)f(well)g(as)h(the)f(type)h
(assignments,)h(of)f Fx(l)1126 3326 y Fk(H)5 b Fr(\015)1249
3311 y Fw(has)16 b(also)g(been)g(appro-)-150 3394 y(priately)27
b(e)o(xtended)h(with)e(le)n(v)o(el)h(annotations)h([55].)46
b(A)26 b(le)n(v)o(el-annotation)-150 3477 y(erasure)f(function)h(\()p
Fy(\001)19 b(j)450 3488 y Fk(n)483 3477 y Fw(\))25 b(is)f(used)i(to)f
(con)m(v)o(ert)g Fx(l)1137 3492 y Fk(H)5 b Fr(\015)1270
3477 y Fw(typing)26 b(assignments)-150 3560 y(into)20
b(a)h(form)f(required)h(by)g(the)f(typing)h(judgment)h(of)e(TL[44].)27
b(This)20 b(inter)o(-)-150 3643 y(f)o(ace)f(then)h(allo)n(ws)f(us)g(to)
g(reuse)g(the)g(original)g(TL)f(typing)i(judgment.)-67
3743 y(Due)k(to)g(lack)h(of)f(space)g(we)g(do)h(not)f(sho)n(w)h(all)e
(the)h(de\002nitions)h(for)f(the)-150 3826 y(small-step)i(semantics)g
(of)g Fx(l)632 3841 y Fk(H)5 b Fr(\015)740 3826 y Fw(.)43
b(These,)28 b(together)e(with)f(proofs)i(of)f(the)-150
3909 y(rele)n(v)n(ant)32 b(theorems,)j(are)c(included)h(in)f(a)h
(companion)h(technical)f(report)-150 3992 y([36)q(].)22
b(Here,)d(we)g(list)f(the)h(most)g(important)g(theorems.)-148
4094 y(L)t Fa(E)t(M)t(M)t(A)i Fw(1)83 b(\()t(P)t Fa(R)r(O)t(G)t(R)t(E)t
(S)t(S)t Fw(\).)43 b Ft(If)36 b Fx(D)p Fw(;)8 b Fx(G)900
4067 y Fm(+)976 4094 y Fy(`)1022 4067 y Fk(n)1082 4094
y Ft(e)1115 4067 y Fk(n)1175 4094 y Fw(:)26 b Ft(A,)41
b(then)d(e)1527 4067 y Fk(n)1587 4094 y Fy(2)22 b Ft(V)1714
4067 y Fk(n)1785 4094 y Ft(or)-150 4177 y Fy(9)p Ft(e)-75
4150 y Fr(0)-55 4177 y Fs(:)p Ft(e)16 b Fy(7\000)-12
b(!)16 b Ft(e)185 4150 y Fr(0)205 4177 y Ft(.)-150 4280
y Fw(Proof)f(is)f(by)h(structural)g(induction)h(on)f
Ft(e)900 4252 y Fk(n)947 4280 y Fy(2)d Ft(E)1060 4252
y Fk(n)1094 4280 y Fw(,)j(and)g(then)g(by)h(e)o(xamination)-150
4363 y(of)j(cases)g(of)g(the)g(typing)h(judgment.)-148
4460 y(L)t Fa(E)t(M)t(M)t(A)h Fw(2)83 b(\()t(S)t Fa(U)t(B)t(J)t(E)t(C)t
(T)19 b Fw(R)t Fa(E)t(D)t(U)t(C)t(T)t(I)t(O)t(N)t Fw(\).)43
b Fy(8)p Ft(n)p Fs(:)23 b Ft(if)15 b Fx(D)p Fs(;)8 b
Fx(G)13 b Fy(`)1413 4433 y Fk(n)1460 4460 y Ft(e)h Fw(:)f
Ft(A)i(and)i(e)c Fy(!)-150 4543 y Ft(e)-117 4516 y Fr(0)-97
4543 y Ft(,)19 b(then)g Fx(D)p Fs(;)8 b Fx(G)16 b Fy(`)270
4516 y Fk(n)320 4543 y Ft(e)353 4516 y Fr(0)390 4543
y Fw(:)g Ft(A.)-150 4624 y Fw(Proof)j(is)f(by)i(cases)f(of)g(possible)g
(reductions)h Ft(e)d Fy(!)g Ft(e)1222 4597 y Fr(0)1242
4624 y Fw(.)-148 4743 y(T)t Fa(H)t(E)t(O)t(R)t(E)t(M)j
Fw(1)83 b(\()t(T)t Fa(Y)t(P)t(E)20 b(S)t(A)t(F)t(E)t(T)t(Y)t
Fw(\))r(.)43 b Ft(If)17 b Fx(D)p Fw(;)8 b Fx(G)1057 4716
y Fm(+)1123 4743 y Fy(`)1169 4716 y Fk(n)1217 4743 y
Ft(e)1250 4716 y Fk(n)1300 4743 y Fw(:)16 b Ft(A)h(then)i(e)1642
4700 y Fk(n)1596 4743 y Fy(7\000)-12 b(!)1717 4690 y
Fr(\003)1766 4743 y Ft(v)1799 4716 y Fk(n)1832 4743 y
Ft(,)-150 4826 y(and)20 b Fx(D)p Fs(;)8 b Fx(G)101 4799
y Fm(+)166 4826 y Fy(`)212 4799 y Fk(n)262 4826 y Ft(v)17
b Fw(:)f Ft(A,)i(or)h(e)e Fy(*)p Ft(.)-150 4907 y Fw(Proof)25
b(uses)g(subject)g(reduction)h(\(Lemma)e(2\))h(and)g(progress)h
(\(Lemma)f(1\))-150 4990 y(lemmas)35 b(and)h(follo)n(ws)f(Wright)f(and)
i(Felleisen')l(s)e(syntactic)h(technique)-150 5073 y([58)q(].)-150
5217 y Fu(5)99 b(Related)26 b(W)-7 b(ork)-67 5317 y Fw(Barendre)o(gt)21
b([3])f(is)g(a)g(good)h(high-le)n(v)o(el)g(introduction)h(to)e(the)g
(theory)h(of)-150 5400 y(dependent)29 b(type)e(systems.)47
b(There)27 b(are)g(a)g(number)h(of)f(other)g(references)2049
83 y(to)20 b(\(strictly)f(terminating\))h(functional)g(programming)i
(in)e(dependent)h(type)2049 166 y(theory)f(literature)e([32)q(,)g(31)q
(,)g(6].)2132 266 y(Cayenne)25 b(is)d(a)i(dependently)h(typed)f
(programming)h(language)g([1].)36 b(In)2049 349 y(essence,)22
b(it)f(is)g(a)g(direct)g(combination)h(of)g(a)f(dependent)i(type)e
(theory)h(with)2049 432 y(\(potentially\))g(non-terminating)h
(recursion.)32 b(It)21 b(has)h(in)f(f)o(act)h(been)h(used)f(to)2049
515 y(implement)30 b(an)f(\(unstaged\))i(interpreter)e(similar)g(to)g
(the)h(one)g(discussed)2049 598 y(in)23 b(this)g(paper)g([2)q(].)34
b(The)23 b(w)o(ork)h(presented)g(here)f(e)o(xtends)h(the)f(w)o(ork)h
(done)2049 681 y(in)k(Cayenne)h(in)e(three)h(respects:)41
b(First,)29 b(Cayenne)g(allo)n(ws)f(types)g(to)g(de-)2049
764 y(pend)20 b(on)f(v)n(alues,)g(and)g(thus,)g(does)g(not)g(ensure)g
(that)f(type)h(checking)h(termi-)2049 847 y(nates.)j(Second,)c(Cayenne)
g(does)f(not)g(support)h(dependent)h(datatypes)f(\(lik)o(e)2049
930 y Fn(J\(e,s,t\))p Fw(\),)g(and)g(so,)g(writing)f(an)h(interpreter)g
(in)m(v)o(olv)o(es)g(the)g(use)g(of)g(a)g(sep-)2049 1013
y(arate)g(proof)g(object)g(to)g(encode)h(the)f(information)g(carried)g
(by)h Fn(J\(e,s,t\))p Fw(\),)2049 1096 y(which)g(is)f(mostly)h(just)f
(threaded)h(through)h(the)e(program.)26 b(The)19 b(number)i(of)2049
1179 y(parameters)16 b(passed)g(to)f(both)h(the)g(Meta-D)f(and)h
(Cayenne)h(implementation)2049 1262 y(of)24 b(the)g(e)n(v)n(al)g
(function)h(is)e(the)h(same,)h(b)o(ut)f(using)g(dependent)i(datatypes)f
(in)2049 1345 y(Meta-D)j(allo)n(ws)g(direct)h(analogy)g(with)f(the)g
(standard)h(de\002nition)g(of)f(the)2049 1428 y(semantics)33
b(o)o(v)o(er)g(typing)g(judgments)h(rather)e(than)h(ra)o(w)g(terms.)63
b(Third,)2049 1511 y(Cayenne)29 b(does)g(not)g(pro)o(vide)g(e)o
(xplicit)f(support)h(for)f(staging,)j(an)d(essen-)2049
1594 y(tial)f(component)j(for)d(achie)n(ving)i(the)f(performance)h
(results)f(that)f(can)h(be)2049 1677 y(achie)n(v)o(ed)20
b(using)g(tagless)f(staged)g(interpreters.)2132 1777
y(Xi)14 b(and)i(Pfenning)f(study)h(a)e(number)i(of)f(dif)n(ferent)g
(practical)g(approaches)2049 1860 y(to)28 b(introducing)h(dependent)h
(types)e(into)g(programming)h(languages)h([59,)2049 1943
y(60)q(].)52 b(Their)28 b(w)o(ork)h(concentrates)h(on)f(limiting)g(the)
f(e)o(xpressi)n(vity)i(of)f(the)2049 2026 y(dependent)e(types,)g(and)f
(thus)f(limiting)g(the)g(constraints)h(that)f(need)h(to)f(be)2049
2109 y(solv)o(ed)d(to)e(Presb)o(ur)o(ger)h(arithmetic)f(problems.)30
b(Singleton)21 b(types)g(seem)g(to)2049 2192 y(ha)o(v)o(e)k(been)h
(\002rst)e(used)i(by)f(Xi)g(in)g(the)g(conte)o(xt)g(of)g(DML)g([60)q
(].)41 b(The)25 b(idea)2049 2275 y(w)o(as)19 b(later)e(used)i(in)g(a)f
(number)h(of)f(w)o(orks)h(that)g(further)f(de)n(v)o(eloped)i(the)f
(idea)2049 2358 y(of)g(representation)h(types)f(and)h(intensional)f
(type)h(analysis.)2132 2457 y(Logical)i(frame)n(w)o(orks)i([19,)e(37)q
(])g(use)h(dependent)h(types)f(as)f(a)g(basis)h(for)2049
2540 y(proof)29 b(systems.)52 b(While)28 b(this)g(is)g(related)h(to)f
(our)h(w)o(ork,)i(logical)e(frame-)2049 2623 y(w)o(orks)h(alone)g(are)f
(not)h(suf)n(\002cient)f(for)g(our)h(purposes,)j(as)c(we)g(are)h(inter)
o(-)2049 2707 y(ested)g(in)g(computational)i(programming)f(languages)h
(that)e(ha)o(v)o(e)g(ef)n(fects)2049 2790 y(such)25 b(as)g
(non-termination.)41 b(It)24 b(is)g(only)h(with)g(the)f(recent)h(w)o
(ork)g(of)g(Shao,)2049 2873 y(Saha,)f(T)m(rifono)o(v)f(and)h(P)o(apasp)
o(yrou)g(that)f(we)f(ha)o(v)o(e)i(a)e(generic)i(frame)n(w)o(ork)2049
2956 y(for)d(safely)g(inte)o(grating)g(a)g(computation)h(base)g
(language,)g(with)f(a)g(rich)g(de-)2049 3039 y(pendent)h(type)f
(system,)g(without)g(losing)g(decidability)h(\(or)e(soundness\))j(of)
2049 3122 y(type-checking.)2132 3221 y(Dybjer)28 b(e)o(xtensi)n(v)o
(ely)i(studies)e(the)g(semantics)h(of)f(inducti)n(v)o(e)h(sets)f(and)
2049 3304 y(f)o(amilies)21 b([11)q(,)f(12)q(,)h(13)q(,)f(14)q(,)h(16)q
(])g(and)h(simultaneous)g(inducti)n(v)o(e-)g(recursi)n(v)o(e)2049
3387 y(de\002nitions)k([15].)43 b(TL)25 b(uses)h(only)g(the)g(former)f
(\(in)h(the)f(type)h(le)n(v)o(el\),)h(and)2049 3470 y(we)g(also)h(use)g
(them)f(at)h(the)f(v)n(alue)h(le)n(v)o(el)g(\()p Fn(J\(e,s,t\))p
Fw(\).)49 b(The)27 b(Coq)h(proof)2049 3553 y(assistant)21
b(pro)o(vides)h(f)o(airly)g(e)o(xtensi)n(v)o(e)g(support)g(for)f(both)h
(kinds)g(of)f(de\002ni-)2049 3636 y(tions)28 b([17,)f(34)q(,)g(35].)49
b(In)27 b(the)h(future,)h(it)e(will)f(be)i(interesting)g(to)f(e)o
(xplore)2049 3719 y(the)19 b(inte)o(gration)g(of)g(the)g(second)h(of)f
(these)g(techniques)h(into)f(programming)2049 3802 y(languages.)2132
3902 y(One)d(interesting)g(problem)g(is)g(whether)g
(self-interpretation)g(is)f(possible)2049 3985 y(in)27
b(a)g(gi)n(v)o(en)h(programming)h(language.)49 b(This)26
b(is)h(possible)h(with)f(simply-)2049 4068 y(typed)e(languages)g([54)q
(].)37 b(It)23 b(is)h(not)g(clear)m(,)h(ho)n(we)n(v)o(er)m(,)g(that)f
(it)f(can)i(be)f(done)2049 4151 y(in)j(a)g(dependently)h(typed)g
(language)g([38)q(].)46 b(Exploring)28 b(this)f(problem)g(is)2049
4234 y(interesting)19 b(future)g(w)o(ork.)2132 4334 y(Finally)-5
b(,)24 b(staged)f(type)h(inference)g([46])f(can)h(also)f(be)g(used)h
(as)f(a)g(means)2049 4417 y(of)k(obtaining)g(programs)h(without)f
(tags.)46 b(Of)26 b(the)h(techniques)h(discussed)2049
4500 y(in)d(this)f(paper)m(,)i(it)e(is)h(probably)h(closest)e(in)h
(spirit)f(to)h(tag)f(elimination.)41 b(In)2049 4583 y(f)o(act,)27
b(in)f(a)f(multi-stage)h(setting)g(tag)g(elimination)f(is)h(applied)g
(at)g(runtime)2049 4666 y(and)h(is)g(nothing)g(b)o(ut)g(a)f
(non-standard)j(type)e(analysis.)47 b(K)n(e)o(y)27 b(dif)n(ferences)
2049 4749 y(are)g(that)g(in)f(the)h(staged)h(type)f(inference)h(system)
f(the)g(code)h(type)f(that)g(is)2049 4832 y(used)h(does)h(not)f
(re\003ect)f(an)o(y)h(type)g(information,)i(and)e(type)g(information)
2049 4915 y(can)e(only)g(be)g(determined)g(by)g(dynamic)h(type)f
(checking.)44 b(More)26 b(impor)o(-)2049 4998 y(tantly)-5
b(,)23 b(the)f(success)h(and)g(f)o(ailure)f(of)g(staged)h(type)g
(inference)g(can)f(depend)2049 5081 y(on)29 b(whether)g(the)f(v)n(alue)
h(in)g(the)f(code)h(type)g(has)g(under)o(gone)h(simpli\002ca-)2049
5164 y(tion,)22 b(and)g(it)f(is)g(easy)h(to)g(return)g(a)f(v)n(alue)i
(that)e(tells)g(us)h(\(at)f(runtime,)h(in)g(the)2049
5247 y(language\))28 b(whether)f(this)f(dynamic)h(inference)g
(succeeded)i(or)d(not.)46 b(T)-6 b(ag)2049 5330 y(elimination,)24
b(on)g(the)f(other)h(hand,)h(w)o(orks)f(on)g(code)g(that)f(has)g(an)h
(e)o(xplicit)p eop
%%Page: 10 10
10 9 bop -150 83 a Fw(static)16 b(type.)22 b(Additionally)-5
b(,)18 b(by)e(using)h(carefully)g(crafted)f(\223f)o(all-back)h
(plan\224)-150 166 y(projection/embedding)26 b(pairs,)e(runtime)f(tag)h
(elimination)f(is)g(guaranteed)-150 249 y(to)h(al)o(w)o(ays)h(ha)o(v)o
(e)f(the)g(same)g(denotational)h(semantics)g(\(b)o(ut)e(certainly)i
(not)-150 332 y(operational)f(semantics\))f(independently)i(of)e(the)g
(test)f(of)h(the)g(code)h(being)-150 415 y(analyzed)k(and)f(an)o(y)g
(simpli\002cations)g(that)f(may)h(be)g(done)g(to)g(the)f(subject)-150
498 y(program)20 b([54].)-150 682 y Fu(6)99 b(Conclusions)25
b(and)h(Futur)n(e)g(W)-7 b(ork)-67 782 y Fw(In)20 b(this)f(paper)h(we)g
(ha)o(v)o(e)g(sho)n(wn)g(ho)n(w)g(a)g(dependently)i(typed)e(program-)
-150 865 y(ming)d(language)i(can)e(be)h(used)f(to)g(e)o(xpress)h(a)f
(staged)h(interpreter)f(that)f(com-)-150 948 y(pletely)h(circumv)o
(ents)h(the)f(need)h(for)f(runtime)g(tagging)h(and)g(untagging)g(op-)
-150 1031 y(erations)24 b(associated)h(with)f(uni)n(v)o(ersal)g
(datatypes.)40 b(In)24 b(doing)h(so)f(we)g(ha)o(v)o(e)-150
1114 y(highlighted)j(tw)o(o)g(k)o(e)o(y)g(practical)f(issues)h(that)f
(arise)g(when)h(trying)f(to)h(de-)-150 1197 y(v)o(elop)h(staged)g
(interpreters)f(in)h(a)f(dependently)i(typed)f(language.)50
b(First,)-150 1280 y(the)19 b(need)g(for)g(functions)g(that)g(b)o(uild)
g(the)f(representations)i(of)f(typing)g(judg-)-150 1363
y(ments)j(that)g(the)f(interpretation)i(function)f Ft(should)h
Fw(be)f(de\002ned)h(o)o(v)o(er)l(.)31 b(And)-150 1446
y(second,)18 b(the)f(need)g(for)f(representation)i(types)f(to)f(a)o(v)o
(oid)h(polluting)g(the)f(type)-150 1529 y(language)21
b(with)f(the)g(impure)g(terms)g(of)g(the)f(computational)j(language.)27
b(T)-6 b(o)-150 1612 y(demonstrate)33 b(that)g(staging)g(constructs)g
(and)g(dependent)i(types)e(can)f(be)-150 1695 y(safely)21
b(combined,)g(we)g(formalize)f(our)h(language)h(as)e(a)g(multi-stage)g
(com-)-150 1778 y(putational)26 b(language)g(typed)g(by)g(Shao,)h
(Saha,)f(T)m(rifono)o(v)-5 b(,)27 b(and)f(P)o(apasp)o(y-)-150
1861 y(rou')l(s)i(TL)f(system.)51 b(This)28 b(allo)n(ws)g(us)g(to)g
(pro)o(v)o(e)g(type)h(safety)f(in)g(a)g(f)o(airly)-150
1945 y(straightforw)o(ard)c(manner)m(,)h(and)f(without)g(ha)o(ving)g
(to)f(duplicate)i(the)e(w)o(ork)-150 2028 y(done)d(for)f(the)g(TL)f
(system.)-67 2127 y(A)j(practical)h(concern)h(about)f(using)g
(dependent)h(types)f(for)g(writing)f(in-)-150 2210 y(terpreters)c(is)f
(that)h(such)g(systems)h(do)f(not)g(ha)o(v)o(e)g(decidable)h(type)f
Ft(infer)m(ence)p Fw(,)-150 2293 y(which)f(some)g(vie)n(w)g(as)f(a)h
(highly-v)n(alued)h(feature)f(for)f(an)o(y)h(typed)h(language.)-150
2376 y(W)-6 b(e)20 b(did)h(not)g(\002nd)g(that)g(the)f(annotations)i
(were)f(a)g(b)o(urden,)h(and)f(some)g(sim-)-150 2459
y(ple)f(tricks)g(in)g(the)h(implementation)g(were)f(enough)i(to)e(a)o
(v)o(oid)g(the)g(need)h(for)-150 2542 y(redundant)f(annotations.)-67
2642 y(In)29 b(carrying)g(out)h(this)e(w)o(ork)i(we)e(de)n(v)o(eloped)j
(a)e(deeper)h(appreciation)-150 2725 y(for)20 b(the)f(subtleties)h(in)m
(v)o(olv)o(ed)g(in)g(both)g(dependently)i(typed)e(programming)-150
2808 y(and)k(in)f(the)g(implementation)g(of)g(type)h(check)o(ers)g(for)
f(dependently)i(typed)-150 2891 y(languages.)38 b(Our)23
b(current)h(implementation)g(is)f(a)g(prototype)h(system)g(that)-150
2974 y(we)f(ha)o(v)o(e)h(made)g(a)o(v)n(ailable)g(online)g([27].)36
b(Our)24 b(ne)o(xt)g(step)f(is)g(to)h(study)g(the)-150
3057 y(inte)o(gration)j(of)g(such)g(a)g(dependently)i(typed)e(language)
h(into)f(a)g(practical)-150 3140 y(implementation)d(of)f(multi-stage)h
(programming,)h(such)f(as)g(MetaOCaml)-150 3223 y([28)q(].)d(W)-6
b(e)16 b(ha)o(v)o(e)h(also)f(found)h(that)g(there)f(a)g(lot)g(of)g
(opportunities)i(in)e(the)g(con-)-150 3306 y(te)o(xt)22
b(of)g(dependently)i(typed)f(languages)h(that)e(we)h(w)o(ould)g(lik)o
(e)f(to)g(e)o(xplore)-150 3389 y(in)30 b(the)f(future.)56
b(Examples)30 b(include)h(syntactically)f(lighter)o(-support)g(for)-150
3472 y(representation)25 b(types,)h(formalizing)e(some)h(simple)f
(tricks)g(that)g(we)g(ha)o(v)o(e)-150 3555 y(used)19
b(in)f(our)h(implementation)g(to)f(help)h(alle)n(viate)f(the)h(need)g
(for)f(redundant)-150 3638 y(type)i(annotations.)26 b(W)-6
b(e)19 b(are)g(also)h(interested)g(in)f(e)o(xploring)i(the)e(use)h(of)g
(de-)-150 3721 y(pendent)25 b(types)g(to)e(re\003ect)h(the)f(resource)i
(needs)g(of)f(generated)h(programs)-150 3804 y([8,)19
b(24,)g(52].)-150 3988 y Fu(7)99 b(Refer)n(ences)-113
4088 y Fw([1])42 b(Lennart)114 b(Augustsson.)333 b(Cayenne)116
b(\226)e(a)g(lan-)16 4171 y(guage)91 b(with)e(dependent)j(types.)254
b(A)-6 b(v)n(ailable)91 b(from)16 4254 y Fn(http://www.cs.chalmers.se/)
41 b(augustss/cayenne)p Fw(.)-113 4375 y([2])h(Lennart)79
b(Augustsson)h(and)g(Magnus)h(Carlsson.)219 b(An)16 4458
y(e)o(x)o(ercise)76 b(in)g(dependent)i(types:)137 b(A)75
b(well-typed)i(inter)o(-)16 4541 y(preter)l(.)162 b(In)62
b Ft(W)-7 b(orkshop)63 b(on)f(Dependent)g(T)-6 b(ypes)62
b(in)f(Pr)m(o-)16 4624 y(gr)o(amming)p Fw(,)f(Gothenb)o(ur)o(g,)h
(1999.)133 b(A)-6 b(v)n(ailable)52 b(online)h(from)16
4707 y Fn(www.cs.chalmers.se/\230augustss/cayenne/interp.ps)p
Fw(.)-113 4827 y([3])42 b(Henk)18 b(P)-8 b(.)15 b(Barendre)o(gt.)24
b(Lambda)18 b(calculi)f(with)f(types.)24 b(In)17 b(S.)f(Abram-)16
4910 y(sk)o(y)-5 b(,)19 b(D.)f(M.)h(Gabbay)-5 b(,)19
b(and)h(T)-6 b(.)18 b(S.)g(E.)g(Maibaum,)h(editors,)g
Ft(Handbook)16 4993 y(of)k(Lo)o(gic)g(in)g(Computer)g(Science)p
Fw(.)h(Oxford)g(Uni)n(v)o(ersity)f(Press,)g(Ox-)16 5076
y(ford,)c(1991.)-113 5197 y([4])42 b(Jon)19 b(Bentle)o(y)-5
b(.)28 b(Little)17 b(languages.)28 b Ft(CA)n(CM)p Fw(,)18
b(29\(8\):711\226721,)k(1986.)-113 5317 y([5])42 b(Luca)18
b(Cardelli.)23 b(Phase)17 b(distinctions)h(in)g(type)g(theory)-5
b(.)24 b(Unpublished)16 5400 y(manuscript)c(a)o(v)n(ailable)f(online)g
(from)g(author')l(s)h(homepage,)g(1988.)2086 83 y([6])42
b(Thierry)g(Coquand,)49 b(Bengt)43 b(Nordstr)6 b(\250)-31
b(om,)48 b(Jan)43 b(M.)f(Smith,)47 b(and)2215 166 y(Bjorne)16
b(v)o(on)g(Sydo)n(w)-5 b(.)21 b(T)-6 b(ype)17 b(theory)f(and)h
(programming.)22 b Ft(Bulletin)15 b(of)2215 249 y(the)22
b(Eur)m(opean)h(Association)f(for)g(Theor)m(etical)g(Computer)g
(Science)p Fw(,)2215 332 y(52:203\226228,)31 b(February)d(1994.)53
b(Columns:)40 b(Logic)26 b(in)h(Computer)2215 415 y(Science.)2086
535 y([7])42 b(Karl)20 b(Crary)g(and)h(Stephanie)f(W)-6
b(eirich.)31 b(Fle)o(xible)20 b(type)g(analysis.)32 b(In)2215
619 y Ft(Pr)m(oceedings)18 b(of)f(the)g(F)-8 b(ourth)17
b(A)n(CM)g(SIGPLAN)e(International)k(Con-)2215 702 y(fer)m(ence)h(on)g
(Functional)g(Pr)m(o)o(gr)o(amming)g(\(ICFP-99\))p Fw(,)e(v)o(olume)h
(34.9)2215 785 y(of)31 b Ft(A)n(CM)f(Sigplan)h(Notices)p
Fw(,)j(pages)d(233\226248,)36 b(N.Y)-10 b(.,)32 b(September)2215
868 y(27\22629)20 b(1999.)g(A)m(CM)f(Press.)2086 988
y([8])42 b(Karl)19 b(Crary)h(and)g(Stephanie)g(W)-6 b(eirich.)29
b(Resource)20 b(bound)h(certi\002ca-)2215 1071 y(tion.)44
b(In)24 b Ft(the)g(Symposium)h(on)g(Principles)f(of)g(Pr)m(o)o(gr)o
(amming)h(Lan-)2215 1154 y(gua)o(g)o(es)32 b(\(POPL)c('00\))p
Fw(,)33 b(pages)e(184\226198,)k(N.Y)-10 b(.,)31 b(January)61
b(19\22621)2215 1237 y(2000.)20 b(A)m(CM)f(Press.)2086
1357 y([9])42 b(Karl)21 b(Crary)-5 b(,)21 b(Stephanie)h(W)-6
b(eirich,)21 b(and)h(J.)f(Gre)o(gory)h(Morrisett.)34
b(In-)2215 1440 y(tensional)24 b(polymorphism)h(in)f(type-erasure)g
(semantics.)42 b(In)23 b Ft(Inter)o(-)2215 1523 y(national)33
b(Confer)m(ence)h(on)f(Functional)g(Pr)m(o)o(gr)o(amming)g(\(ICFP\))e
(,)2215 1606 y(Baltimor)m(e)o(,)19 b(Maryland,)h(USA)p
Fw(,)e(pages)i(301\226312,)h(1998.)2049 1727 y([10])42
b(Ro)n(w)o(an)34 b(Da)o(vies)f(and)h(Frank)g(Pfenning.)74
b(A)33 b(modal)h(analysis)g(of)2215 1810 y(staged)22
b(computation.)37 b(In)21 b Ft(the)h(Symposium)h(on)f(Principles)f(of)g
(Pr)m(o-)2215 1893 y(gr)o(amming)16 b(Langua)o(g)o(es)i(\(POPL)c('96\))
p Fw(,)i(pages)h(258\226270,)h(St.)d(Peters-)2215 1976
y(b)o(ur)o(g)k(Beach,)g(1996.)2049 2096 y([11])42 b(Peter)31
b(Dybjer)l(.)69 b(Inducti)n(v)o(ely)33 b(de\002ned)g(sets)e(in)h
(Martin-L)6 b(\250)-31 b(of)t(')l(s)32 b(set)2215 2179
y(theory)-5 b(.)58 b(In)29 b(A.)e(A)-6 b(vron,)32 b(R.)c(Harper)m(,)i
(F)-6 b(.)28 b(Honsell,)j(I.)c(Mason,)32 b(and)2215 2262
y(G.)g(Plotkin,)i(editors,)i Ft(W)-7 b(orkshop)34 b(on)e(Gener)o(al)h
(Lo)o(gic)p Fw(,)i(February)2215 2345 y(1987.)2049 2466
y([12])42 b(Peter)50 b(Dybjer)l(.)130 b(Inducti)n(v)o(e)52
b(sets)f(and)g(f)o(amilies)g(in)g(Martin-)2215 2549 y(L)6
b(\250)-31 b(of)t(')l(s)43 b(type)h(theory)g(and)g(their)f
(set-theoretic)g(semantics.)106 b(In)2215 2632 y(G.)62
b(Huet)h(and)h(G.)e(Plotkin,)74 b(editors,)f Ft(Pr)m(eliminary)63
b(Pr)m(oc.)2215 2715 y(of)69 b(1st)f(Int.)g(W)-7 b(orkshop)71
b(on)e(Lo)o(gical)g(F)l(r)o(ame)o(works,)81 b(An-)2215
2798 y(tibes,)58 b(F)l(r)o(ance)o(,)h(7\22611)52 b(May)g(1990)p
Fw(,)59 b(pages)52 b(213\226230.)h(1990.)2215 2881 y
(ftp://ftp.inria.fr/INRIA/Projects/coq/types/Proceedings/)2215
2964 y(book90.ps.Z.)2049 3084 y([13])42 b(Peter)33 b(Dybjer)l(.)73
b(Inducti)n(v)o(e)34 b(sets)f(and)h(f)o(amilies)g(in)f(Martin-L)6
b(\250)-31 b(of)t(')l(s)2215 3167 y(type)34 b(theory)g(and)h(their)e
(set-theoretic)h(semantics.)74 b(In)34 b(G.)f(Huet)2215
3250 y(and)19 b(G.)g(Plotkin,)f(editors,)g Ft(Lo)o(gical)i(F)l(r)o(ame)
o(works)p Fw(,)e(pages)i(280\226306.)2215 3333 y(Cambridge)g(Uni)n(v)o
(ersity)f(Press,)f(1991.)2049 3454 y([14])42 b(Peter)19
b(Dybjer)l(.)30 b(Inducti)n(v)o(e)21 b(f)o(amilies.)29
b Ft(F)-8 b(ormal)20 b(Aspects)g(of)f(Comput-)2215 3537
y(ing)p Fw(,)g(6\(4\):440\226465,)i(1994.)2049 3657 y([15])42
b(Peter)49 b(Dybjer)l(.)127 b(A)50 b(general)h(formulation)g(of)f
(simultaneous)2215 3740 y(inducti)n(v)o(e-recursi)n(v)o(e)18
b(de\002nitions)f(in)f(type)h(theory)-5 b(.)22 b Ft(J)n(ournal)c(of)f
(Sym-)2215 3823 y(bolic)i(Lo)o(gic)p Fw(,)g(65\(2\):525\226549,)i
(2000.)2049 3944 y([16])42 b(Peter)59 b(Dybjer)g(and)h(Anton)g(Setzer)l
(.)155 b(Finite)58 b(axiomatiza-)2215 4027 y(tions)68
b(of)g(inducti)n(v)o(e)h(and)g(inducti)n(v)o(e-recursi)n(v)o(e)h
(de\002nitions.)2215 4110 y(In)e(R.)g(Backhouse)h(and)g(T)-6
b(.)68 b(Sheard,)80 b(editors,)g Ft(Informal)2215 4193
y(Pr)m(oc.)47 b(of)h(W)-7 b(orkshop)50 b(on)e(Generic)g(Pr)m(o)o(gr)o
(amming)o(,)56 b(WGP'98,)2215 4276 y(Mar)o(str)o(and,)61
b(Sweden,)g(18)53 b(J)m(une)g(1998)p Fw(.)g(Dept.)e(of)h(Comput-)2215
4359 y(ing)f(Science,)59 b(Chalmers)51 b(Uni)n(v)-5 b(.)51
b(of)g(T)-5 b(echn.,)59 b(and)51 b(G)6 b(\250)-31 b(otebor)o(g)2215
4442 y(Uni)n(v)-5 b(.,)75 b(June)65 b(1998.)174 b(Electronic)64
b(v)o(ersion)h(a)o(v)n(ailable)f(at)2215 4525 y
(http://wsinwp01.win.tue.nl:1234/WGPProceedings/.)2049
4645 y([17])42 b(Eduardo)17 b(Gim)t(\264)-29 b(enez.)20
b(A)c(tutorial)g(on)g(recursi)n(v)o(e)g(types)h(in)e(Coq.)21
b(T)-5 b(ech-)2215 4728 y(nical)19 b(Report)g(TR-0221,)g(INRIA)f
(Rocquencourt,)j(May)f(1998.)2049 4848 y([18])42 b(Carl)19
b(A.)g(Gunter)l(.)29 b Ft(Semantics)20 b(of)g(Pr)m(o)o(gr)o(amming)g
(Langua)o(g)o(es)p Fw(.)31 b(MIT)2215 4932 y(Press,)18
b(1992.)2049 5052 y([19])42 b(Robert)20 b(Harper)m(,)h(Furio)f
(Honsell,)g(and)h(Gordon)g(Plotkin.)31 b(A)20 b(frame-)2215
5135 y(w)o(ork)d(for)g(de\002ning)g(logics.)22 b(In)16
b Ft(Pr)m(oceedings)i(Symposium)f(on)h(Lo)o(gic)2215
5218 y(in)38 b(Computer)g(Science)p Fw(,)43 b(pages)c(194\226204,)44
b(W)-6 b(ashington,)43 b(1987.)2215 5301 y(IEEE)25 b(Computer)i
(Society)f(Press.)49 b(The)26 b(conference)i(w)o(as)e(held)h(at)2215
5384 y(Cornell)19 b(Uni)n(v)o(ersity)-5 b(,)19 b(Ithaca,)g(Ne)n(w)g(Y)
-8 b(ork.)p eop
%%Page: 11 11
11 10 bop -150 83 a Fw([20])42 b(Robert)18 b(Harper)h(and)g(Gre)o(g)f
(Morrisett.)25 b(Compiling)19 b(polymorphism)16 166 y(using)36
b(intentional)g(type)g(analysis.)80 b(In)35 b Ft(Confer)m(ence)i(Recor)
m(d)f(of)16 249 y(POPL)30 b('95:)49 b(22nd)32 b(Annual)g(A)n(CM)f
(SIGPLAN-SIGA)n(CT)e(Sympo-)16 332 y(sium)h(on)h(Principles)f(of)h(Pr)m
(o)o(gr)o(amming)g(Langua)o(g)o(es,)k(San)c(F)l(r)o(an-)16
415 y(cisco,)c(Calif)o(.)p Fw(,)e(pages)h(130\226141,)j(Ne)n(w)c(Y)-8
b(ork,)27 b(NY)-10 b(,)25 b(January)h(1995.)16 498 y(A)m(CM.)-150
619 y([21])42 b(Liwen)18 b(Huang)i(and)f(W)-6 b(alid)19
b(T)-6 b(aha.)26 b(A)18 b(practical)h(implementation)h(of)16
702 y(tag)f(elimination.)27 b(In)19 b(preperation.)-150
822 y([22])42 b(P)o(aul)22 b(Hudak.)38 b(Building)22
b(domain)h(speci\002c)g(embedded)h(languages.)16 905
y Ft(A)n(CM)18 b(Computing)i(Surve)n(ys)p Fw(,)f(28A:\(electronic\),)h
(December)f(1996.)-150 1025 y([23])42 b(P)o(aul)26 b(Hudak.)50
b(Modular)27 b(domain)g(speci\002c)g(languages)g(and)g(tools.)16
1108 y(In)19 b Ft(Pr)m(oceedings)g(of)g(F)m(ifth)e(International)j
(Confer)m(ence)g(on)f(Softwar)m(e)16 1191 y(Reuse)p Fw(,)g(pages)h
(134\226142.)g(IEEE)e(Computer)i(Society)-5 b(,)18 b(June)i(1998.)-150
1312 y([24])42 b(R.J.M.)30 b(Hughes,)35 b(Lars)30 b(P)o(areto,)j(and)f
(Amr)e(Sabry)-5 b(.)66 b(Pro)o(ving)31 b(the)16 1395
y(correctness)h(of)f(reacti)n(v)o(e)h(systems)g(using)g(sized)f(types.)
67 b(In)31 b(Guy)16 1478 y(L.)18 b(Steele)g(Jr)m(,)g(editor)m(,)g
Ft(In)h(pr)m(oceedings)h(of)f(the)g(A)n(CM)f(Symposium)h(on)16
1561 y(Principles)26 b(of)h(Pr)m(o)o(gr)o(amming)g(Langua)o(g)o(es)i
(\(POPL\))p Fw(,)c(v)o(olume)i(23,)16 1644 y(St)18 b(Petersb)o(ur)o(g,)
g(Florida,)g(1996.)i(A)m(CM)f(Press.)-150 1764 y([25])42
b(Neil)28 b(D.)f(Jones,)32 b(Carsten)c(K)g(Gomard,)j(and)e(Peter)e
(Sestoft.)57 b Ft(P)-6 b(ar)o(-)16 1847 y(tial)15 b(Evaluation)i(and)f
(A)o(utomatic)f(Pr)m(o)o(gr)o(am)h(Gener)o(ation)p Fw(.)21
b(Prentice-)16 1930 y(Hall,)d(1993.)-150 2051 y([26])42
b(Henning)g(Makholm.)98 b(On)41 b(Jones-optimal)h(specialization)g(for)
16 2134 y(strongly)20 b(typed)f(languages.)29 b(In)19
b Ft([49])p Fw(,)g(pages)h(129\226148,)h(2000.)-150 2254
y([27])42 b(Meta-D:)14 b(A)h(dependently)h(typed)g(multi-stage)e
(language.)19 b(A)-6 b(v)n(ailable)16 2337 y(online)19
b(from)g Fv(http://www)l(.cse)o(.ogi.edu/)e(pasalic/metad/)p
Fw(,)i(2002.)-150 2457 y([28])42 b(MetaOCaml:)107 b(A)61
b(compiled,)71 b(type-safe)62 b(multi-stage)f(pro-)16
2540 y(gramming)c(language.)146 b(A)-6 b(v)n(ailable)56
b(online)g(from)g Fv(http://cs-)16 2623 y(www)l(.cs)o(.y)o(ale)o
(.edu/homes/taha/MetaOCaml/)p Fw(,)18 b(2001.)-150 2744
y([29])42 b(T)-6 b(orben)28 b(Mogensen.)56 b(Inherited)27
b(limits.)53 b(In)27 b Ft(P)-6 b(artial)27 b(Evaluation:)16
2827 y(Pr)o(actice)21 b(and)g(Theory)p Fw(,)h(v)o(olume)f(1706)h(of)f
Ft(Lectur)m(e)g(Notes)g(in)g(Com-)16 2910 y(puter)e(Science)p
Fw(,)h(pages)g(189\226202.)h(Springer)o(-V)-8 b(erlag,)18
b(1999.)-150 3030 y([30])42 b(Eugenio)25 b(Moggi,)g(W)-6
b(alid)23 b(T)-6 b(aha,)25 b(Zine)f(El-Abidine)f(Benaissa,)i(and)16
3113 y(T)m(im)h(Sheard.)49 b(An)26 b(idealized)h(MetaML:)f(Simpler)m(,)
h(and)f(more)h(e)o(x-)16 3196 y(pressi)n(v)o(e.)35 b(In)22
b Ft(Eur)m(opean)g(Symposium)h(on)f(Pr)m(o)o(gr)o(amming)g(\(ESOP\))p
Fw(,)16 3279 y(v)o(olume)29 b(1576)h(of)f Ft(Lectur)m(e)g(Notes)g(in)g
(Computer)g(Science)p Fw(,)j(pages)16 3362 y(193\226207.)21
b(Springer)o(-V)-8 b(erlag,)18 b(1999.)-150 3483 y([31])42
b(Bengt)d(Nordstr)6 b(\250)-31 b(om.)91 b(Programming)40
b(in)e(constructi)n(v)o(e)i(set)f(the-)16 3566 y(ory:)44
b(Some)29 b(e)o(xamples.)60 b(In)29 b Ft(Pr)m(oceedings)h(of)f(the)h(A)
n(CM)e(Confer)o(-)16 3649 y(ence)15 b(on)g(Functional)g(Pr)m(o)o(gr)o
(amming)h(and)f(Computer)g(Ar)m(c)o(hitectur)m(e)o(,)16
3732 y(P)-6 b(ortsmouth,)19 b(NH)p Fw(,)f(pages)i(141\226154,)h(Ne)n(w)
e(Y)-8 b(ork,)19 b(1981.)g(A)m(CM.)-150 3852 y([32])42
b(Bengt)30 b(Nordstr)6 b(\250)-31 b(om,)32 b(K)n(ent)e(Peterson,)i(and)
e(Jan)g(M.)f(Smith.)60 b Ft(Pr)m(o-)16 3935 y(gr)o(amming)19
b(in)f(Martin-Lof)7 b(')m(s)18 b(T)-6 b(ype)19 b(Theory)p
Fw(,)f(v)o(olume)h(7)f(of)g Ft(Interna-)16 4018 y(tional)26
b(Series)g(of)g(Mono)o(gr)o(aphs)j(on)d(Computer)h(Science)p
Fw(.)50 b(Oxford)16 4101 y(Uni)n(v)o(ersity)26 b(Press,)h(Ne)n(w)e(Y)-8
b(ork,)27 b(NY)-10 b(,)26 b(1990.)50 b(Currently)26 b(a)o(v)n(ailable)
16 4184 y(online)19 b(from)g(\002rst)f(authors)i(homepage.)-150
4305 y([33])42 b(Ore)o(gon)52 b(Graduate)f(Institute)g(T)-5
b(echnical)51 b(Reports.)f(P)-8 b(.O.)49 b(Box)16 4388
y(91000,)17 b(Portland,)e(OR)f(97291-1000,USA.)19 b(A)-6
b(v)n(ailable)16 b(online)f(from)16 4471 y Fv(ftp://cse)o
(.ogi.edu/pub/tech-repor)s(ts/README.html)p Fw(.)-150
4591 y([34])42 b(Christine)29 b(P)o(aulin-Mohring.)59
b(Inducti)n(v)o(e)30 b(de\002nitions)f(in)g(the)g(sys-)16
4674 y(tem)c(Coq:)37 b(Rules)26 b(and)g(properties.)49
b(Research)26 b(report)g(RR)f(92-49,)16 4757 y(Laboratoire)18
b(de)f(l'Informatique)h(du)g(P)o(arall)t(\264)-29 b(elisme,)17
b(Ecole)g(normale)16 4840 y(sup)t(\264)-29 b(erieure)20
b(de)f(L)l(yon,)g(December)h(1992.)-150 4961 y([35])42
b(Christine)18 b(P)o(aulin-Mohring.)26 b(Inducti)n(v)o(e)19
b(de\002nitions)f(in)g(the)g(system)16 5044 y(Coq:)23
b(Rules)18 b(and)h(properties.)25 b(In)18 b(M.)g(Bezem)g(and)h(J.)e(F)
-6 b(.)17 b(Groote,)i(ed-)16 5127 y(itors,)d Ft(Pr)m(oc.)g(of)g(1st)g
(Int.)g(Conf)o(.)f(on)i(T)-6 b(yped)17 b(Lambda)g(Calculi)f(and)h(Ap-)
16 5210 y(plications,)h(TLCA)m('93,)f(Utr)m(ec)o(ht,)h(The)g
(Netherlands,)g(16\22618)i(Mar)m(c)o(h)16 5293 y(1993)p
Fw(,)38 b(v)o(olume)c(664)h(of)e Ft(Lectur)m(e)h(Notes)f(in)h(Computer)
g(Science)p Fw(,)16 5376 y(pages)20 b(328\226345.)h(Springer)o(-V)-8
b(erlag,)18 b(Berlin,)g(1993.)2049 83 y([36])42 b(Emir)27
b(P)o(a)r(\020)-27 b(sali)t(\264)e(c,)28 b(W)-6 b(alid)27
b(T)-6 b(aha,)29 b(and)f(T)m(im)f(Sheard.)55 b(T)-6 b(agless)27
b(staged)2215 166 y(interpreters)19 b(for)g(typed)h(languages)h
(\(formal)e(de)n(v)o(elopment\).)30 b(T)-5 b(ech-)2215
249 y(nical)19 b(Report)g(02-006,)h(OGI,)e(2002.)28 b(A)-6
b(v)n(ailable)20 b(from)f([33)q(].)2049 369 y([37])42
b(Frank)18 b(Pfenning.)26 b(Logic)19 b(programming)h(in)e(the)g(LF)f
(logical)i(frame-)2215 452 y(w)o(ork.)48 b(In)26 b(G)t(\264)-29
b(erard)26 b(Huet)f(and)h(Gordon)h(Plotkin,)f(editors,)h
Ft(Lo)o(gical)2215 535 y(F)l(r)o(ame)o(works)p Fw(,)38
b(pages)d(149\226181.)h(Cambridge)f(Uni)n(v)o(ersity)g(Press,)2215
619 y(1991.)2049 739 y([38])42 b(Frank)36 b(Pfenning)h(and)g(Peter)f
(Lee.)82 b(LEAP:)34 b(A)i(language)i(with)2215 822 y(e)n(v)n(al)29
b(and)g(polymorphism.)59 b(In)29 b(Josep)g(D)n(\264)-23
b(\021az)28 b(and)i(Fernando)f(Ore-)2215 905 y(jas,)d(editors,)h
Ft(T)l(APSOFT'89:)36 b(Pr)m(oceedings)26 b(of)f(the)h(International)
2215 988 y(J)n(oint)d(Confer)m(ence)g(on)g(Theory)g(and)g(Pr)o(actice)f
(of)g(Softwar)m(e)h(De)o(vel-)2215 1071 y(opment,)p Fw(,)h(v)o(olume)f
(352)h(of)e Ft(Lectur)m(e)h(Notes)g(in)g(Computer)g(Science)p
Fw(,)2215 1154 y(pages)d(345\226359.)h(Springer)o(-V)-8
b(erlag,)18 b(1989.)2049 1274 y([39])42 b(Benjamin)29
b(C.)g(Pierce.)58 b Ft(Basic)29 b(Cate)m(gory)h(Theory)f(for)g
(Computer)2215 1357 y(Scientists)p Fw(.)e(MIT)18 b(Press,)h(Cambridge,)
g(Mass.,)g(1991.)2049 1478 y([40])42 b(Calton)d(Pu,)k(Andre)n(w)c
(Black,)44 b(Crispin)39 b(Co)n(w)o(an,)44 b(and)39 b(Jonathan)2215
1561 y(W)-6 b(alpole.)67 b(Microlanguages)33 b(for)e(operating)i
(system)f(specializa-)2215 1644 y(tion.)65 b(In)31 b
Ft(Pr)m(oceedings)h(of)f(the)g(W)-7 b(orkshop)33 b(on)e
(Domain-Speci\002c)2215 1727 y(Langua)o(g)o(es)p Fw(,)21
b(P)o(aris,)c(1997.)2049 1847 y([41])42 b(John)26 b(C.)e(Re)o(ynolds.)
47 b(De\002nitional)24 b(interpreters)h(for)g(higher)o(-order)2215
1930 y(programming)18 b(languages.)k(In)16 b Ft(A)n(CM)g(National)g
(Confer)m(ence)p Fw(,)i(pages)2215 2013 y(717\226740.)j(A)m(CM,)d
(1972.)2049 2134 y([42])42 b(John)26 b(C.)e(Re)o(ynolds.)47
b(De\002nitional)24 b(interpreters)h(for)g(higher)o(-order)2215
2217 y(programming)h(languages.)47 b Ft(Higher)o(-Or)m(der)26
b(and)g(Symbolic)f(Com-)2215 2300 y(putation)p Fw(,)19
b(11\(4\),)f(1998.)25 b(\(Reprinted)19 b(from)e(the)h(proceedings)i(of)
e(the)2215 2383 y(25th)i(A)m(CM)e(National)h(Conference)h(\(1972\))g
([41)q(]\).)2049 2503 y([43])42 b(Zhong)26 b(Shao)f(and)g(Andre)n(w)g
(W)-7 b(.)24 b(Appel.)46 b(A)24 b(type-based)i(compiler)2215
2586 y(for)g(standard)g(ML.)49 b(In)26 b Ft(Pr)m(oceedings)h(of)f(the)f
(A)n(CM)h(SIGPLAN'95)2215 2669 y(Confer)m(ence)33 b(on)f(Pr)m(o)o(gr)o
(amming)h(Langua)o(g)o(e)g(Design)g(and)f(Imple-)2215
2752 y(mentation)26 b(\(PLDI\))p Fw(,)d(pages)j(116\226129,)j(La)c
(Jolla,)h(California,)g(18\226)2215 2835 y(21)19 b(June)h(1995.)2049
2956 y([44])42 b(Zhong)23 b(Shao,)f(Bratin)f(Saha,)i(V)-8
b(alery)21 b(T)m(rifono)o(v)-5 b(,)23 b(and)g(Nik)o(olaos)g(P)o(a-)2215
3039 y(pasp)o(yrou.)55 b(A)27 b(type)h(system)g(for)f(certi\002ed)g
(binaries.)53 b Ft(A)n(CM)27 b(SIG-)2215 3122 y(PLAN)17
b(Notices)p Fw(,)i(31\(1\):217\226232,)i(January)f(2002.)2049
3242 y([45])42 b(T)m(im)34 b(Sheard,)k(Zine)c(El-Abidine)h(Benaissa,)j
(and)d(Emir)f(P)o(a)r(\020)-27 b(sali)t(\264)e(c.)2215
3325 y(DSL)26 b(implementation)h(using)g(staging)h(and)f(monads.)53
b(In)26 b Ft(Second)2215 3408 y(Confer)m(ence)17 b(on)f
(Domain-Speci\002c)i(Langua)o(g)o(es)g(\(DSL)m('99\))p
Fw(,)e(Austin,)2215 3491 y(T)-5 b(e)o(xas,)18 b(1999.)i(USEUNIX.)2049
3611 y([46])42 b(Mark)23 b(Shields,)f(T)m(im)f(Sheard,)i(and)g(Simon)e
(L.)g(Pe)o(yton)i(Jones.)37 b(Dy-)2215 3694 y(namic)26
b(typing)g(through)h(staged)f(type)h(inference.)49 b(In)25
b Ft(In)h(pr)m(oceed-)2215 3777 y(ings)h(of)f(the)h(A)n(CM)f(Symposium)
i(on)f(Principles)f(of)h(Pr)m(o)o(gr)o(amming)2215 3861
y(Langua)o(g)o(es)21 b(\(POPL\))p Fw(,)c(pages)j(289\226302,)h(1998.)
2049 3981 y([47])42 b(Y)-7 b(annis)19 b(Smaragdakis)h(and)g(Don)g
(Batory)-5 b(.)28 b(DiST)m(iL:)17 b(A)i(transforma-)2215
4064 y(tion)29 b(library)g(for)h(data)f(structures.)60
b(In)29 b Ft(USENIX)g(Confer)m(ence)h(on)2215 4147 y(Domain-Speci\002c)
21 b(Langua)o(g)o(es)p Fw(,)f(October)g(1997.)2049 4267
y([48])42 b(W)-6 b(alid)24 b(T)-6 b(aha.)44 b Ft(Multi-Sta)o(g)o(e)26
b(Pr)m(o)o(gr)o(amming:)35 b(Its)24 b(Theory)h(and)g(Ap-)2215
4350 y(plications)p Fw(.)36 b(PhD)21 b(thesis,)h(Ore)o(gon)g(Graduate)g
(Institute)f(of)h(Science)2215 4433 y(and)e(T)-5 b(echnology)g(,)20
b(1999.)28 b(A)-6 b(v)n(ailable)20 b(from)f([33].)2049
4554 y([49])42 b(W)-6 b(alid)22 b(T)-6 b(aha,)24 b(editor)l(.)41
b Ft(Semantics,)24 b(Applications,)h(and)f(Implemen-)2215
4637 y(tation)19 b(of)g(Pr)m(o)o(gr)o(am)g(Gener)o(ation)p
Fw(,)h(v)o(olume)f(1924)i(of)e Ft(Lectur)m(e)g(Notes)2215
4720 y(in)g(Computer)g(Science)p Fw(,)h(Montr)t(\264)-29
b(eal,)19 b(2000.)h(Springer)o(-V)-8 b(erlag.)2049 4840
y([50])42 b(W)-6 b(alid)23 b(T)-6 b(aha.)42 b(A)23 b(sound)i(reduction)
g(semantics)f(for)f(untyped)i(CBN)2215 4923 y(multi-stage)i
(computation.)h(Or)m(,)g(the)f(theory)g(of)g(MetaML)h(is)e(non-)2215
5006 y(tri)n(vial.)f(In)19 b Ft(Pr)m(oceedings)g(of)f(the)h(W)-7
b(orkshop)20 b(on)f(P)-6 b(artial)18 b(Evaluation)2215
5089 y(and)f(Semantics-Based)h(Pr)m(o)o(gr)o(am)e(Maniplation)i
(\(PEPM\))p Fw(,)d(Boston,)2215 5172 y(2000.)20 b(A)m(CM)f(Press.)2049
5293 y([51])42 b(W)-6 b(alid)41 b(T)-6 b(aha,)48 b(Zine-El-Abidine)42
b(Benaissa,)47 b(and)c(T)m(im)f(Sheard.)2215 5376 y(Multi-stage)32
b(programming:)51 b(Axiomatization)33 b(and)f(type-safety)-5
b(.)p eop
%%Page: 12 12
12 11 bop 16 83 a Fw(In)27 b Ft(25th)h(International)h(Colloquium)f(on)
g(A)o(utomata,)h(Langua)o(g)o(es,)16 166 y(and)19 b(Pr)m(o)o(gr)o
(amming)g(\(ICALP\))p Fw(,)d(v)o(olume)j(1443)h(of)e
Ft(Lectur)m(e)h(Notes)f(in)16 249 y(Computer)i(Science)p
Fw(,)f(pages)h(918\226929,)h(Aalbor)o(g,)e(1998.)-150
369 y([52])42 b(W)-6 b(alid)24 b(T)-6 b(aha,)25 b(P)o(aul)f(Hudak,)i
(and)e(Zhan)o(yong)i(W)-6 b(an.)44 b(Directions)24 b(in)16
452 y(functional)k(programming)g(for)f(real\(-time\))f(applications.)53
b(In)27 b Ft(the)16 535 y(International)19 b(W)-7 b(orkshop)19
b(on)f(Embedded)h(Softwar)m(e)f(\(ES)f('01\))p Fw(,)h(v)o(ol-)16
619 y(ume)24 b(221)h(of)f Ft(Lectur)m(e)g(Notes)f(in)h(Computer)g
(Science)p Fw(,)i(pages)f(185\226)16 702 y(203,)19 b(Lak)o(e)h(T)-6
b(ahoe,)19 b(2001.)h(Springer)o(-V)-8 b(erlag.)-150 822
y([53])42 b(W)-6 b(alid)25 b(T)-6 b(aha)26 b(and)g(Henning)h(Makholm.)
50 b(T)-6 b(ag)26 b(elimination)g(\226)g(or)g(\226)16
905 y(type)20 b(specialisation)g(is)f(a)h(type-inde)o(x)o(ed)h(ef)n
(fect.)29 b(In)20 b(Subtyping)g(and)16 988 y(Dependent)j(T)-6
b(ypes)22 b(in)f(Programming,)i(APPSEM)d(W)-6 b(orkshop.)22
b(IN-)16 1071 y(RIA)c(technical)i(report,)f(2000.)-150
1191 y([54])42 b(W)-6 b(alid)19 b(T)-6 b(aha,)20 b(Henning)h(Makholm,)f
(and)h(John)f(Hughes.)31 b(T)-6 b(ag)19 b(elim-)16 1274
y(ination)25 b(and)g(Jones-optimality)-5 b(.)46 b(In)24
b(Oli)n(vier)h(Dan)m(vy)g(and)g(Andrzej)16 1357 y(Filinski,)c(editors,)
i Ft(Pr)m(o)o(gr)o(ams)f(as)g(Data)g(Objects)p Fw(,)g(v)o(olume)h(2053)
g(of)16 1440 y Ft(Lectur)m(e)c(Notes)g(in)g(Computer)g(Science)p
Fw(,)h(pages)g(257\226275,)h(2001.)-150 1561 y([55])42
b(W)-6 b(alid)22 b(T)-6 b(aha)23 b(and)h(T)m(im)e(Sheard.)40
b(Multi-stage)23 b(programming)h(with)16 1644 y(e)o(xplicit)15
b(annotations.)20 b(In)15 b Ft(Pr)m(oceedings)h(of)f(the)g(Symposium)h
(on)g(P)-6 b(ar)o(-)16 1727 y(tial)28 b(Evaluation)i(and)f
(Semantic-Based)h(Pr)m(o)o(gr)o(am)f(Manipulation)16
1810 y(\(PEPM\))p Fw(,)17 b(pages)j(203\226217,)h(Amsterdam,)e(1997.)h
(A)m(CM)f(Press.)-150 1930 y([56])42 b(Robert)26 b(D.)g(T)-5
b(ennent.)51 b Ft(Semantics)27 b(of)f(Pr)m(o)o(gr)o(amming)h(Langua)o
(g)o(es)p Fw(.)16 2013 y(Prentice)19 b(Hall,)f(Ne)n(w)g(Y)-8
b(ork,)19 b(1991.)-150 2134 y([57])42 b(V)-8 b(alery)22
b(T)m(rifono)o(v)-5 b(,)23 b(Bratin)f(Saha,)g(and)h(Zhong)g(Shao.)37
b(Fully)21 b(re\003e)o(x-)16 2217 y(i)n(v)o(e)e(intensional)g(type)g
(analysis.)27 b(In)18 b Ft(Pr)m(oceedings)i(of)e(the)h(A)n(CM)f(Sig-)16
2300 y(plan)31 b(International)g(Confer)m(ence)h(on)e(Functional)h(Pr)m
(o)o(gr)o(amming)16 2383 y(\(ICFP-00\))p Fw(,)22 b(v)o(olume)g(35.9)h
(of)f Ft(A)n(CM)f(Sigplan)i(Notices)p Fw(,)g(pages)g(82\226)16
2466 y(93,)c(N.Y)-10 b(.,)18 b(September)38 b(18\22621)20
b(2000.)g(A)m(CM)f(Press.)-150 2586 y([58])42 b(Andre)n(w)27
b(K.)g(Wright)f(and)i(Matthias)f(Felleisen.)52 b(A)26
b(syntactic)i(ap-)16 2669 y(proach)35 b(to)e(type)h(soundness.)76
b Ft(Information)35 b(and)f(Computation)p Fw(,)16 2752
y(115\(1\):38\22694,)21 b(1994.)-150 2873 y([59])42 b(Hongwei)29
b(Xi)e(and)i(Frank)f(Pfenning.)56 b(Eliminating)28 b(array)g(bound)16
2956 y(checking)34 b(through)g(dependent)h(types.)72
b(In)33 b Ft(Pr)m(oceedings)h(of)f(the)16 3039 y(A)n(CM)d(SIGPLAN'98)g
(Confer)m(ence)j(on)e(Pr)m(o)o(gr)o(amming)h(Langua)o(g)o(e)16
3122 y(Design)g(and)g(Implementation)h(\(PLDI\))p Fw(,)d(pages)i
(249\226257,)37 b(Mon-)16 3205 y(treal,)18 b(Canada,)i(17\22619)g(June)
g(1998.)-150 3325 y([60])42 b(Ho)n(wgwei)20 b(Xi)f(and)i(Frank)f
(Pfenning.)30 b(Dependent)21 b(types)f(in)g(practi-)16
3408 y(cal)27 b(programming.)53 b(In)26 b Ft(Confer)m(ence)i(Recor)m(d)
g(of)e(POPL)g(99:)39 b(The)16 3491 y(26th)33 b(A)n(CM)e(SIGPLAN-SIGA)n
(CT)f(Symposium)j(on)g(Principles)f(of)16 3574 y(Pr)m(o)o(gr)o(amming)h
(Langua)o(g)o(es,)38 b(San)c(Antonio,)i(T)-7 b(e)o(xas)p
Fw(,)35 b(pages)f(214\226)16 3657 y(227,)19 b(Ne)n(w)g(Y)-8
b(ork,)19 b(NY)-10 b(,)19 b(January)h(1999.)f(A)m(CM.)p
eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
